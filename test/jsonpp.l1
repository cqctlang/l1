
@include <json.cqct>

printf("::::::::::::\n%s\n::::::::::::\n",val2json(1));

printf("::::::::::::\n%s\n::::::::::::\n",val2json(
        [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,
         1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,
         1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,
         1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]
));

x = [ 1:2, 3:4, 5:6, 7:8 ];
printf("::::::::::::\n%s\n::::::::::::\n",
    val2json( [ x,x,x,x,x,x,x,x,x,x,x,x ]));

@define mkrep(a,n) {
    @local s;
    s = mkstr(n);
    memset((char*)s,a,n);
    return s;
}

str = mkrep('a',40);
printf("::::::::::::\n%s\n::::::::::::\n",
    val2json( [ 
        str+"1" : str,
        str+"2" : str,
        str+"3" : str,
        str+"4" : str,
        str+"5" : str,
   ]));

printf("::::::::::::\n%s\n::::::::::::\n",
    val2json( [ 
        mkrep('a',8) : mkrep('b',8),
        mkrep('b',8) : mkrep('b',8),
        mkrep('c',8) : mkrep('b',8),
        mkrep('d',8) : mkrep('b',8),
        mkrep('e',8) : mkrep('b',8),
        mkrep('f',8) : mkrep('b',8),
        mkrep('e',8) : [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,
         1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,
         1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,
         1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],
   ]));
   
ex = [ 
        mkrep('a',8) : mkrep('b',8),
        mkrep('b',8) : mkrep('b',8),
        mkrep('c',8) : mkrep('b',8),
        mkrep('d',8) : mkrep('b',8),
        mkrep('e',8) : mkrep('b',8),
        mkrep('f',8) : mkrep('b',8),
        mkrep('e',8) : [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,
         1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,
         1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,
         1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],
   ];

printf("::::::::::::\n%s\n::::::::::::\n",
    val2json( [ ex, ex, [ "a" : ex, mkrep('w',50) : ex ], [1,2,3,4] ] ));
