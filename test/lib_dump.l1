

@include <dump.cqct>

ns = @names c64le {
  typedef uint32 ULONG;

  enum ENUM {
    ENUM_0 = 1094795584, ENUM_1, ENUM_2
  };

  typedef struct _TYPE {
    @0x00 ULONG field1;
    @0x04 ULONG fields;
    @0x08 char ary[8];
    @0x10 enum ENUM value;
    @0x10 int* ending[1];
    @0x18;
  } TYPE, *PTYPE;

  typedef TYPE TTT;

  @0x0 TTT ttt;
  @0x100 TTT lala[5];

  @0x200 int an_int;

};

as = mkzas(0x1000);

memset((char*){as}0,'A',0x1000);

dom = mkdom(ns,as);

printf("%s\n",objectStr(&dom`ttt));
printf("%s\n",objectStr(&dom`lala[5]));
printf("%s\n",objectStr(&dom`an_int));

printtype(@typeof(dom`an_int));
printtype(@typeof(dom`lala));
printtype(@typeof(struct dom`_TYPE));

dumpns(ns);
