<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>Cinquecento Manual</title>
<link rel="stylesheet" type="text/css" media="screen" href="reset.css"/>
<link rel="stylesheet" type="text/css" media="screen" href="styles.css"/>
</head>

<body>

<div id="content">


<p>
Jump to Section:
<a href="#sec:synindex">Syntax Index</a> |
<a href="#sec:fnindex">Function Index</a> |
<a href="#sec:cinterface">C Interface</a>
</p>

<h4>Cinquecento Manual</h4>

<h3>Introduction</h3>

<p>
Cinquecento is a programming language designed to help
programmers examine the state of programs in execution,
in particular C programs.
</p>

<p>
To be useful for program debugging, Cinquecento
requires a facility for controlling and accessing the
state of running programs.  We provide one such
facility for Linux processes as a separate program.  In
general, Cinquecento defines a standard (and simple)
interface for such facilities, but implementations are
not part of the language.  Instead this manual focuses
on generic features of the language that are
independent of any debugging facility.
</p>

<h3>Input</h3>

<p>
A Cinquecento program consists of a sequence of
expressions to be evaluated in order by the Cinquecento
evaluator.</p>

<p id="syn:@include">
The Cinquecento evaluator reads code from its current
<em>input file</em>.
During parsing of an input file, an occurrence (not
within a string literal or comment) of either of the
forms
<div class="code">
@include "<span class="arg">filename</span>"<br />
@include <<span class="arg">filename</span>>
</div>
is replaced with the contents of the named file.
The first form searches for
<span class="arg">filename</span>
in the Cinquecento system load path.
The second form searches the directory that contains the
current input file.

The current input file is temporarily switched to 
<span class="arg">filename</span> during the substitution.

</p>

<p>
Comments have the same syntax as C and C++ comments.
Input enclosed in <tt>/*</tt> <tt>*/</tt> is a comment.
Input between <tt>//</tt> and the next newline character is also a comment.
</p>

<h3>Variables and Scope</h3>

<p>
Variables are dynamically typed, lexically
scoped, and can be updated by assignment.  Variable
bindings can be created in the top-level environment,
by the <span class="fnindex"
id="syn:@local">@local</span> binding form within
compound expressions, and by the function
constructor <span class="fnindex"
id="syn:lambda">lambda</span>.
</p>

<h3>Cinquecento Types</h3>

<p>
Cinquecento defines several types of values.  Every
value in Cinquecento belongs to exactly one type.  For
each type there is a predicate to test whether a value
belongs to the type.
</p>

<p>
The types special to Cinquecento are <em>cvalue</em>,
<em>ctype</em>, <em>domain</em>, <em>address
space</em>, and <em>name space</em>.  In certain
(usually invisible) contexts, address spaces are
indexed by values of type <em>address</em> and
<em>range</em>.
</p>

<p>
Other basic types include <em>string</em>,
<em>procedure</em>, and <em>file descriptor</em>.

<p>
There are also several container types for storing
values of any type: <em>list</em>, <em>vector</em>, and
<em>table</em>.
</p>

<p>
The special value <tt>nil</tt> is not a member of any
other type or equal to any other value.
</p>

<p>
The <em>undefined</em> value is the value of
uninitialized variables.  There is no literal
expression for this value.
</p>

<p>
There are no explicit numeric types.  In Cinquecento,
all arithmetic is performed using C operators over
values of type cvalue.
</p>

<p>
The following functions are predicates on the type of a value.
</p>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:isas">isas(<span class="arg">val</span>)</span>  (address space)
</div>
<div class="function">
<span class="id" id="fn:isctype">isctype(<span class="arg">val</span>)</span> (C type)
</div>
<div class="function">
<span class="id" id="fn:iscvalue">iscvalue(<span class="arg">val</span>)</span> (C value)
</div>
<div class="function">
<span class="id" id="fn:isdom">isdom(<span class="arg">val</span>)</span> (domain)
</div>
<div class="function">
<span class="id" id="fn:isfd">isfd(<span class="arg">val</span>)</span> (file descriptor)
</div>
<div class="function">
<span class="id" id="fn:islist">islist(<span class="arg">val</span>)</span> (list)
</div>
<div class="function">
<span class="id" id="fn:isnil">isnil(<span class="arg">val</span>)</span> (nil)
</div>
<div class="function">
<span class="id" id="fn:isns">isns(<span class="arg">val</span>)</span> (name space)
</div>
<div class="function">
<span class="id" id="fn:isprocedure">isprocedure(<span class="arg">val</span>)</span> (procedure)
</div>
<div class="function">
<span class="id" id="fn:isrange">isrange(<span class="arg">val</span>)</span> (range)
</div>
<div class="function">
<span class="id" id="fn:isrec">isrec(<span class="arg">val</span>)</span> (record)
</div>
<div class="function">
<span class="id" id="fn:isrd">isrd(<span class="arg">val</span>)</span> (record descriptor)
</div>
<div class="function">
<span class="id" id="fn:isstring">isstring(<span class="arg">val</span>)</span> (string)
</div>
<div class="function">
<span class="id" id="fn:istable">istable(<span class="arg">val</span>)</span> (table)
</div>
<div class="function">
<span class="id" id="fn:isvector">isvector(<span class="arg">val</span>)</span> (vector)
</div>
<div class="returns">
<span class="type">cvalue (1 or 0)</span>
</div>
</div>
<div class="desc">
These functions test <span class="arg">val</span> for membership
in a particular type.  They return
<span class="arg">1</span> if
the value belongs to the type,   
<span class="arg">0</span> otherwise.
</div>
</div>


<h3>Concepts</h3>

<p>
A Cinquecento program constructs and interacts with an
abstract model of a program in execution.  This section
describes the concepts and terminology underlying this
model.
</p>

<p>
A program in execution reads and writes values stored
in its memory.  This memory is represented in
Cinquecento by an <em>address space</em>.  An address
space maps byte addresses to byte values.  Address
spaces are dynamic: the value of a byte at a given
address may change over time as it is updated by the
program.  Moreover, not all valid byte addresses are
necessarily mapped by a given address space; typically,
an address space maps a small number (dozens) of large,
contiguous address ranges (each spanning megabytes),
and this mapping may change over time.
</p>

<p>
For example, the address space of a typical Unix or
Windows program contains mappings for the program text,
data, stack, and heap.  Only the contents of the text
mapping are likely to remain unchanged during execution.
New mappings may be added over time as the program
loads dynamic libraries or as its demand for stack and
heap space increases.
</p>

<p>
An address space is a raw, untyped view of program
memory.  A higher-level view of memory is formed by
overlaying program-defined types.  Cinquecento uses the
type system of the C programming language.  The
definitions of C types to be associated with an address
space are collected in a Cinquecento <em>name
space</em>.  In addition, name spaces contain
definitions of <em>symbols</em>, which associated names
and C types to locations in an address space.
</p>

<p>
Most Cinquecento programs do not operate directly on
address spaces or name spaces.  Instead, they operate
on a single abstraction, a <em>domain</em>, which is
the projection of the types and symbols of a name space
over the values stored in an address space.  A domain
represents a context in which C expressions can be
evaluated.  The syntax and semantics of the operators
of the C programming language are extended to operate
over domains.  Values yielded by these operators are
called <em>cvalues</em>.  Cvalues are typed values; the
type includes a reference to the domain from which the
cvalue was derived and a reference to a definition of
a <em>ctype</em> corresponding to the C type of the
value.
</p>

<p>
Domains, name spaces, and address spaces are
first-class values in Cinquecento.  A special syntax
form, <span class="id"><a
href="#syn:@names">@names</a></span>, defines new name spaces
using an extended form of C declaration syntax.  Name
spaces and address spaces can also be constructed from
by Cinquecento functions written by the user.
</p>

<h3>A Simple Domain</h3>

<p>
The following is a definition a simple domain, and its
constituent name space and address space, that we will
reference in the following sections.
</p>

<div class="code">
<pre>
/* name space */
ns = @names c32le {
	struct T {
		@0	int id;
		@4	struct T *next;
		@8;	/* sizeof(T) */
	};
	@0	int x;
	@4	int y;
	@0	struct T t;
};

/* address space */
as = mksas(1024);

/* domain */
dom = mkdom(ns, as);
</pre>
</div>

<p>
The usual way to construct a name space is by using
the <span class="id"><a
href="#syn:@names">@names</a></span>
syntactic form.  Every new name space inherits
definitions from a previously defined name space.
Here, <span class="val">c32le</span> is a built-in name
space that defines the base C types as they are
commonly defined on 32-bit little-endian machines
(<em>e.g.</em>, <span class="val">int</span> is four
bytes).  The body of this <span class="id"><a
href="#syn:@names">@names</a></span> expression contains
(ignoring the <span class="val">@</span>
subexpressions) four C declarations, one defining the
type <span class="val">struct T</span>, and three
declaring variables (two <span class="val">int</span>s
and a <span class="val">struct T</span>).
</p>

<p>
The usual way to construct an address space is by calling any one
of a variety of built-in address space constructors.  A
fresh instance of a zero-filled address space is
created by a call to <span class="fnindex"
id="fn:mksas">mksas</span>, a built-in function
typically used to provide fixed amount (here, 1024
bytes) of backing storage for scratch domains that do
not represent external data.  Storage in this address
space begins at address 0 and is contiguous.
</p>

<p>
The built-in function <span class="fnindex"
id="fn:mkdom">mkdom</span> constructs a new domain
value from a pair of name space and address space
values.  Here, <span class="val">ns</span>
and <span class="val">as</span> are Cinquecento
variables bound, respectively, to the previously
defined name space and address space values, and
<span class="val">dom</span> is bound to the resulting domain.
</p>


<h3>C Values</h3>

<p>
Most Cinquecento computations begin with a reference to
a name in a domain.  These are resolved by the
backtick operator.  For example, the Cinquecento
expression
</p>

<div class="code">
dom`x
</div>

<p>
yields a reference to the typed location associated
with the name <span class="val">x</span> in the
domain <span class="val">dom</span>.  This reference is
analogous to an <em>lvalue</em> in C: a reference
through which a stored value may be examined or
modified.
</p>

<p>
The Cinquecento expression 
</p>

<div class="code">
a = dom`x;
</div>

<p>
binds a representation of the referenced value to the
Cinquecento variable <span class="val">a</span>.
Several things happen during the evaluation of this
expression:
</p>

<ol>

<li> The name <span class="val">x</span> is resolved in
the domain <span class="val">dom</span>, determining
the location of <span class="val">x</span>
(<span class="val">@0</span> means byte offset 0) and
the name of its type <span class="val">int</span>;
</li>

<li> Consecutive bytes comprising the value
of <span class="val">x</span> are read from the address
space associated with <span class="val">dom</span>
starting at the location of <span class="val">x</span>.
The definition of <span class="val">int</span> in the
name space of <span class="val">dom</span> determines
the number of bytes (4) and the encoding of the value
(little-endian integer);
</li>

<li> A <em>cvalue</em> is constructed to represent the
accessed value.  Conceptually, this cvalue is a tuple
containing the domain, the type name, and the
interpretation of the value encoded by the bytes;
</li>

<li>The variable <span class="val">a</span> is bound to the cvalue.</li>
</ol>


<p>
Most C operators that compute or compare values, such
as the arithmetic, bitwise, logical, and relational
operators, operate over and yield typed values that
standard descriptions of C call <em>rvalues</em>.
Cinquecento cvalues
are concrete, first-class representations of C rvalues.
</p>

<p>
Cinquecento emulates the behavior of all C operators.
Operations that yield an rvalue in C yield a cvalue in
Cinquecento with equivalent value and type.  Overflow
and underflow semantics on arithmetic are preserved,
the standard promotion and conversion rules are applied
to the operands of operators, and so on.
</p>

<p>
For example, following the evaluation of this sequence
of expressions:
</p>

<div class="code">
<pre>
a = dom`x;
b = dom`y;
c = a+b;
</pre>
</div>

<p>
the variable <span class="val">c</span> is bound to a
new cvalue that represents the same
32-bit <span class="val">int</span> value that would be
computed in a C program modeled
by <span class="val">dom</span>.
</p>

<p>
As another example, in C the result of a relational
operation is an integer rvalue representing the boolean
outcome of the comparison. In Cinquecento the result of
a relational operator is a cvalue of type <span class="val">int</span>
with value <span class="val">0</span> or <span class="val">1</span>.
</p>

<p>
There is an important conceptual difference between C
rvalues and Cinquecento cvalues.  Rvalues are
intangible abstractions for values computed by C
expressions.  An rvalue can be stored in a typed
location in the address space of the program
(<em>i.e.</em>, by assigning it to a declared variable
or a dereferenced pointer), but it cannot be handled
directly.  Cvalues, in contrast, are first-class values
that can be bound to Cinquecento variables.  Like other
values in dynamically typed languages, cvalues carry
their types with them.  Similarly, storage for
Cinquecento cvalues is like storage for ordinary data
in most functional languages: it is unnamed storage
implicitly managed by the Cinquecento implementation.
In particular, cvalues do not occupy storage in a
domain.
</p>

<h3>Pointers</h3>

<p>
Pointers are values that represent typed locations.
Cvalues, in addition to their type, carry a reference
to a domain.  This reference is used to resolve pointer
operations on pointer-typed cvalues to a location in an
address space.  The expression:
</p>

<div class="code">
	p = &dom`x;
</div>

<p>
binds <span class="val">p</span>
to a cvalue that represents the
location associated with
<span class="val">x</span> in <span class="val">dom</span>.
(The
precedence of
<span class="val">`</span>
is higher than that of
<span class="val">&</span>
and most other operators so that domain name references
bind tightly.)  Specifically, this cvalue comprises:
</p>

<ol>
<li> value corresponding to the address of <span class="val">x</span>
      in <span class="val">dom</span>;
</li>      
<li>
the type name <span class="val">int*</span>;
</li>
<li>
a reference to the domain <span class="val">dom</span>.
</li>
</ol>

<p>
The C pointer dereference operator <span class="val">*</span> is defined
in Cinquecento over pointer-typed cvalues.  Precisely
as a C programmer would expect, <span class="val">*</span> accesses the
contents of the location in the associated domain,
using the underlying type of the pointer, as defined by
the domain, to determine the number of bytes to access
and their encoding.  For example, given the above
binding of <span class="val">p</span>, either of the two expressions:
</p>

<div class="code">
	a = *p;		a = dom`x;
</div>

<p>
would bind <span class="val">a</span> to the same cvalue.
</p>

<p>
Pointer arithmetic works as expected.  The following
sequence of expressions:
</p>

<div class="code">
<pre>
p = &dom`x;
p = p+1;
</pre>
</div>

<p>
leaves <span class="val">p</span> bound to a pointer cvalue that
refers to the location following <span class="val">x} in {\tt dom</span>.
In C pointer arithmetic, the amount by which the value
of a pointer is incremented is determined by the size
of the underlying type of the pointer.  In Cinquecento,
this size is determined by the definition of the type
in the domain of the cvalue.
</p>

<p>
Pointers to aggregate types also work as expected.  The
following sequence of expressions:
</p>

<div class="code">
<pre>
p = &dom`t;
p->next = p+1;
</pre>
</div>

<p>
assigns the <span class="val">next</span> field of the <span class="val">struct T</span>
at location <span class="val">t</span> in <span class="val">dom</span> to point to
the beginning of the next logical <span class="val">struct T</span>.
Although there is no symbol corresponding to this
location, we can, as in C, use pointers to impute types
to otherwise untyped locations.
</p>

<p>
The C pointer/array relationship works as expected.
This sequence of expressions has an equivalent effect
to the preceding one:
</p>

<div class="code">
<pre>
p = &dom`t;
p[0].next = p+1;
</pre>
</div>

<p>
The adherence to C pointer semantics extends to
disregard for pointer safety.  The following sequence
of expressions:
</p>

<div class="code">
<pre>
p = &dom`x;
p = p+256;
</pre>
</div>

<p>
binds <span class="val">p</span> to a pointer to a location that
does not exist in the address space of <span class="val">dom</span> (since
we used <span class="val">mkzas</span> to create a fixed 1024-byte address
space).
</p>

<p>
Such pointers, as in C, are harmless until
dereferenced.  An attempt to dereference a pointer to
an unmapped location in Cinquecento raises a top-level
access fault exception that aborts execution of the
current Cinquecento program (but leaves the Cinquecento
system running).  There is no way for a program to
catch this or any other Cinquecento exception: they are
indications to the user that there is a bug in their
Cinquecento program, which they should stop and fix.
(Automated recovery from bugs is for robots and
spacecraft, not debuggers.)  Programs can test, without
risk of raising an exception, whether a span of storage
in a domain is mapped by calling the built-in function
<span class="val">ismapped</span>.
</p>

<p>
Operations on incorrect pointer values in Cinquecento,
unlike such operations in C, never cause corruption to
the runtime of the Cinquecento system.  The
environment, control, and other execution state of the
Cinquecento system are not represented by a domain, and
thus are not addressable data that a Cinquecento
program can mutate.  (For example, you cannot apply the
<span class="val">&</span> operator to a Cinquecento variable in hope of
discovering its address.)  As with other safe
functional language runtimes, misbehavior or failure of
the Cinquecento runtime is an implementation bug, never
a consequence of operating on erroneous user data.
</p>


<h3>Name spaces</h3>

<p>
A name space is a mapping from C type and symbol names
to C type and symbol definitions.  This section
describes the representation of types and symbols used
by name spaces, then describes the organization and
construction of name spaces.
</p>

<p>
Both type names and type definitions are represented by
ctypes.  Type names are the syntactic constructions,
such as <tt>int*</tt>, that can appear in C
declarations or as operands to type operations such as
<tt>sizeof</tt> and explicit casts.  In Cinquecento,
these syntactic constructions are represented by ctype
values.
</p>

<p>
In addition, a ctype can also specify the encoding in
memory of objects of the type that it names.  For base
types, this specification includes the number of bytes
that represent the value and how the bytes are to be
interpreted (e.g., big- or little-endian order).  For
pointer types, it includes the size and representation
of the pointer value memory.  For aggregates, it
includes the offset from the beginning of the aggregate
to each field and the overall size of the aggregate.
</p>

<p>
For example, the type name <tt>int*</tt> always
corresponds to the type pointer-to-<tt>int</tt>, but
there are many possible definitions.  One domain can
define it to be a 64-bit address of a 64-bit integer
encoded in big-endian order, while another may be
define it be a 32-bit address of a 32-bit integer
encoded in little-endian order.  Given a ctype for
<tt>int*</tt>, part of the role of a name space is to
provide a ctype that defines its encoding.
</p>

<p>
A symbol name is represented by a string.  A symbol
definition is represented by a vector of three
elements.  The first element is a ctype representing
the type of the symbol.  The second element is the name
of the symbol as a string.  The third element is a
cvalue representing the <em>offset</em>, in bytes, of
the object named by symbol from the beginning of the
address space in which it is located.  The offset value
may be <span class="val">nil</span>, in which case the
symbol definition can be used only to associate a type
with a name.
</p>

<p>
Conceptually, a name space is an interface consisting
of five functions:
</p>

<ol>
<li><span class="arg">looktype(ctype) -> ctype</span></li>
<li><span class="arg">enumtype() -> table</span></li>
<li><span class="arg">looksym(string) -> symbol</span></li>
<li><span class="arg">enumsym() -> table</span></li>
<li><span class="arg">lookaddr(cval) -> symbol</span></li>
</ol>

<p>
Given a type name (as a ctype), <span
class="arg">looktype</span> returns a ctype representing
the definition of the type.  If the name space does not
define the type, <span class="arg">looktype</span>
returns <span class="val">nil</span>.
</p>

<p>
Given a symbol name, <span class="arg">looksym</span>
returns the corresponding symbol (a vector of three
elements defined above).  If the name space does not
define the symbol, <span class="arg">looksym</span>
returns <span class="val">nil</span>.
</p>

<p>
<span class="arg">Enumtype</span> and <span
class="arg">enumsym</span> each return a table
representing the mapping defined by <span
class="arg">looktype</span> and
<span class="arg">looksym</span>.  For <span
class="arg">enumtype</span> the keys are type names (as
ctypes) and the values are the corresponding definitions
(also as ctypes).  For <span class="arg">enumsym</span>
the keys are symbol names (as strings) and the values
are the corresponding definitions (as vectors).
</p>

<p>
<span class="arg">Lookaddr</span> performs the inverse
of <span class="arg">looksym</span>.  Given an address,
<span class="arg">lookaddr</span> returns the symbol
definition whose offset is the greatest value less than
or equal to the address in the name space.  If more
than one symbol qualifies, an arbitrary one is returned.
</p>

<p>
Given a type name (as a ctype), <span
class="arg">looktype</span> returns a ctype representing
the definition of the type.  If the name space does not
define the type, <span class="arg">looktype</span>
returns <span class="val">nil</span>.
</p>

<p>To construct a new name space, you must supply an
implementation of the name space interface.
Cinquecento provides three mechanisms for doing so.
The <span class="id"><a href="#fn:mkns">mkns</a></span>
function accepts pre-defined functions and returns a
new name space.  The <span class="id"><a
href="#fn:mknsraw">mknsraw</a></span> function accepts
two tables that define the symbols and types in the
namespace.  Finally, the <span class="id"><a
href="#syn:@names">@names</a></span> syntactic form
accepts symbol and type definitions in C declaration
syntax.  Each of these mechanisms also accepts an
optional human-readable name to be associated with
resulting name space; this name is used only for
presentation, and need not be unique.  The remainder of
this section further describes these mechanisms.
</p>

<div class="docitem" id="fn:mkns">
<div class="proto">
<div class="function">
<span class="id">mkns(<span class="arg">looktype</span>,<span class="arg">enumtype</span>,<span class="arg">looksym</span>,<span class="arg">enumsym</span>,<span class="arg">lookaddr</span>[,<span class="arg">name</span>])</span>
</div>
<div class="param">
<span class="arg">looktype</span>, <span class="arg">enumtype</span>, <span class="arg">looksym</span>, <span class="arg">enumsym</span>, <span class="arg">lookaddr</span>: <span class="type">procedure</span>
</div>
<div class="param">
<span class="arg">name</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">name space</span>
</div>
</div>
<div class="desc">
The five function parameters implement the Cinquecento
name space interface.  <span class="id">Mkns</span>
constructs and returns a new name space corresponding
to this implementation.  If specified, <span
class="arg">name</span> is a human-readable name
associated with the name space.
</div>
</div>

<div class="docitem" id="fn:mknsraw">
<div class="proto">
<div class="function">
<span class="id">mknsraw(<span class="arg">parent</span>,<span class="arg">typetab</span>,<span class="arg">symtab</span>[,<span class="arg">name</span>])</span>
</div>
<div class="param">
<span class="arg">parent</span>: <span class="type">namespace</span>
</div>
<div class="param">
<span class="arg">typetab</span>: <span class="type">table</span>
</div>
<div class="param">
<span class="arg">symtab</span>: <span class="type">table</span>
</div>
<div class="param">
<span class="arg">name</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">name space</span>
</div>
</div>
<div class="desc">
<span class="arg">Typetab</span> is a table whose keys
are type names (as ctypes) and whose values are type
definitions (as ctypes).  The type definitions may be
<em>incomplete</em>: types definitions may refer to
type names rather than fully specified types.  As long
as a definition for the referenced type occurs either
elsewhere in <span class="arg">typetab</span> or in the
name space <span class="arg">parent</span>, the type
definition will be implicitly resolved.  If a referenced
type is defined in both <span
class="arg">typetab</span> and <span
class="arg">parent</span>, the <span
class="arg">typetab</span> definition has precedence.
</div>
<div class="desc">
<span class="arg">Symtab</span> is a table whose keys
are symbol names (as strings) and whose values are
symbols (in the 3-element vector form defined above).
As with <span class="arg">typetab</span>, the types
occurring in symbols may be type references.
</div>
<div class="desc">
<span class="id">Mknsraw</span> resolves all type
references, then constructs and returns a new name
space.
If specified, <span
class="arg">name</span> is a human-readable name
associated with the name space.
</div>
</div>

<div class="docitem" id="syn:@names">
<div class="proto">
<div class="syntax">
<span class="id">@names <span class="arg">parent</span> [ $ <span class="arg">name</span> ] {
	<span class="arg">decl</span> ...
};
</span>
</div>
<div class="param">
<span class="arg">parent</span>: <span class="type">name space</span>
</div>
<div class="param">
<span class="arg">name</span>: <span class="type">string</span>
</div>
<div class="param">
<span class="arg">decl</span>: <span class="type">see description</span>
</div>
<div class="returns">
<span class="type">name space</span>
</div>
</div>
<div class="desc">
This syntax constructs a new name space from a sequence
of symbol and type declarations.  The declarations are
written in an extension of the C variable and type
declaration syntax.  If specified,
<span
class="arg">name</span> is a human-readable name
associated with the name space.

</div>
<div class="desc">
There are four forms of declaration: aggregates, symbols,
enums, and typedefs.
</div>

<div class="desc">
The syntax for an aggregate declaration is the same as C
aggregate declaration except that:
<ul>
<li> each field declaration must includes an offset
         expression that specifies the offset of the
          field relative to the beginning of the
          aggregate;</li>
<li> the declaration must end with a final offset
          expression (not associated with any field)
          that specifies the size of the aggregate.</li>
</ul>
The offset expression has two variants: one (<span class="val">@<span class="arg">expr</span></span>)
to specify the offset in <em>bytes</em>, and
one (<span class="val">@@<span class="arg">expr</span></span>)
to specify the offset in <em>
bits</em>.  The bit offset variant must be used to
define fields corresponding to C bitfields.
</div>
<div class="desc">
The syntax for a symbol declaration is the same as C
variable declarations (without initializers) except
that: each symbol declaration may be preceded by an
offset expression that specifies the offset of the
first byte in the address space of the object named by
the symbol.
The offset expression syntax is the same as the byte offset expression
used in aggregate fields.  There is no way to associate a bit offset
with a symbol.
</div>

<div class="desc">
The syntax for enum declarations is the same as their syntax in C,
except that the terms in expressions used to define enumeration values
must be literal values or preceding constant names within the same enumeration.
</div>

<div class="desc">
The syntax for typedef declarations is the same as their syntax in C.
</div>
</div>


<h3>Standard address spaces</h3>

<p>
An address space represents random access,
byte-addressed storage.  Cinquecento provides functions
to construct address spaces whose underlying backing
storage comes from files, strings, or system-provided
memory.
</p>

<p>
Several built-in functions create new address spaces
with specific forms of backing storage.
</p>

<p>
The function <tt>mknas()</tt> returns a null address
space that has no backing storage.  An attempt to read
or write any location in this address space draws an
error.  This address space is used to construct domains
that act solely as sources for types and symbols; for
example, the literal domain is backed by a null address
space.
</p>

<p>
The function <tt>mksas(<em>str</em>)</tt> creates an
address base backed by the string <em>str</em>.  The
memory associated with the string is shared with the
address space, so that an update made to either the
string or the address space will be reflected in the
other.
</p>

<p>
The function <tt>mkzas(<em>len</em>)</tt> creates a
zero-filled address space backed by
<tt><em>len</em></tt> bytes of unshared, cleared
memory supplied by the system.
</p>

<h3>Custom address spaces</h3>

<p>
Cinquecento allows programs to construct an address space
with a custom implementation of the underlying backing
storage.
</p>

<p>A custom implementation requires the program to
define three functions: <tt><em>map</em></tt>,
<tt><em>get</em></tt>, and <tt><em>put</em></tt>.
</p>

<p>
These functions receive and return values of the
Cinquecento type <em>range</em>.  The range type
represents a contiguous span of locations in an address
space.  A range value is constructed by the function
<tt>mkrange(<em>beg</em>,<em>len</em>)</tt>, where
<tt><em>beg</em></tt> is the non-negative start address
of the range and <tt><em>len</em></tt> is the positive
number of bytes in the range; both are cvalues.  Empty
ranges are invalid.  The functions
<tt>rangebeg(<em>range</em>)</tt> and
<tt>rangelen(<em>range</em>)</tt> return the start
address and byte count from a range as cvalues.
</p>

<p>
<tt><em>Map</em></tt> takes no arguments and returns a
description of the <em>mapped ranges</em> of the
address space as a vector of range values.  Each
element of the vector must be a range describing a
maximal contiguous span of locations backed by the
address space.  The vector must be sorted in ascending
order by start address.  The ranges must not overlap.
</p>

<p>
<tt><em>Get</em></tt> takes a range argument and
returns a string.  The string should contain the
contents of storage corresponding to the range.
</p>

<p>
<tt><em>Put</em></tt> takes two arguments, a range and
a string, and returns <tt>nil</tt>.
<tt><em>Put</em></tt> should replace the contents of
storage corresponding to the range with the contents of
the string, ignoring the trailing portion of the string
if it is longer than the range.
</p>

<p>
A call to <tt>fault()</tt> in the dynamic extent of a
call to <tt><em>get</em></tt> or <tt><em>put</em></tt>
will cause a toplevel memory access fault error to be
raised in the context of the call.  Implementations of
<tt><em>get</em></tt> and <tt><em>put</em></tt> are
expected to call <tt>fault</tt> to signal invalid
arguments and related exceptions.
</p>

<p>
The function <tt>mkas(<em>dispatch</em>)</tt>
constructs a custom address space.  Dispatch is a
program-defined variable arity function that
encapsulates the <tt><em>map</em></tt>,
<tt><em>get</em></tt>, and <tt><em>put</em></tt>
functions.  The first argument to dispatch is a string
whose value is the name of the function to be called;
dispatch must apply the corresponding function to the
remaining arguments.
</p>

<p>
Ordinarily the functions represented by
<em>dispatch</em> are implicitly invoked by the
Cinquecento implementation during evaluation of C
expressions that involve storage access operations
(such as dereferencing a pointer).  However, programs
may directly invoked these functions by name using an
overloaded form of the C binary dot operator:
<div class="code">
<pre>
; as.get(mkrange(0,1024));
</pre>
</div>
</p>

<p>
When the left operand of a dot expression is an address
space, the result of the expression is a variable arity
function that, when called, calls the dispatch function
of the address space.  The arguments it passes to
dispatch are, first, the identifier appearing as the
right operand to the dot expression as a string,
followed by the arguments to the call.
</p>

<p>
In addition, if the right operand is the identifier
<tt>dispatch</tt>, then the result of the expression is
simply the dispatch function of the address space,
instead of the curried version described above.
For example, the above call to <tt>get</tt> is equivalent to:
<div class="code">
<pre>
; as.dispatch("get",mkrange(0,1024));
</pre>
</div>
</p>

<p>
As a syntactic convenience, the left operand to the dot
operator can also be a domain, in which case the same
operation is performed on the underlying address space.
</p>

<p>
The address spaces returned by the standard address
space constructors all implement a dispatch function
that can be accessed with the dot operator in the same
way as a custom address space.
</p>

<p>
The dot operator on address spaces will accept any
valid identifier (not just <tt>map</tt>, <tt>get</tt>,
<tt>put</tt>, and <tt>dispatch</tt>), providing a way
for programs to extend the standard address space
interface with additional custom functions.  This
feature can be used, for example, to associate a
function for setting breakpoints with an address space.
</p>

<p>
The Cinquecento address type exists to support the
implementation of operations like setting a breakpoint
on a solitary address.  The function
<tt>mkaddr(<em>val</em>)</tt> constructs an address
value from the cvalue <tt><em>val</em></tt>.  The
function <tt>addrval(<em>addr</em>)</tt> returns the
cvalue used to construct the address
<tt><em>addr</em></tt>.
</p>


<h3>Literal Domain</h3>

<p>
Cinquecento represents arithmetic literals as cvalues
from a special built-in literal domain, named
<span class="val">litdom</span>.
This domain is based on a commonly used model of C
types on 64-bit machines.  Only the size of arithmetic
types matters in this domain; details of representation
such as pointer size and endianness are irrelevant,
because expressions in this domain never reference
memory.
</p>

<h3>Mixed-domain Expressions</h3>

<p>
A binary C operator may be applied to cvalue operands
from two different domains.  Several rules determine
the outcome of such mixed-domain expressions.
The motivation behind these rules is to give sensible
meaning to mixed-domain expressions that yield or
compare arithmetic quantities, but to disallow rarely
sensible mixed-domain combinations of pointer values.
</p>

<p>
The first rule concerns expressions with literal terms,
such as
<span class="val">(dom`x+5)</span>.
When evaluating a mixed-domain
expression, the Cinquecento evaluator first checks
whether one of the operands is from the literal domain.
If so, it implicitly converts the domain of the literal
operand to the domain of the other operand.  In
essence, the non-literal operand absorbs the literal
operand into its domain.  Undesired truncation of high
bits can be avoided by explicitly casting the literal
operand to a large type or by employing suffix syntax
when expressing the literal (e.g., 
<span class="val">0x100000000ULL</span>).
</p>

<p>
The second rule concerns mixed-domain arithmetic,
bitwise, and relational operations on non-literal
operands that are not pointers.  Such operands are both
converted to the literal domain.  This rule allows
comparison or aggregation of arithmetic values from
different domains to be expressed naturally without the
clutter of explicit domain conversions.
</p>

<p>
The third rule concerns mixed expressions in which one
operand is a pointer.  Pointer addition operations
(including array subscripting) comprise one pointer
operand and one arithmetic operand.  In mixed-domain
pointer addition, the domain of the arithmetic operand
is implicitly cast to that of the pointer operand.
Since the type of the result is pointer, the domain of
the result should remain in the domain of the pointer
operand.  (This rule also maintains consistency with
the rule for literals.)  Pointer subtraction operations
involve either one pointer operand and one arithmetic
operand or two pointer operands.  In the former case,
the rule is the same as that for pointer addition.  The
latter case is disallowed: it makes no sense to relate
locations in two different address spaces.  A program
that wishes to do so must explicitly domain cast one of
the operands.
</p>

<p>
The final rule is that all other mixed-domain
expressions are disallowed.  Generally this rule covers
the other mixed-domain pointer expressions.  For
example, comparison of pointers from different domains
is prohibited for the same reason that pointer
subtraction is prohibited.  An explicit domain cast can
be used to circumvent this rule.
</p>



<h3>Ctypes</h3>

<p>The Cinquecento type <em>ctype</em> represents types
defined in C programs.  The predicate
<span class="id" id="fn:isctype">isctype</span> tests whether a value is
a ctype.
The <span class="fnindex"><a href="#syn:typeof">typeof</a></span>
operator can be used to obtain a ctype representing the
type of a cvalue or the type denoted by a type name.
</p>

<div class="docitem" id="syn:typeof">
<div class="proto">
<div class="function">
<span class="id">typeof(<span class="arg">typename</span>)</span>
</div>
<div class="function">
<span class="id">typeof(<span class="arg">value</span>)</span>
</div>
<div class="param">
<span class="arg">typename</span>: <span class="type">type name expression</span>
</div>
<div class="param">
<span class="arg">value</span>: <span class="type">cvalue expression</span>
</div>
<div class="returns">
<span class="type">ctype</span>
</div>
</div>
<div class="desc">
The <span class="id">typeof</span> operator is similar
to the <span class="id">sizeof</span> operator in that
it is applied to either a type name or to an expression
that yields a cvalue.  In both cases it returns a ctype
value that represents the type of its operand.  In the
type name case, if the operand is a fully qualified
type name, then the type name is resolved in the domain
referenced by the type name; otherwise, the type name
is resolved in the literal domain.
</div>
</div>

<p>
In Cinquecento, the set of types that can be defined in
a C program are divided into several categories.  The
main categories are: the <tt>void</tt> type, the base
arithmetic types (<tt>char</tt>, <tt>int</tt>,
<tt>unsigned long</tt>, <em>etc</em>), pointers,
arrays, aggregates (<tt>struct</tt> and
<tt>union</tt>), functions, enumerations, and
<tt>typedef</tt>s.  In addition, Cinquecento also has
separate categories for bitfields, enumeration
constants, undefined types, and a special extended
accessor type.
</p>

<p>
The following table summarizes the category-specific
functions that manipulate ctypes.  The predicates
determine to which category a ctype belongs.  Each
predicate takes one argument, a ctype, and returns
<span class="val">1</span> if the predicate is true for
that ctype, <span class="val">0</span> otherwise.  With
the exception
of <span class="id">issu</span>, <span class="id">isstruct</span>,
and <span class="id">isunion</span>, the predicates are
mutually exclusive; <span class="id">issu</span>
returns true if its argument is structure or union
aggregate, <span class="id">isstruct</span> returns
true if its argument is a structure,
and <span class="id">isunion</span> returns true if its
argument is a union.  The accessors return attributes
of a ctype instance in each category; the constructors
construct new instances of each category.  Descriptions of
the accessors and constructors follow the table.
</p>

<div id="table">
<table>

<tr>
<th>Type category</th>
<th>Predicate</th>
<th>Accessors</th>
<th>Constructors</th>
</tr>

<tr>
<td>
Aggregate
</td>
<td>
<span class="fnindex" id="fn:isstruct">isstruct</span><br />
<span class="fnindex" id="fn:issu">issu</span><br />
<span class="fnindex" id="fn:isunion">isunion</span>
</td>
<td>
<span class="fnindex"><a href="#fn:fields">fields</a></span><br />
<span class="fnindex"><a href="#fn:suetag">suetag</a></span><br />
<span class="fnindex"><a href="#fn:susize">susize</a></span>
</td>
<td>
<span class="fnindex"><a href="#fn:mkctype_struct">mkctype_struct</a></span><br />
<span class="fnindex"><a href="#fn:mkctype_union">mkctype_union</a></span>
</td>
</tr>

<tr>
<td>
Array
</td>
<td><span class="fnindex" id="fn:isarray">isarray</span></td>
<td>
<span class="fnindex"><a href="#fn:arraynelm">arraynelm</a></span><br />
<span class="fnindex"><a href="#fn:subtype">subtype</a></span><br />
</td>
<td>
<span class="fnindex"><a href="#fn:mkctype_array">mkctype_array</a></span>
</td>
</tr>

<tr>
<td>
Base C type
</td>
<td><span class="fnindex" id="fn:isbase">isbase</span></td>
<td>
<span class="fnindex">baseid</span>
</td>
<td>
<span class="fnindex"><a href="#fn:mkctype_char">mkctype_char</a></span><br />
<span class="fnindex"><a href="#fn:mkctype_short">mkctype_short</a></span><br />
<span class="fnindex"><a href="#fn:mkctype_int">mkctype_int</a></span><br />
<span class="fnindex"><a href="#fn:mkctype_long">mkctype_long</a></span><br />
<span class="fnindex"><a href="#fn:mkctype_vlong">mkctype_vlong</a></span><br />
<span class="fnindex"><a href="#fn:mkctype_uchar">mkctype_uchar</a></span><br />
<span class="fnindex"><a href="#fn:mkctype_ushort">mkctype_ushort</a></span><br />
<span class="fnindex"><a href="#fn:mkctype_uint">mkctype_uint</a></span><br />
<span class="fnindex"><a href="#fn:mkctype_ulong">mkctype_ulong</a></span><br />
<span class="fnindex"><a href="#fn:mkctype_uvlong">mkctype_uvlong</a></span><br />
<span class="fnindex"><a href="#fn:mkctype_float">mkctype_float</a></span><br />
<span class="fnindex"><a href="#fn:mkctype_double">mkctype_double</a></span><br />
<span class="fnindex"><a href="#fn:mkctype_ldouble">mkctype_ldouble</a></span>
</td>
</tr>

<tr>
<td>
Bitfield
</td>
<td><span class="fnindex" id="fn:isbitfield">isbitfield</span></td>
<td>
<span class="fnindex"><a href="#fn:bitfieldcontainer"><a href="#fn:bitfieldcontainer">bitfieldcontainer</a></a></span><br />
<span class="fnindex"><a href="#fn:bitfieldpos"><a href="#fn:bitfieldpos">bitfieldpos</a></a></span><br />
<span class="fnindex"><a href="#fn:bitfieldwidth"><a href="#fn:bitfieldwidth">bitfieldwidth</a></a></span><br />
</td>
<td>
<span class="fnindex"><a href="#fn:mkctype_bitfield"><a href="#fn:mkctype">mkctype</a>_bitfield</a></span>
</td>
</tr>

<tr>
<td>
Enumeration
</td>
<td><span class="fnindex" id="fn:isenum">isenum</span></td>
<td>
<span class="fnindex"><a href="#fn:enumconsts"><a href="#fn:enumconsts">enumconsts</a></a></span><br />
<span class="fnindex"><a href="#fn:suetag"><a href="#fn:suetag">suetag</a></a></span><br />
<span class="fnindex"><a href="#fn:subtype"><a href="#fn:subtype">subtype</a></a></span>
</td>
<td>
<span class="fnindex"><a href="#fn:mkctype_enum"><a href="#fn:mkctype_enum">mkctype_enum</a></a></span><br />
</td>
</tr>

<tr>
<td>
Enumeration constant
</td>
<td><span class="fnindex" id="fn:isenumconst">isenumconst</span></td>
<td>
<span class="fnindex"><a href="#fn:subtype">subtype</a></span>
</td>
<td>
<span class="fnindex"><a href="#fn:mkctype_const">mkctype_const</a></span>
</td>
</tr>

<tr>
<td>
Extended accessor
</td>
<td><span class="fnindex" id="fn:isxaccess">isxaccess</span></td>
<td>
<span class="fnindex"><a href="#fn:subtype">subtype</a></span><br />
<span class="fnindex"><a href="#fn:xaccessget">xaccessget</a></span><br />
<span class="fnindex"><a href="#fn:xaccessput">xaccessput</a></span>
</td>
<td>
<span class="fnindex"><a href="#fn:mkctype_xaccess">mkctype_xaccess</a></span>
</td>
</tr>


<tr>
<td>
Function
</td>
<td><span class="fnindex" id="fn:isfunc">isfunc</span></td>
<td>
<span class="fnindex"><a href="#fn:params">params</a></span><br />
<span class="fnindex"><a href="#fn:rettype">rettype</a></span>
</td>
<td>
<span class="fnindex"><a href="#fn:mkctype_fn">mkctype_fn</a></span>
</td>
</tr>

<tr>
<td>
Pointer
</td>
<td><span class="fnindex" id="fn:isptr">isptr</span></td>
<td>
<span class="fnindex"><a href="#fn:subtype">subtype</a></span>
</td>
<td>
<span class="fnindex"><a href="#fn:mkctype_ptr">mkctype_ptr</a></span>
</td>
</tr>

<tr>
<td>
Typedef
</td>
<td><span class="fnindex" id="fn:istypedef">istypedef</span></td>
<td>
<span class="fnindex"><a href="#fn:typedefid">typedefid</a></span><br />
<span class="fnindex"><a href="#fn:typedeftype">typedeftype</a></span>
</td>
<td>
<span class="fnindex"><a href="#fn:mkctype_typedef">mkctype_typedef</a></span>
</td>
</tr>

<tr>
<td>
Undefined
</td>
<td><span class="fnindex" id="fn:isundeftype">isundeftype</span></td>
<td>
<span class="fnindex"><a href="#fn:subtype">subtype</a></span>
</td>
<td>
<em>n/a</em>
</td>
</tr>

<tr>
<td>
Void
</td>
<td><span class="fnindex" id="fn:isvoid">isvoid</span></td>
<td>
<em>n/a</em>
</td>
<td>
<span class="fnindex"><a href="#fn:mkctype_void">mkctype_void</a></span>
</td>
</tr>

</table>
</div>

<p>
The following functions are the ctype accessors.
</p>

<div class="docitem" id="fn:subtype">
<div class="proto">
<div class="function">
<span class="id">subtype(<span class="arg">type</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">ctype</span>
</div>
<div class="returns">
<span class="type">ctype or nil</span>
</div>
</div>
<div class="desc">
The ctype categories array, enumeration, enumeration
constant, pointer, undefined, and extended accessor each modify another,
subordinate ctype.  Given a ctype from any one of these
categories, <span class="id">subtype</span> returns the
subordinate ctype, or <span class="val">nil</span> if
the ctype does not define its subordinate.
</div>
</div>

<div class="docitem" id="fn:fields">
<div class="proto">
<div class="function">
<span class="id">fields(<span class="arg">type</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">aggregate ctype</span>
</div>
<div class="returns">
<span class="type">vector</span>
</div>
</div>
<div class="desc">
Returns a vector containing the
definitions of the fields in the aggregate <span
class="arg">type</span>.  Each item in the vector defines a field 
that can be examined with the functions
<span class="fnindex"><a
href="#fn:fieldid">fieldid</a></span>, <span
class="fnindex"><a
href="#fn:fieldoff">fieldoff</a></span>, and <span
class="fnindex"><a
href="#fn:fieldtype">fieldtype</a></span>.
Modifying the vector may cause undefined effects.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:fieldid">fieldid(<span class="arg">field</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:fieldoff">fieldoff(<span class="arg">field</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:fieldtype">fieldtype(<span class="arg">field</span>)</span>
</div>
<div class="param">
<span class="arg">field</span>: <span class="type">item in the vector returned by <span
class="fnindex"><a
href="#fn:fields">fields</a></span></span>
</div>
<div class="returns">
<span class="type">see description</span>
</div>
</div>
<div class="desc">
These functions examine an aggregate field definition returned by <span
class="fnindex"><a href="#fn:fields">fields</a></span>.  <span
class="id">Fieldid</span> returns the name of the field
as a string.  <span class="id">Fieldoff</span> returns
the offset in bytes of the field from the start of the
aggregate as a cvalue, or <span class="val">nil</span>
if the offset is undefined.  <span
class="id">Fieldtype</span> returns the type of the
field as a ctype.
</div>
</div>

<div class="docitem" id="fn:suetag">
<div class="proto">
<div class="function">
<span class="id">suetag(<span class="arg">type</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">aggregate or enumeration ctype</span>
</div>
<div class="returns">
<span class="type">string or nil</span>
</div>
</div>
<div class="desc">
Returns the tag of the aggregate or enumeration
ctype <span class="arg">type</span> as a string.
Returns <span class="val">nil</span>
if <span class="arg">type</span> does not define a tag
(<em>i.e.</em>, if <span class="arg">type</span> is an
anonymous aggregate or enumeration).
</div>
</div>

<div class="docitem" id="fn:susize">
<div class="proto">
<div class="function">
<span class="id">susize(<span class="arg">type</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">aggregate ctype</span>
</div>
<div class="returns">
<span class="type">cvalue or nil</span>
</div>
</div>
<div class="desc">
Returns the size in bytes of the aggregate
ctype <span class="arg">type</span> as a cvalue.
Returns <span class="val">nil</span>
if <span class="arg">type</span> does not define its size.
</div>
</div>

<div class="docitem" id="fn:arraynelm">
<div class="proto">
<div class="function">
<span class="id">arraynelm(<span class="arg">type</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">array ctype</span>
</div>
<div class="returns">
<span class="type">cvalue or nil</span>
</div>
</div>
<div class="desc">
Returns the number of elements in the array type <span
class="arg">type</span>.  Returns <span class="val">nil</span> if the type does not define the number of elements.
</div>
</div>

<div class="docitem" id="fn:baseid">
<div class="proto">
<div class="function">
<span class="id">baseid(<span class="arg">type</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">base ctype</span>
</div>
<div class="returns">
<span class="type">string</span>
</div>
</div>
<div class="desc">
Returns the name of the base C type represented
by <span class="arg">type</span> as a string.
</div>
</div>

<div class="docitem" id="fn:bitfieldcontainer">
<div class="proto">
<div class="function">
<span class="id">bitfieldcontainer(<span class="arg">type</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">bitfield ctype</span>
</div>
<div class="returns">
<span class="type">string</span>
</div>
</div>
<div class="desc">
Returns the ctype in which the bitfield type
represented by <span class="arg">type</span> is contained.
</div>
</div>

<div class="docitem" id="fn:bitfieldpos">
<div class="proto">
<div class="function">
<span class="id">bitfieldpos(<span class="arg">type</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">bitfield ctype</span>
</div>
<div class="returns">
<span class="type">cvalue</span>
</div>
</div>
<div class="desc">
Returns the bit offset within its container of the
first bit of the bitfield type represented by
<span class="arg">type</span>.
</div>
</div>

<div class="docitem" id="fn:bitfieldwidth">
<div class="proto">
<div class="function">
<span class="id">bitfieldwidth(<span class="arg">type</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">bitfield ctype</span>
</div>
<div class="returns">
<span class="type">cvalue</span>
</div>
</div>
<div class="desc">
Returns the width of the bitfield type represented
by <span class="arg">type</span>.
</div>
</div>

<div class="docitem" id="fn:enumconsts">
<div class="proto">
<div class="function">
<span class="id">enumconsts(<span class="arg">type</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">enumeration ctype</span>
</div>
<div class="returns">
<span class="type">vector</span>
</div>
</div>
<div class="desc">
Returns a vector containing the definitions of the
constants in the enumeration
type <span class="arg">type</span>.  Each item in the
vector is a two-element vector that defines one
constant.  The first element is the name of the
constant as a string, the second is the value of
constant as a cvalue.
</div>
</div>

<div class="docitem" id="fn:params">
<div class="proto">
<div class="function">
<span class="id">params(<span class="arg">type</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">function ctype</span>
</div>
<div class="returns">
<span class="type">vector</span>
</div>
</div>
<div class="desc">
Returns a vector containing the
definitions of the parameters in the function type represented by <span
class="arg">type</span>.  Each item in the vector defines a parameter
that can be examined with the functions
<span class="fnindex"><a
href="#fn:paramid">paramid</a></span> and <span
class="fnindex"><a
href="#fn:paramtype">paramtype</a></span>.
The parameters occur in the vector in the order they are 
declared in the function type represented by <span
class="arg">type</span>.
Modifying the vector may cause undefined effects.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:paramid">paramid(<span class="arg">param</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:paramtype">paramtype(<span class="arg">param</span>)</span>
</div>
<div class="param">
<span class="arg">param</span>: <span class="type">item in the vector returned by <span
class="fnindex"><a
href="#fn:fieldtype">params</a></span></span>
</div>
<div class="returns">
<span class="type">see description</span>
</div>
</div>
<div class="desc">
These functions examine a parameter definition returned by <span
class="fnindex"><a href="#fn:params">params</a></span>.  <span
class="id">Paramid</span> returns the name of the parameter
as a string.  <span
class="id">Paramtype</span> returns the type of the
parameter as a ctype.
</div>
</div>

<div class="docitem" id="fn:rettype">
<div class="proto">
<div class="function">
<span class="id">rettype(<span class="arg">type</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">function ctype</span>
</div>
<div class="returns">
<span class="type">ctype</span>
</div>
</div>
<div class="desc">
Returns the return type of the function type represented by
<span class="arg">type</span>.
</div>
</div>


<div class="docitem" id="fn:typedefid">
<div class="proto">
<div class="function">
<span class="id">typedefid(<span class="arg">type</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">typedef ctype</span>
</div>
<div class="returns">
<span class="type">string</span>
</div>
</div>
<div class="desc">
Returns the name of the type defined by the typedef type represented by
<span class="arg">type</span> as a string.
</div>
</div>

<div class="docitem" id="fn:typedeftype">
<div class="proto">
<div class="function">
<span class="id">typedeftype(<span class="arg">type</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">typedef ctype</span>
</div>
<div class="returns">
<span class="type">ctype</span>
</div>
</div>
<div class="desc">
Returns the type aliased defined by the typedef type represented by
<span class="arg">type</span> as a ctype.
</div>
</div>

<div class="docitem" id="fn:xaccessget">
<div class="proto">
<div class="function">
<span class="id">xaccessget(<span class="arg">type</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">extended accessor ctype</span>
</div>
<div class="returns">
<span class="type">procedure</span>
</div>
</div>
<div class="desc">
Returns the get procedure of the extended accessor ctype
<span class="arg">type</span>.
</div>
</div>

<div class="docitem" id="fn:xaccessput">
<div class="proto">
<div class="function">
<span class="id">xaccessput(<span class="arg">type</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">extended accessor ctype</span>
</div>
<div class="returns">
<span class="type">procedure</span>
</div>
</div>
<div class="desc">
Returns the put procedure of the extended accessor ctype
<span class="arg">type</span>.
</div>
</div>

<p>
The following functions are the ctype constructors.
</p>

<div class="docitem">
<div class="proto">

<div class="function">
<span class="id" id="fn:mkctype_struct">mkctype_struct(<span class="arg">tag</span>[,<span class="arg">fields</span>,<span class="arg">size</span>])</span>
</div>

<div class="function">
<span class="id" id="fn:mkctype_union">mkctype_union(<span class="arg">tag</span>[,<span class="arg">fields</span>,<span class="arg">size</span>])</span>
</div>

<div class="param">
<span class="arg">tag</span>: <span class="type">string</span>
</div>
<div class="param">
<span class="arg">fields</span>: <span class="type">vector</span>
</div>
<div class="param">
<span class="arg">size</span>: <span class="type">size</span>
</div>
<div class="returns">
<span class="type">ctype</span>
</div>
</div>
<div class="desc">
Returns a new ctype representing a struct or union
aggregate type.
<span class="arg">Tag</span> is the type tag.  If
specified, <span class="arg">fields</span> is a vector
defining the fields of the aggregate, each element of
which is constructed
by <span class="fnindex"><a href="#fn:mkfield">mkfield</a></span>,
and <span class="arg">size</span> is the size in bytes
of the aggregate.
</div>
</div>

<div class="docitem" id="fn:mkfield">
<div class="proto">
<div class="function">
<span class="id">mkfield(<span class="arg">type</span>,<span class="arg">id</span>[,<span class="arg">off</span>])</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">ctype</span>
</div>
<div class="param">
<span class="arg">id</span>: <span class="type">string</span>
</div>
<div class="param">
<span class="arg">off</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">vector</span>
</div>
</div>
<div class="desc">

Returns a new field definition that is a suitable
element of the <span class="arg">fields</span>
argument
of <span class="fnindex"><a href="#fn:mkctype_struct">mkctype_struct</a></span>
or <span class="fnindex"><a href="#fn:mkctype_union">mkctype_union</a></span>.
<span class="arg">Type</span> is the type of the field,
<span class="arg">id</span> is the name of the field, and
<span class="arg">off</span>, if specified, is the offset in bytes of the field from the beginning of the aggregate.
</div>
</div>


<div class="docitem" id="fn:mkctype_array">
<div class="proto">
<div class="function">
<span class="id">mkctype_array(<span class="arg">type</span>[,<span class="arg">nelm</span>])</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">typedef ctype</span>
</div>
<div class="param">
<span class="arg">nelm</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">ctype</span>
</div>
</div>
<div class="desc">
Returns a new ctype representing an array of 
represented by <span class="arg">type</span>.
<span class="arg">Nelm</span>, if specified, is the number of elements
in arrays represented by the type.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:mkctype_char">mkctype_char()</span>
</div>
<div class="function">
<span class="id" id="fn:mkctype_short">mkctype_short()</span>
</div>
<div class="function">
<span class="id" id="fn:mkctype_int">mkctype_int()</span>
</div>
<div class="function">
<span class="id" id="fn:mkctype_long">mkctype_long()</span>
</div>
<div class="function">
<span class="id" id="fn:mkctype_vlong">mkctype_vlong()</span>
</div>
<div class="function">
<span class="id" id="fn:mkctype_uchar">mkctype_uchar()</span>
</div>
<div class="function">
<span class="id" id="fn:mkctype_ushort">mkctype_ushort()</span>
</div>
<div class="function">
<span class="id" id="fn:mkctype_uint">mkctype_uint()</span>
</div>
<div class="function">
<span class="id" id="fn:mkctype_ulong">mkctype_ulong()</span>
</div>
<div class="function">
<span class="id" id="fn:mkctype_uvlong">mkctype_uvlong()</span>
</div>
<div class="function">
<span class="id" id="fn:mkctype_float">mkctype_float()</span>
</div>
<div class="function">
<span class="id" id="fn:mkctype_double">mkctype_double()</span>
</div>
<div class="function">
<span class="id" id="fn:mkctype_longdouble">mkctype_longdouble()</span>
</div>
<div class="returns">
<span class="type">ctype</span>
</div>
</div>
<div class="desc">
Returns a new ctype representing the base C type corresponding
to the suffix of the constructor name.
</div>
</div>

<div class="docitem" id="fn:mkctype_bitfield">
<div class="proto">
<div class="function">
<span class="id">mkctype_bitfield(<span class="arg">type</span>,<span class="arg">width</span>,<span class="arg">pos</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">ctype</span>
</div>
<div class="param">
<span class="arg">width</span>: <span class="type">cvalue</span>
</div>
<div class="param">
<span class="arg">pos</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">ctype</span>
</div>
</div>
<div class="desc">
Returns a new ctype representing a bitfield type.  The
constructed bitfield type
has <span class="arg">width</span> bits, is contained in a
field of the type represented
by <span class="arg">type</span>, and starts at bit
offset <span class="arg">pos</span> in the containing type.
</div>
</div>

<div class="docitem" id="fn:mkctype_enum">
<div class="proto">
<div class="function">
<span class="id">mkctype_enum(<span class="arg">tag</span>[,<span class="arg">consts</span>[,<span class="arg">type</span>]])</span>
</div>
<div class="param">
<span class="arg">tag</span>: <span class="type">string</span>
</div>
<div class="param">
<span class="arg">consts</span>: <span class="type">vector</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">ctype</span>
</div>
<div class="returns">
<span class="type">ctype</span>
</div>
</div>
<div class="desc">
Returns a new ctype representing an enumeration type.  
<span class="arg">Tag</span> is the type tag.  
If specified, <span class="arg">consts</span> is a vector defining
the constants of the enumeration type.  Each element of 
<span class="arg">consts</span> is a two-element vector.
The first element is the name of the
constant as a string, the second is the value of
constant as a cvalue.  <span class="arg">Type</span>, if specified, is the
underlying (subordinate) type of the enumeration.
</div>
</div>

<div class="docitem" id="fn:mkctype_const">
<div class="proto">
<div class="function">
<span class="id">mkctype_const(<span class="arg">type</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">ctype</span>
</div>
<div class="returns">
<span class="type">ctype</span>
</div>
</div>
<div class="desc">
Returns a new ctype representing the type of an enumeration constant.
<span class="arg">Type</span> is the underlying (subordinate)
enumeration type of the constant.
</div>
</div>

<div class="docitem" id="fn:mkctype_fn">
<div class="proto">
<div class="function">
<span class="id">mkctype_fn(<span class="arg">rettype</span>,<span class="arg">params</span>)</span>
</div>
<div class="param">
<span class="arg">rettype</span>: <span class="type">ctype</span>
</div>
<div class="param">
<span class="arg">params</span>: <span class="type">vector</span>
</div>
<div class="returns">
<span class="type">ctype</span>
</div>
</div>
<div class="desc">
Returns a new ctype representing a function type.
<span class="arg">Type</span> is the return type of the function.
<span class="arg">Params</span> is a vector
defining the parameters of the function, each element of which
is constructed
by <span class="fnindex"><a href="#fn:mkparam">mkparam</a></span>.
</div>
</div>

<div class="docitem" id="fn:mkparam">
<div class="proto">
<div class="function">
<span class="id">mkparam(<span class="arg">type</span>[,<span class="arg">id</span>])</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">ctype</span>
</div>
<div class="param">
<span class="arg">id</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">vector</span>
</div>
</div>
<div class="desc">
Returns a new parameter definition that is a suitable
element of the <span class="arg">params</span>
argument
of <span class="fnindex"><a href="#fn:mkctype_fn">mkctype_fn</a></span>.
<span class="arg">Type</span> is the type of the parameter and
<span class="arg">id</span>, if specified, is the name of the parameter.
</div>
</div>

<div class="docitem" id="fn:mkctype_ptr">
<div class="proto">
<div class="function">
<span class="id">mkctype_ptr(<span class="arg">type</span>[,<span class="arg">reptype</span>])</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">ctype</span>
</div>
<div class="param">
<span class="arg">reptype</span>: <span class="type">ctype</span>
</div>
<div class="returns">
<span class="type">ctype</span>
</div>
</div>
<div class="desc">
Returns a new ctype representing a pointer to the type represented by
<span class="arg">type</span>.  If
specified, <span class="arg">reptype</span> is a ctype
representing the pointer representation type.
</div>
</div>

<div class="docitem" id="fn:mkctype_typedef">
<div class="proto">
<div class="function">
<span class="id">mkctype_typedef(<span class="arg">id</span>[,<span class="arg">type</span>])</span>
</div>
<div class="param">
<span class="arg">id</span>: <span class="type">string</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">ctype</span>
</div>
<div class="returns">
<span class="type">ctype</span>
</div>
</div>
<div class="desc">
Returns a new ctype representing a typedef.  
<span class="arg">Id</span> is the name of typedef.
If specified, <span class="arg">type</span> is a ctype representing
the aliased type.
</div>
</div>

<div class="docitem" id="fn:mkctype_void">
<div class="proto">
<div class="function">
<span class="id">mkctype_void()</span>
</div>
<div class="returns">
<span class="type">ctype</span>
</div>
</div>
<div class="desc">
Returns a new ctype representing the void type.
</div>
</div>

<div class="docitem" id="fn:mkctype_xaccess">
<div class="proto">
<div class="function">
<span class="id">mkctype_xaccess(<span class="arg">type</span>,<span class="arg">get</span>,<span class="arg">put</span>)</span>
</div>
<div class="param">
<span class="arg">type</span>: <span class="type">ctype</span>
</div>
<div class="param">
<span class="arg">get</span>: <span class="type">procedure</span>
</div>
<div class="param">
<span class="arg">put</span>: <span class="type">procedure</span>
</div>
<div class="returns">
<span class="type">ctype</span>
</div>
</div>
<div class="desc">
Returns a new ctype representing a type whose values
are accessed through calls to custom accessor
functions, rather than through calls to the address
space interface.  The ctype <span
class="arg">type</span> is the underlying (subordinate)
type of the value.  When the system dereferences a
pointer to a value of the type, it calls <span
class="arg">get</span>, passing the domain of the
pointer cvalue.  <span class="arg">Get</span> returns a
cvalue, which the system casts to <span
class="arg">type</span>.
</div>
<div class="desc">
Similarly, when the system assigns through a pointer to
a value of the type, it calls <span
class="arg">put</span> on the domain of the pointer and
the new value to be written.  The new value is cast to
<span class="arg">type</span> before the call.  The
return value is ignored.
</div>
</div>


<h3>Containers</h3>

<p>
Cinquecento supports three built-in container types:
lists, vectors, and tables.
</p>

<p>
Several functions operate on any type of container.
</p>

<div class="docitem" id="fn:length">
<div class="proto">
<div class="function">
<span class="id">length(<span class="arg">container</span>)</span>
</div>
<div class="param">
<span class="arg">container</span>: <span class="type">list</span>, <span class="type">vector</span>, or <span class="type">table</span>
</div>
<div class="returns">
<span class="type">cvalue</span>
</div>
</div>
<div class="desc">
Returns the number of items stored in 
<span class="arg">container</span>.
</div>
</div>

<div class="docitem" id="fn:copy">
<div class="proto">
<div class="function">
<span class="id">copy(<span class="arg">container</span>)</span>
</div>
<div class="param">
<span class="arg">container</span>: <span class="type">list</span>, <span class="type">vector</span>, or <span class="type">table</span>
</div>
<div class="returns">
<span class="type">whatever container is</span>
</div>
</div>
<div class="desc">
Returns a shallow copy of <span class="arg">container</span>.
</div>
</div>

<div class="docitem" id="fn:foreach">
<div class="proto">
<div class="function">
<span class="id">foreach(<span class="arg">fn</span>,<span class="arg">container</span>)</span>
</div>
<div class="param">
<span class="arg">fn</span>: <span class="type">procedure</span>
</div>
<div class="param">
<span class="arg">container</span>: <span class="type">list</span>, <span class="type">vector</span>, or <span class="type">table</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">

Calls <span class="arg">fn</span> on each item in <span
class="arg">container</span>.  For lists and vectors,
<span class="id">foreach</span> visits each item in
sequential order, calling <span class="arg">fn</span>
with the item as the sole argument.  For tables, <span
class="id">foreach</span> visits each key/value pair in
unspecified order, calling <span class="arg">fn</span>
with the key and value, in that order, as separate
arguments.  </div> </div>

<div class="docitem" id="fn:sort">
<div class="proto">
<div class="function">
<span class="id">sort(<span class="arg">container</span>,<span class="arg">cmp</span>,)</span>
</div>
<div class="param">
<span class="arg">container</span>: <span class="type">list or vector</span>
</div>
<div class="param">
<span class="arg">cmp</span>: <span class="type">procedure</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Sorts the elements of <span
class="arg">container</span>, using <span
class="arg">cmp</span> to compare elements.  <span
class="arg">Cmp</span> accepts two arguments, each an
element of <span class="arg">container</span>, and
returns: a negative cvalue if the first argument
compares less than the second; a positive cvalue if the
first argument compares greater than the second; or
zero if they are equal.
</div>
</div>

<div class="docitem" id="fn:bsearch">
<div class="proto">
<div class="function">
<span class="id">bsearch(<span class="arg">key</span>,<span class="arg">container</span>,<span class="arg">cmp</span>,)</span>
</div>
<div class="param">
<span class="arg">key</span>: <span class="type">any value</span>
</div>
<div class="param">
<span class="arg">container</span>: <span class="type">list or vector</span>
</div>
<div class="param">
<span class="arg">cmp</span>: <span class="type">procedure</span>
</div>
<div class="returns">
<span class="type">element of container or nil</span>
</div>
</div>
<div class="desc">
Searches the elements of <span
class="arg">container</span> for one matching <span class="arg">key</span>.
The elements of the container must be sorted in ascending order
according to the comparison function <span class="arg">cmp</span>.
<span
class="arg">Cmp</span> accepts two arguments, first (always) <span class="arg">key</span> and second an
element of <span class="arg">container</span>, and
returns: a negative cvalue if the first argument
compares less than the second; a positive cvalue if the
first argument compares greater than the second; or
zero if they are equal.
</div>
</div>


<h3>Lists</h3>

<p>
Lists are variable-length ordered collections, possibly
empty.  Lists are mutable, allowing items to be added
or deleted from any position, and contiguously indexed
from position 0.  The predicate
<span class="id" id="fn:islist">islist</span> tests whether a value is
a list.
</p>

<div class="docitem" id="fn:list">
<div class="proto">
<div class="function">
<span class="id">list(<span class="arg">value</span>, ...)</span>
</div>
<div class="param">
<span class="arg">value</span>: <span class="type">any type</span>
</div>
<div class="returns">
<span class="type">list</span>
</div>
</div>
<div class="desc">
Constructs a new list containing the zero or more values passed as arguments.
The values are stored in argument order.
</div>
</div>

<div class="docitem" id="fn:mklist">
<div class="proto">
<div class="function">
<span class="id">mklist(<span class="arg">len</span>[,<span class="arg">val</span>])</span>
</div>
<div class="param">
<span class="arg">len</span>: <span class="type">cvalue</span>
</div>
<div class="param">
<span class="arg">val</span>: <span class="type">any value</span>
</div>
<div class="returns">
<span class="type">list</span>
</div>
</div>
<div class="desc">
Constructs a new list of size <span class="arg">len</span>.
Each element is initialized to <span class="arg">val</span>, if specified,
otherwise to <span class="val">nil</span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="syntax">
<span class="id">[ <span class="arg">value</span>, ... ]</span>
</div>
<div class="param">
<span class="arg">value</span>: <span class="type">any type</span>
</div>
<div class="returns">
<span class="type">list</span>
</div>
</div>
<div class="desc">
The syntax <span class="id">[...]</span> constructs a
new list containing the zero or more values enclosed in the
braces.  It is equivalent to calling <span
class="id">list</span> on the enclosed values.
</div>
</div>

<div class="docitem" id="fn:isempty">
<div class="proto">
<div class="function">
<span class="id">isempty(<span class="arg">list</span>)</span>
</div>
<div class="param">
<span class="arg">list</span>: <span class="type">list</span>
</div>
<div class="returns">
<span class="type">cvalue</span>
</div>
</div>
<div class="desc">

Returns <span class="val">1</span> if <span
class="arg">list</span> is empty, <span class="val">0</span> otherwise.

</div>
</div>

<div class="docitem" id="fn:head">
<div class="proto">
<div class="function">
<span class="id">head(<span class="arg">list</span>)</span>
</div>
<div class="param">
<span class="arg">list</span>: <span class="type">list</span>
</div>
<div class="returns">
<span class="type">depends on contents of <span class="arg">list</span></span>
</div>
</div>
<div class="desc">
Returns the first element of <span class="arg">list</span>.
</div>
</div>

<div class="docitem" id="fn:tail">
<div class="proto">
<div class="function">
<span class="id">tail(<span class="arg">list</span>)</span>
</div>
<div class="param">
<span class="arg">list</span>: <span class="type">list</span>
</div>
<div class="returns">
<span class="type">list</span>
</div>
</div>
<div class="desc">
Returns a copy of <span class="arg">list</span> with the first element removed.
</div>
</div>


<div class="docitem" id="fn:listref">
<div class="proto">
<div class="function">
<span class="id">listref(<span class="arg">list</span>,<span class="arg">idx</span>)</span>
</div>
<div class="param">
<span class="arg">list</span>: <span class="type">list</span>
</div>
<div class="param">
<span class="arg">idx</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">depends on contents of <span class="arg">list</span></span>
</div>
</div>
<div class="desc">
Returns the item stored at position <span class="arg">idx</span> in
<span class="arg">list</span>.
</div>
</div>

<div class="docitem" id="listset">
<div class="proto">
<div class="function">
<span class="id">listset(<span class="arg">list</span>,<span class="arg">idx</span>,<span class="arg">value</span>)</span>
</div>
<div class="param">
<span class="arg">list</span>: <span class="type">list</span>
</div>
<div class="param">
<span class="arg">idx</span>: <span class="type">cvalue</span>
</div>
<div class="param">
<span class="arg">value</span>: <span class="type">any type</span>
</div>
<div class="returns">
<span class="type">list</span>
</div>
</div>
<div class="desc">
Replaces the item at position <span
class="arg">idx</span> in <span
class="type">list</span> with <span
class="arg">value</span>.  It is an error if <span
class="type">list</span> does not contain more than
<span class="arg">idx</span> items.  Returns <span
class="type">list</span> following the update.
</div>
</div>

<div class="docitem" id="fn:listins">
<div class="proto">
<div class="function">
<span class="id">listins(<span class="arg">list</span>,<span class="arg">idx</span>,<span class="arg">value</span>)</span>
</div>
<div class="param">
<span class="arg">list</span>: <span class="type">list</span>
</div>
<div class="param">
<span class="arg">idx</span>: <span class="type">cvalue</span>
</div>
<div class="param">
<span class="arg">value</span>: <span class="type">any type</span>
</div>
<div class="returns">
<span class="type">list</span>
</div>
</div>
<div class="desc">
Inserts <span class="arg">value</span>  at position <span
class="arg">idx</span> in <span
class="type">list</span>.  The elements at position <span
class="arg">idx</span> and higher, if any, are shifted up one position.
It is an error if <span
class="type">list</span> does not contain more than
<span class="arg">idx-1</span> items.  Returns <span
class="type">list</span> following the update.
</div>
</div>

<div class="docitem" id="fn:listdel">
<div class="proto">
<div class="function">
<span class="id">listdel(<span class="arg">list</span>,<span class="arg">idx</span>)</span>
</div>
<div class="param">
<span class="arg">list</span>: <span class="type">list</span>
</div>
<div class="param">
<span class="arg">idx</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">list</span>
</div>
</div>
<div class="desc">
Deletes the item at position <span
class="arg">idx</span> in <span
class="type">list</span>.  The elements at higher
positions, if any, are shifted down one position.
Returns <span class="type">list</span> following the update.
</div>
</div>

<div class="docitem" id="fn:append">
<div class="proto">
<div class="function">
<span class="id">append(<span class="arg">list</span>,<span class="arg">value</span>)</span>
</div>
<div class="param">
<span class="arg">list</span>: <span class="type">list</span>
</div>
<div class="param">
<span class="arg">value</span>: <span class="type">any type</span>
</div>
<div class="returns">
<span class="type">list</span>
</div>
</div>
<div class="desc">
Inserts <span class="arg">value</span> at the end of
<span class="type">list</span>.
Returns <span class="type">list</span> following the update.
</div>
</div>

<div class="docitem" id="fn:push">
<div class="proto">
<div class="function">
<span class="id">push(<span class="arg">list</span>,<span class="arg">value</span>)</span>
</div>
<div class="param">
<span class="arg">list</span>: <span class="type">list</span>
</div>
<div class="param">
<span class="arg">value</span>: <span class="type">any type</span>
</div>
<div class="returns">
<span class="type">list</span>
</div>
</div>
<div class="desc">
Inserts <span class="arg">value</span> at the beginning of
<span class="type">list</span>, shifting all other elements up one position.
Returns <span class="type">list</span> following the update.
</div>
</div>

<div class="docitem" id="fn:pop">
<div class="proto">
<div class="function">
<span class="id">pop(<span class="arg">list</span>)</span>
</div>
<div class="param">
<span class="arg">list</span>: <span class="type">list</span>
</div>
<div class="param">
<span class="arg">value</span>: <span class="type">any type</span>
</div>
<div class="returns">
<span class="type">depends on contents of <span class="arg">list</span></span>
</div>
</div>
<div class="desc">
Removes and returns the first element of <span class="type">list</span>,
shifting any remaining elements down one position.
</div>
</div>

<div class="docitem" id="fn:reverse">
<div class="proto">
<div class="function">
<span class="id">reverse(<span class="arg">list</span>)</span>
</div>
<div class="param">
<span class="arg">list</span>: <span class="type">list</span>
</div>
<div class="returns">
<span class="type">list</span>
</div>
</div>
<div class="desc">
Returns a new list containing the elements of <span class="arg">list</span> in reverse order.
</div>
</div>

<h3>Vectors</h3>

<p>
Vectors are fixed-length ordered collections, possibly
empty.  Vectors are mutable, allowing items to be
changed at any position, and contiguously indexed from
position 0.  The predicate
<span class="id">isvector</span> tests whether a value is
a vector.
</p>

<div class="docitem" id="fn:mkvec">
<div class="proto">
<div class="function">
<span class="id">mkvec(<span class="arg">len</span>[,<span class="arg">val</span>])</span>
</div>
<div class="param">
<span class="arg">len</span>: <span class="type">cvalue</span>
</div>
<div class="param">
<span class="arg">val</span>: <span class="type">any value</span>
</div>
<div class="returns">
<span class="type">vector</span>
</div>
</div>
<div class="desc">
Constructs a new vector of size <span class="arg">len</span>.
Each element is initialized to <span class="arg">val</span>, if specified,
otherwise to <span class="val">nil</span>.
</div>
</div>

<div class="docitem" id="fn:vector">
<div class="proto">
<div class="function">
<span class="id">vector(<span class="arg">value</span>, ...)</span>
</div>
<div class="param">
<span class="arg">value</span>: <span class="type">any type</span>
</div>
<div class="returns">
<span class="type">vector</span>
</div>
</div>
<div class="desc">
Constructs a new vector containing the zero or more values passed as arguments.
The values are stored in argument order.  The size of the vector is equal to the number of arguments.
</div>
</div>

<div class="docitem" id="fn:veclen">
<div class="proto">
<div class="function">
<span class="id">veclen(<span class="arg">vec</span>)</span>
</div>
<div class="param">
<span class="arg">vec</span>: <span class="type">vector</span>
</div>
<div class="returns">
<span class="type">cvalue</span>
</div>
</div>
<div class="desc">
Returns the number of items in <span class="arg">vec</span>.
Equivalent to <tt>length(<span class="arg">vec</span>)</tt>.
</div>
</div>


<div class="docitem" id="fn:vecref">
<div class="proto">
<div class="function">
<span class="id">vecref(<span class="arg">vec</span>,<span class="arg">idx</span>)</span>
</div>
<div class="param">
<span class="arg">vec</span>: <span class="type">vector</span>
</div>
<div class="param">
<span class="arg">idx</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">depends on contents of <span class="arg">vec</span></span>
</div>
</div>
<div class="desc">
Returns the item stored at position <span class="arg">idx</span> in
<span class="arg">vec</span>.
</div>
</div>

<div class="docitem" id="fn:vecset">
<div class="proto">
<div class="function">
<span class="id">vecset(<span class="arg">vec</span>,<span class="arg">idx</span>,<span class="arg">value</span>)</span>
</div>
<div class="param">
<span class="arg">vec</span>: <span class="type">vector</span>
</div>
<div class="param">
<span class="arg">idx</span>: <span class="type">cvalue</span>
</div>
<div class="param">
<span class="arg">value</span>: <span class="type">any type</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Replaces the item at position <span
class="arg">idx</span> in <span
class="type">vec</span> with <span
class="arg">value</span>.  It is an error if <span
class="type">vec</span> does not contain more than
<span class="arg">idx</span> items.
</div>
</div>

<h3>Tables</h3>

<p>
Tables store key/value pairs.  Keys and values may be
any type of Cinquecento value other than <span
class="type">nil</span>.  The predicate
<span class="id">istable</span> tests whether a value is
a table.
</p>

<div class="docitem" id="fn:mktab">
<div class="proto">
<div class="function">
<span class="id">mktab()</span>
</div>
<div class="returns">
<span class="type">table</span>
</div>
</div>
<div class="desc">
Creates and returns a new, empty table.
</div>
</div>


<div class="docitem" id="fn:tabinsert">
<div class="proto">
<div class="function">
<span class="id">tabinsert(<span class="arg">tab</span>,<span class="arg">key</span>,<span class="arg">value</span>)</span>
</div>
<div class="param">
<span class="arg">tab</span>: <span class="type">table</span>
</div>
<div class="param">
<span class="arg">key</span>: <span class="type">any type</span>
</div>
<div class="param">
<span class="arg">value</span>: <span class="type">any type</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Inserts the pair <span class="arg">key</span>/<span
class="arg">value</span> into <span
class="arg">tab</span>.  Any previous entry for
the same <span class="arg">key</span> is removed.
</div>
</div>

<div class="docitem" id="fn:tablook">
<div class="proto">
<div class="function">
<span class="id">tablook(<span class="arg">tab</span>,<span class="arg">key</span>)</span>
</div>
<div class="param">
<span class="arg">tab</span>: <span class="type">table</span>
</div>
<div class="param">
<span class="arg">key</span>: <span class="type">any type</span>
</div>
<div class="returns">
<span class="type">depends on the contents of <span class="arg">tab</span></span>
</div>
</div>
<div class="desc">
Searches <span class="arg">tab</span> for a pair whose
key is <span class="arg">key</span> and returns the
associated value.  Returns <span class="val">nil</span>
if <span class="arg">tab</span> has no such pair.

</div>
</div>

<div class="docitem" id="fn:tabdelete">
<div class="proto">
<div class="function">
<span class="id">tabdelete(<span class="arg">tab</span>,<span class="arg">key</span>)</span>
</div>
<div class="param">
<span class="arg">tab</span>: <span class="type">table</span>
</div>
<div class="param">
<span class="arg">key</span>: <span class="type">any type</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Deletes the pair with key <span class="arg">key</span>
from <span class="arg">tab</span>, if it exists.
</div>
</div>

<div class="docitem" id="fn:tabkeys">
<div class="proto">
<div class="function">
<span class="id">tabkeys(<span class="arg">tab</span>)
</div>
<div class="param">
<span class="arg">tab</span>: <span class="type">table</span>
</div>
<div class="returns">
<span class="type">vector</span>
</div>
</div>
<div class="desc">
Returns a vector containing all keys in
<span class="arg">tab</span>.
</div>
</div>

<div class="docitem" id="fn:tabvals">
<div class="proto">
<div class="function">
<span class="id">tabvals(<span class="arg">tab</span>)
</div>
<div class="param">
<span class="arg">tab</span>: <span class="type">table</span>
</div>
<div class="returns">
<span class="type">vector</span>
</div>
</div>
<div class="desc">
Returns a vector containing all values in
<span class="arg">tab</span>.</div>
</div>

<div class="docitem" id="fn:tabenum">
<div class="proto">
<div class="function">
<span class="id">tabenum(<span class="arg">tab</span>)
</div>
<div class="param">
<span class="arg">tab</span>: <span class="type">table</span>
</div>
<div class="returns">
<span class="type">vector</span>
</div>
</div>
<div class="desc">
Returns a vector containing all keys and values in
<span class="arg">tab</span>.  The length of the
returned vector is twice the number of pairs in <span
class="arg">tab</span>.  The first half of the vector
contains the keys of <span class="arg">tab</span>; the
second half contains, in corresponding order,  the values.
</div>
</div>


<h3>Characters</h3>

<p>

ASCII characters are represented as cvalues of type
<span class="val">char</span> or <span
class="val">unsigned char</span>.
</p>

<p>
The following functions operate on characters.
</p>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:isalnum">isalnum(<span class="arg">char</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:isalpha">isalpha(<span class="arg">char</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:isascii">isascii(<span class="arg">char</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:isblank">isblank(<span class="arg">char</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:iscntrl">iscntrl(<span class="arg">char</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:isdigit">isdigit(<span class="arg">char</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:isgraph">isgraph(<span class="arg">char</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:islower">islower(<span class="arg">char</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:isodigit">isodigit(<span class="arg">char</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:isprint">isprint(<span class="arg">char</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:ispunct">ispunct(<span class="arg">char</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:isspace">isspace(<span class="arg">char</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:isupper">isupper(<span class="arg">char</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:isxdigit">isxdigit(<span class="arg">char</span>)</span>
</div>
<div class="param">
<span class="arg">char</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">cvalue (1 or 0)</span>
</div>
</div>
<div class="desc">
These functions implement predicates on character values.
They correspond to the ctype (character type) interface of the
C library.  The predicates are based on fixed character values,
and do not depend on the locale of the Cinquecento
evaluator.
</div>
</div>


<h3>Strings</h3>

<p>
The Cinquecento string type represents an array of
bytes.  Cinquecento strings have fixed length (possibly
zero), are indexed from position 0, and are not null
terminated.  Strings are mutable, but do not share
storage with other strings.  The maximum string length
is 2^64-1.  The predicate
<span class="id" id="fn:isstring">isstring</span> tests whether a value is
a string.
</p>

<p>
The C relational operators (<tt>==</tt>, <tt>!=</tt>,
<tt><</tt>, <tt>></tt>, <tt><=</tt>, <tt>>=</tt>) are
defined over strings.  They compare the contents of the
strings.  There is no way to test whether two string
instances are the same object.
</p>

<p>
The following functions comprise the basic string
operations.
</p>

<div class="docitem" id="fn:mkstr">
<div class="proto">
<div class="function">
<span class="id">mkstr(<span class="arg">len</span>)</span>
</div>
<div class="param">
<span class="arg">len</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">string</span>
</div>
</div>
<div class="desc">
Returns a new string containing <span
class="arg">len</span> null bytes.
</div>
</div>

<div class="docitem" id="fn:strlen">
<div class="proto">
<div class="function">
<span class="id">strlen(<span class="arg">str</span>)</span>
</div>
<div class="param">
<span class="arg">str</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">cvalue</span>
</div>
</div>
<div class="desc">
Returns the number of bytes in <span class="arg">str</span>.
Equivalent to <tt>length(<span class="arg">str</span>)</tt>.
</div>
</div>

<div class="docitem" id="fn:strref">
<div class="proto">
<div class="function">
<span class="id">strref(<span class="arg">str</span>,<span class="arg">idx</span>)</span>
</div>
<div class="param">
<span class="arg">str</span>: <span class="type">string</span>
</div>
<div class="param">
<span class="arg">idx</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">cvalue of type <span class="type">uchar</span>
</span>
</div>
</div>
<div class="desc">
Returns the character at index <span class="arg">idx</span> in
<span class="arg">str</span>.
</div>
</div>

<div class="docitem" id="fn:strstr">
<div class="proto">
<div class="function">
<span class="id">strstr(<span class="arg">s1</span>,<span class="arg">s2</span>)</span>
</div>
<div class="param">
<span class="arg">s1</span>: <span class="type">string</span>
</div>
<div class="param">
<span class="arg">s2</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">cvalue or nil</span>
</span>
</div>
</div>
<div class="desc">
Returns the index in <span class="arg">s1</span> of the first occurrence
of the string <span class="arg">s2</span>, or nil if <span class="arg">s2</span>
does not match.
</div>
</div>

<div class="docitem" id="fn:substr">
<div class="proto">
<div class="function">
<span class="id">substr(<span class="arg">str</span>,<span class="arg">start</span>,<span class="arg">end</span>)</span>
</div>
<div class="param">
<span class="arg">str</span>: <span class="type">string</span>
</div>
<div class="param">
<span class="arg">start</span>: <span class="type">cvalue</span>
</div>
<div class="param">
<span class="arg">end</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">string</span>
</div>
</div>
<div class="desc">
Returns a string containing a copy of the substring of <span
class="arg">from</span> starting at position
<span class="arg">start</span> up to but not including position 
<span class="arg">end</span>.
</div>
</div>

<div class="docitem" id="fn:strput">
<div class="proto">
<div class="function">
<span class="id">strput(<span class="arg">to</span>,<span class="arg">offset</span>,<span class="arg">from</span>)</span>
</div>
<div class="param">
<span class="arg">to</span>: <span class="type">string</span>
</div>
<div class="param">
<span class="arg">offset</span>: <span class="type">cvalue</span>
</div>
<div class="param">
<span class="arg">from</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Copies the contents of string <span
class="arg">from</span> into <span of
class="arg">to</span>.  The copy begins at position
<span class="arg">offset</span> within <span
class="arg">to</span>.  It is an error if <span class="arg">to</span> is too short for <span
class="arg">from</span> to be copied in entirety.
</div>
</div>

<div class="docitem" id="fn:memset">
<div class="proto">
<div class="function">
<span class="id">memset(<span class="arg">str</span>,<span class="arg">byte</span>[,<span class="arg">lim</span>])</span>
</div>
<div class="param">
<span class="arg">str</span>: <span class="type">string</span>
</div>
<div class="param">
<span class="arg">byte</span>: <span class="type">cvalue</span>
</div>
<div class="param">
<span class="arg">lim</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Fills the first <span class="arg">lim</span> bytes of string <span
class="arg">str</span> with the low eight bits of <span class="arg">byte</span>.
If <span class="arg">lim</span> is unspecified, the entire string is filled.
</div>
</div>

<div class="docitem" id="fn:strton">
<div class="proto">
<div class="function">
<span class="id">strton(<span class="arg">str</span>[,<span class="radix">base</span>])</span>
</div>
<div class="param">
<span class="arg">str</span>: <span class="type">string</span>
</div>
<div class="param">
<span class="arg">base</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">cvalue</span>
</div>
</div>
<div class="desc">
Converts the contents of <span class="arg">str</span>
to an integer cvalue in the literal domain.  The format
of <span class="arg">str</span> may be any valid C
integer constant.  If provided and non-zero, <span class="arg">base</span>
specifies the base in which the string is interpreted.
</div>
</div>

<div class="docitem" id="fn:split">
<div class="proto">
<div class="function">
<span class="id">split(<span class="arg">str</span>[,<span class="arg">set</span>[,<span class="arg">lim</span>]])</span>
</div>
<div class="param">
<span class="arg">str</span>: <span class="type">string</span>
</div>
<div class="param">
<span class="arg">set</span>: <span class="type">string or nil</span>
</div>
<div class="param">
<span class="arg">lim</span>: <span class="type">cval</span>
</div>
<div class="returns">
<span class="type">list</span>
</div>
</div>
<div class="desc">
Splits <span class="arg">str</span> into substrings delimited
by characters in <span class="arg">set</span> and returns
a list containing the substrings.

If <span class="arg">set</span> is not specified or is <span class="val">nil</span>,
the split occurs on consecutive white space delimiters.  Otherwise,
the split occurs on each occurrence of a delimiters from <span class="arg">set</span>,
and consecutive delimiters yield empty strings.

If <span class="arg">lim</span> is specified, at most
<span class="arg">lim</span> splits are performed; if input remains,
it is returned as the final element of the returned list.
</div>
</div>


<div class="docitem" id="fn:mapfile">
<div class="proto">
<div class="function">
<span class="id">mapfile(<span class="arg">filename</span>)</span>
</div>
<div class="param">
<span class="arg">filename</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">string</span>
</div>
</div>
<div class="desc">
Returns a string containing a copy of the contents of
the file named <span class="arg">filename</span>.
</div>
</div>

<p>
Several functions move strings to and
from address spaces.
</p>

<div class="docitem" id="fn:stringof">
<div class="proto">
<div class="function">
<span class="id">stringof(<span class="arg">ptr</span>)</span>
</div>
<div class="param">
<span class="arg">ptr</span>: <span class="type">cvalue</span> of type <span class="type">char*</span> or <span class="type">unsigned char*</span>
</div>
<div class="returns">
<span class="type">string</span>
</div>
</div>
<div class="desc">
Returns a string containing a copy of the bytes
beginning at <span class="arg">ptr</span> from the
address space associated with <span
class="arg">ptr</span>.  The string extends to, but
does not include, the first null byte at or beyond
<span class="arg">ptr</span>.  <span
class="id">Stringof</span> does not span address space
mapping boundaries: if the boundary of the address
space mapping containing <span class="arg">ptr</span>
is reached before a null byte is encountered, then the
search ends and the string of bytes seen so far is
returned.
</div>
</div>

<div class="docitem" id="fn:getbytes">
<div class="proto">
<div class="function">
<span class="id">getbytes(<span class="arg">ptr</span>[,<span class="arg">len</span>])</span>
</div>
<div class="param">
<span class="arg">ptr</span>: <span class="type">cvalue</span> of any pointer type
</div>
<div class="param">
<span class="arg">len</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">string</span>
</div>
</div>
<div class="desc">
Returns a string containing a copy of the bytes
beginning at <span class="arg">ptr</span> from the
address space associated with <span
class="arg">ptr</span>.  If provided, <span
class="arg">len</span> is a non-negative count of bytes
to read; otherwise, <tt>sizeof(*<span
class="arg">ptr</span>)</tt> bytes are read.  It is an
error for the read to cross the boundary of the address
space mapping containing <span
class="arg">ptr</span>.
</div>
</div>

<div class="docitem" id="fn:putbytes">
<div class="proto">
<div class="function">
<span class="id">putbytes(<span class="arg">ptr</span>,<span class="arg">str</span>)</span>
</div>
<div class="param">
<span class="arg">ptr</span>: <span class="type">cvalue</span> of any pointer type
</div>
<div class="param">
<span class="arg">str</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Copies the bytes in <span class="arg">str</span> into
address space associated with <span
class="arg">ptr</span>, starting at the location
pointed to by <span class="arg">ptr</span>.  It is an
error for the write to cross the boundary of the
address space mapping containing <span
class="arg">ptr</span>.
</div>
</div>

<h3>I/O</h3>

<p>
Cinquecento supports I/O over regular files and network
connections.  An open file or network connection is
represented by an instance of the file descriptor type.
The predicate <span class="id" id="fn:isfd">isfd</span>
tests whether a value is a file descriptor.
</p>

<div class="docitem" id="fn:open">
<div class="proto">
<div class="function">
<span class="id">open(<span class="arg">filename</span>,<span class="arg">mode</span>)</span>
</div>
<div class="param">
<span class="arg">filename</span>: <span class="type">string</span>
</div>
<div class="param">
<span class="arg">mode</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">file descriptor</span>
</div>
</div>
<div class="desc">
Opens the file named <span class="arg">filename</span> and
returns the associated file descriptor.  <span
class="arg">Mode</span> specifies whether the file is to
be opened for reading, writing, or both, and whether
the file is to be created or truncated.  The syntax of
<span class="arg">mode</span> follows that of the C
library stdio <tt>fopen</tt> function.  Common modes
are <span class="val">"r"</span> (read an existing file)
<span class="val">"w"</span> (truncate an existing file
for writing), and <span class="val">"rw"</span> (truncate
an existing file for reading and writing).
</div>
</div>

<div class="docitem" id="fn:opentcp">
<div class="proto">
<div class="function">
<span class="id">opentcp(<span class="arg">address</span>)</span>
</div>
<div class="param">
<span class="arg">address</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">file descriptor</span>
</div>
</div>
<div class="desc">
Opens a TCP connection to <span class="arg">address</span> and
returns the associated file descriptor.
<span class="arg">Address</span> is a string of the form
<tt>"<em>addr</em>:<em>port</em>"</tt>, where
<span class="arg">addr</span> is an IP address or hostname and
<span class="arg">port</span> is a port number or service
name.
</div>
</div>

<div class="docitem" id="fn:read">
<div class="proto">
<div class="function">
<span class="id">read(<span class="arg">fd</span>,<span class="arg">len</span>)</span>
</div>
<div class="param">
<span class="arg">fd</span>: <span class="type">file descriptor</span>
</div>
<div class="param">
<span class="arg">len</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">string</span> or <span class="type">nil</span>
</div>
</div>
<div class="desc">
Reads at most <span class="arg">len</span> bytes from the I/O
resource associated with <span class="arg">fd</span>.  The
call blocks until <span class="arg">len</span> bytes are
read or end of file is encountered.  Returns a string
containing the bytes read, or <tt>nil</tt> if end of
file was encountered and no bytes were read.
</div>
</div>

<div class="docitem" id="fn:write">
<div class="proto">
<div class="function">
<span class="id">write(<span class="arg">fd</span>,<span class="arg">str</span>)</span>
</div>
<div class="param">
<span class="arg">fd</span>: <span class="type">file descriptor</span>
</div>
<div class="param">
<span class="arg">str</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Writes the bytes contained in the string
<span class="arg">str</span> to the I/O resource associated
with <span class="arg">fd</span>.
</div>
</div>

<div class="docitem" id="fn:close">
<div class="proto">
<div class="function">
<span class="id">close(<span class="arg">fd</span>)</span>
</div>
<div class="param">
<span class="arg">fd</span>: <span class="type">file descriptor</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Closes the I/O resource associated with <span
class="arg">fd</span>.  Any pending buffered output is
written.  A call to <span class="id">close</span> on an
already closed descriptor has no effect.  A call to
<span class="id">read</span> or <span
class="id">write</span> on a closed descriptor draws an
error.
</div>
</div>

<div class="docitem" id="fn:fdname">
<div class="proto">
<div class="function">
<span class="id">fdname(<span class="arg">fd</span>)</span>
</div>
<div class="param">
<span class="arg">fd</span>: <span class="type">file descriptor</span>
</div>
<div class="returns">
<span class="type">string</span>
</div>
</div>
<div class="desc">
Returns the name of the I/O resource associated with <span
class="arg">fd</span>.
</div>
</div>

<h3 id="sec:system">Filesystem Operations</h3>

<p>
This section documents functions that operate on the file system.
</p>

<div class="docitem" id="fn:access">
<div class="proto">
<div class="function">
<span class="id">access(<span class="arg">filename</span>,<span class="arg">mode</span>)</span>
</div>
<div class="param">
<span class="arg">filename</span>: <span class="type">string</span>
</div>
<div class="param">
<span class="arg">mode</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">cvalue</span>
</div>
</div>
<div class="desc">

Evaluates <span class="arg">filename</span> for accessibility.
<span class="arg">Mode</span> is one or more of the following
access modes specifications:
read permission
(<span class="val">"r"</span>),
write permission
(<span class="val">"w"</span>),
execute permission,
(<span class="val">"x"</span>),
and mere existence
(<span class="val">"f"</span>).
Returns
<span class="val">1</span>
if all specified modes are permitted,
otherwise
<span class="val">0</span>.
</div>
</div>

<div class="docitem" id="fn:mkdir">
<div class="proto">
<div class="function">
<span class="id">mkdir(<span class="arg">name</span>)</span>
</div>
<div class="param">
<span class="arg">name</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Creates a new directory named <span class="arg">name</span>.
</div>
</div>

<div class="docitem" id="fn:rmdir">
<div class="proto">
<div class="function">
<span class="id">rmdir(<span class="arg">name</span>)</span>
</div>
<div class="param">
<span class="arg">name</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Removes the directory named <span class="arg">name</span>.
</div>
</div>

<div class="docitem" id="fn:unlink">
<div class="proto">
<div class="function">
<span class="id">unlink(<span class="arg">name</span>)</span>
</div>
<div class="param">
<span class="arg">name</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Removes the file named <span class="arg">name</span>.
</div>
</div>


<h3 id="sec:system">Formatted Output</h3>

<p>
Cinquecento provides several functions for C-style
formatted output to various destinations.
</p>

<p>

Each function expects a format string argument.  The
format string may include conversion specifications
that are similar (but not identical) to those handled
by C stdio library functions.  Each conversion
specification begins with
the <span class="val">%</span> character, optionally
followed by zero or more modifiers characters,
optionally followed by a decimal width specifier, optionally
followed by the <span class="val">.</span> character
and a decimal precision specifier, finally followed by a single
verb character.  The accepted modifier characters are
<span class="val">+</span>, <span class="val">-</span>, <span class="val">0</span>,
<span class="val">#</span>, and a single space.  The
modifier characters and the width and precision
specifiers have the same effects they have in C.  In
addition, the
modifiers <span class="val">l</span>, <span class="val">L</span>, <span class="val">h</span>
are accepted but have no effect; unlike the C stdio
formatter, Cinquecento can determine the size of an
integer operand from its type.
</p>

<p>
The conversions are processed in order; each
operates in turn on the remaining values passed to the
format function.
</p>

<p>
The recognized verb characters are:
</p>

<div id="table">
<table>

<tr>
<td><span class="val">a</span></td>
<td>
Formats any type of value in an implementation-defined
format.
</td>
</tr>

<tr>
<td><span class="val">c</span></td>
<td>
Formats a character value as an ascii character (if printable)
or in octal.
</td>
</tr>

<tr>
<td><span class="val">d,o,x,X,u</span></td>
<td>
Formats an integer or pointer value in signed decimal,
octal, lowercase hex, uppercase hex, or unsigned
decimal.
</td>
</tr>

<tr>
<td><span class="val">e</span></td>
<td>

Formats a value of an enumerated type as the name of a
constant having the same value.  If more than one
constant has the same value, one constant is picked in
an undefined manner.  If no constant has the value, the
value is formatted as if the <span class="val">d</span>
verb had been used.
</td>
</tr>

<tr>
<td><span class="val">p</span></td>
<td>
Formats a pointer value in lowercase hex.
</td>
</tr>

<tr>
<td><span class="val">s,b,B</span></td>
<td>
If the value is not a string, the result of calling <span class="id"><a
href="#fn:stringof">stringof</a></span> on the value is used.
<div>
<span class="val">s</span> copies the string value, stopping at the first null byte.
</div>
<div>
<span class="val">b</span> is like <span class="val">s</span>, except the entire
string is printed, including null bytes.
</div>
<div>
<span class="val">B</span> is like <span class="val">b</span>, except unprintable
characters are formatted as octal literals.
</div>
</td>
</tr>

<tr>
<td>
<span class="val">t</span>
</td>
<td>
Formats a ctype.  The value may be in one of two forms:
(1) a ctype, in which case it is formatted as a
conventional C type specification, or (2) a vector,
representing a C symbol, of the form <span
class="val">[ <span class="arg">T</span>, <span
class="arg">ID</span>, ... ]</span>, where <span
class="arg">T</span> is a ctype and <span
class="arg">ID</span> is a string or <span
class="val">nil</span>, in which case the symbol is
formatted as conventional (possibly abstract) C
declaration.
</td>
</tr>

<tr>
<td>
<span class="val">y</span>
</td>
<td>
Formats an integer or pointer value as <span
class="val">"<span class="arg">symbol</span>+<span
class="arg">offset</span>"</span>.
<span class="arg">Symbol</span> is the name of the symbol returned
by a call to the name space <span class="arg"><a
href="#fn:lookaddr">lookaddr</a></span> operation on
the value.  <span class="arg">Offset</span> is the
difference between the value and the location of the symbol returned by
<span class="arg">lookaddr</span>.  If the difference
is zero, the offset is suppressed.
</td>
</tr>
</table>
</div>

<p>
The formatted output functions are:
</p>

<div class="docitem" id="fn:printf">
<div class="proto">
<div class="function">
<span class="id">printf(<span class="arg">fmt</span>, ...)</span>
</div>
<div class="param">
<span class="arg">fmt</span>: <span class="type">format string</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Sends formatted output to the current standard output.
</div>
</div>

<div class="docitem" id="fn:fprintf">
<div class="proto">
<div class="function">
<span class="id">fprintf(<span class="arg">fd</span>, <span class="arg">fmt</span>, ...)</span>
</div>
<div class="param">
<span class="arg">fd</span>: <span class="type">file descriptor</span>
</div>
<div class="param">
<span class="arg">fmt</span>: <span class="type">format string</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Sends formatted output to I/O resource associated with <span class="arg">fd</span>.
</div>
</div>

<div class="docitem" id="fn:sprintfa">
<div class="proto">
<div class="function">
<span class="id">sprintfa(<span class="arg">fmt</span>, ...)</span>
</div>
<div class="param">
<span class="arg">fmt</span>: <span class="type">format string</span>
</div>
<div class="returns">
<span class="type">string</span>
</div>
</div>
<div class="desc">
Returns a new string containing formatted output.
</div>
</div>



<h3 id="sec:system">System Functions</h3>

<p>
This section documents various system-level functions.
</p>

<div class="docitem" id="fn:getpid">
<div class="proto">
<div class="function">
<span class="id">getpid()</span>
</div>
<div class="returns">
<span class="type">cvalue</span>
</div>
</div>
<div class="desc">
Returns the process identifier of the process in which
the Cinquecento system is running.
</div>
</div>

<div class="docitem" id="fn:gettimeofday">
<div class="proto">
<div class="function">
<span class="id">gettimeofday()</span>
</div>
<div class="returns">
<span class="type">cvalue</span>
</div>
</div>
<div class="desc">
Returns the current time in microseconds.
</div>
</div>

<div class="docitem" id="fn:backtrace">
<div class="proto">
<div class="function">
<span class="id">backtrace()</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Prints to the current standard output a formatted
snapshot of the Cinquecento call stack.
</div>
</div>

<div class="docitem" id="fn:rand">
<div class="proto">
<div class="function">
<span class="id">rand(<span class="arg">max</span>)</span>
</div>
<div class="param">
<span class="arg">max</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">cvalue</span>
</div>
</div>
<div class="desc">
Returns a random integer in the range [0...<span
class="arg">max</span>).  It is an error if <span
class="arg">max</span> exceeds the
implementation-defined maximum random number.
</div>
</div>

<div class="docitem" id="fn:randseed">
<div class="proto">
<div class="function">
<span class="id">randseed(<span class="arg">seed</span>)</span>
</div>
<div class="param">
<span class="arg">seed</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Seeds the random number generator used by <span class="id">rand</span>.
</div>
</div>

<div class="docitem" id="fn:resettop">
<div class="proto">
<div class="function">
<span class="id">resettop()</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Resets the top-level environment to the initial bindings established
when the Cinquecento is started.  All user-defined bindings are
destroyed.
</div>
</div>

<h3 id="sec:cinterface">C Interface</h3>

<p>
The following functions comprise the C interface to the
L1 implementation of Cinquecento.  The interface is defined in 
<span class="val">cqct.h</span>.
For an example of
how to use the interface, see the file <span
class="val">main.c</span> in the L1 implementation, which
implements a simple Cinquecento read-eval-print loop.
The functions are described below in the general order in
which they would be called.
</p>

<p>
The interface operates on values of several opaque
types.
</p>

<div id="table">
<table>
<tr>
<td><span class="id">Closure</span><td>
<td>Closure<td>
</tr>
<tr>
<td><span class="id">Toplevel</span><td>
<td>Toplevel environment<td>
</tr>
<tr>
<td><span class="id">Expr</span><td>
<td>Parsed Cinquecento expression<td>
</tr>
<tr>
<td><span class="id">Val</span><td>
<td>Cinquecento value<td>
</tr>
<tr>
<td><span class="id">VM</span><td>
<td>Virtual machine for evaluating compiled Cinquecento expression<td>
</tr>
</table>
</div>


<div class="docitem" id="fn:cqctinit">
<div class="proto">
<div class="function">
<span class="id">Toplevel* cqctinit(int <span class="arg">gcthread</span>, uint64_t <span class="arg">heapmax</span>,
char **<span class="arg">loadpath</span>)</span>
</div>
</div>
<div class="desc">
This function must be called first.  It allocates,
initializes, and returns a Cinquecento top-level environment
containing bindings for all built-in functions and
other values.  It also initializes the Cinquecento
storage manager.  If <span class="arg">gcthread</span>
is non-zero, the garbage collector runs in a separate
thread.  If <span class="arg">heapmax</span> is
non-zero, the memory allocator restricts the heap size
to <span class="arg">heapmax</span> megabytes.
If <span class="arg">loadpath</span> is non-NULL,
it is the vector of directories in which the
the @include <<span class="arg">filename</span>>
form searches for <span class="arg">filename</span>; its final element must be NULL.
</div>
</div>

<div class="docitem" id="fn:cqctfaulthook">
<div class="proto">
<div class="function">
<span class="id">int cqctfaulthook(void (*<span class="arg">fn</span>)(void), int <span class="arg">in</span>)</span>
</div>
</div>
<div class="desc">
In the event of a non-recoverable error in the
Cinquecento system, functions previously registered by
this interface are called in reverse order of their registration.
When <span class="arg">in</span> is non-zero, this
function registers <span class="arg">fn</span>;
when <span class="arg">in</span> is
zero, <span class="arg">fn</span> is unregistered.  At
most 4 functions can be registered.  When a
non-recoverable error occurs, if no functions are
registered, or if each registered function returns, the
system stops executing in an unspecified manner.
Programs wishing to regain control should register a
function that performs a non-local escape.
<span class="id">Cqctfaulthook</span> returns non-zero
if there an error occurs during (un)registration.
</div>
</div>


<div class="docitem" id="fn:cqctmkvm">
<div class="proto">
<div class="function">
<span class="id">VM* cqctmkvm(Toplevel *<span class="arg">top</span>)</span>
</div>
</div>
<div class="desc">
Returns a new Cinquecento evaluator initialized with
the top-level environment bound
to <span class="arg">top</span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctparsefile">Expr* cqctparsefile(char *<span class="arg">filename</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctparsestr">Expr* cqctparsestr(char *<span class="arg">str</span>, char *<span class="arg">whence</str>)</span>
</div>
</div>
<div class="desc">
Returns an <span class="arg">Expr</span> representing
the parsed form of the input expression.  Unless it is
subsequently passed to
<span class="fnindex"><a href="#fn:cqctcompile">cqctcompile</a></span>,
the expression returned should be freed
with <span class="fnindex"><a href="#fn:cqctfreeexpr">cqctfreeexpr</a></span>.
The input expression
for <span class="id">cqctparsefile</span> is the
contents of the file <span class="arg">filename</span>.
The input expression
for <span class="id">cqctparsestr</span> is the
contents of the string <span class="arg">str</span>.
If <span class="arg">whence</span> is non-zero, it will
be printed during error formatting as a location
identifier for <span class="arg">str</span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctcompile">Closure* cqctcompile(Expr *<span class="arg">expr</span>,
Toplevel *<span class="arg">top</span>,
char *<span class="arg">argsid</span>
)</span>
</div>
</div>
<div class="desc">
Compiles Cinquecento code represented
by <span class="arg">expr</span> and returns a procedure
that, when called, executes the code.
If <span class="arg">argsid</span> is null, the returned
procedure takes no arguments; otherwise it is a variable arity
procedure whose argument list is bound to a parameter
whose name is the string pointed to be <span class="arg">argsid</span>.
<div>
The returned procedure captures a reference
to <span class="arg">expr</span> that will be freed by
the storage manager when the function is reclaimed.
</div>
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctcallfn">int cqctcallfn(VM *<span class="arg">vm</span>, Closure *<span class="arg">fn</span>, int <span class="arg">argc</span>, Val *<span class="arg">argv</span>, Val *rv)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctcallthunk">int cqctcallthunk(VM *<span class="arg">vm</span>, Closure *<span class="arg">thunk</span>, Val *v)</span>
</div>
</div>

<div class="desc">

<span class="id">Cqctcallfn</span> calls <span class="arg">fn</span>,
passing the <span class="arg">argc</span> arguments stored in the
array <span class="arg">argv</span>.  On success, the value returned
by <span class="arg">fn</span> is stored in the value pointed to by
<span class="arg">rv</span> and the call returns <span
class="val">0</span>.  If an error occurs, the call returns <span
class="val">-1</span>.

</div>

<div class="desc">
<span class="id">Cqctcallthunk</span> calls <span
class="arg">thunk</span>.  On success, the value returned by <span
class="arg">thunk</span> is stored in the value pointed to by <span
class="arg">rv</span> and the call returns <span class="val">0</span>.
If an error occurs, the call returns <span class="val">-1</span>.
</div>

</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctsprintval">char* cqctsprintval(VM *<span class="arg">vm</span>, Val <span class="arg">v</span>)</span>
</div>
</div>
<div class="desc">
Prints the value <span class="arg">v</span> into a freshly allocated C string;
the
caller is responsible for freeing the returned string
with <span class="fnindex"><a href="#fn:cqctfreecstr">cqctfreecstr</a></span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctint8val">Val cqctvalint8(int8_t <span class="arg">x</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctint16val">Val cqctvalint16(int16_t <span class="arg">x</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctint32val">Val cqctvalint32(int32_t <span class="arg">x</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctint64val">Val cqctvalint64(int64_t <span class="arg">x</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctuint8val">Val cqctvaluint8(uint8_t <span class="arg">x</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctuint16val">Val cqctvaluint16(uint16_t <span class="arg">x</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctuint32val">Val cqctvaluint32(uint32_t <span class="arg">x</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctuint64val">Val cqctvaluint64(uint64_t <span class="arg">x</span>)</span>
</div>
</div>
<div class="desc">
These functions construct and return a Cinquecento literal cvalue
of the indicated type from <span class="arg">x</span>.
</div>
</div>


<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctvalint8">int8_t cqctvalint8(Val <span class="arg">v</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctvalint16">int16_t cqctvalint16(Val <span class="arg">v</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctvalint32">int32_t cqctvalint32(Val <span class="arg">v</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctvalint64">int64_t cqctvalint64(Val <span class="arg">v</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctvaluint8">uint8_t cqctvaluint8(Val <span class="arg">v</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctvaluint16">uint16_t cqctvaluint16(Val <span class="arg">v</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctvaluint32">uint32_t cqctvaluint32(Val <span class="arg">v</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctvaluint64">uint64_t cqctvaluint64(Val <span class="arg">v</span>)</span>
</div>
</div>
<div class="desc">
These functions convert the
value <span class="arg">v</span> to a C integer of the
indicated type.  The result is undefined
if <span class="arg">v</span> is not a cvalue.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctcstrval">Val cqctcstrval(char *<span class="arg">s</span>)</span>
</div>
</div>
<div class="desc">
Constructs and returns a Cinquecento string from the C string <span class="arg">s</span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctvalcstr">char* cqctvalcstr(Val <span class="arg">v</span>)</span>
</div>
</div>
<div class="desc">
Converts the value <span class="arg">v</span> to a C
string.  The result is undefined
if <span class="arg">v</span> is not a string.  The
caller is responsible for freeing the returned string
with <span class="fnindex"><a href="#fn:cqctfreecstr">cqctfreecstr</a></span>.
</div>
</div>


<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctgcprotect">int cqctgcprotect(VM *<span class="arg">vm</span>, Val <span class="arg">v</span>)</span>
</div>
</div>
<div class="desc">
Protects the value <span class="arg">v</span> from
garbage collection by registering it with the current
GC protection frame of <span class="arg">vm</span>.
References to value will be valid until after at least
one of the following events: (1) the frame is popped, (2)
<span class="fnindex"><a href="#fn:cqctgcunprotect">cqctgcunprotect</a></span>
is called on the same arguments while the current GC frame is active,
or (3) <span class="arg">vm</span> is freed.
</div>
</div>


<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctgcunprotect">int cqctgcunprotect(VM *<span class="arg">vm</span>, Val <span class="arg">v</span>)</span>
</div>
</div>
<div class="desc">
Unregister <span class="arg">v</span> from the current GC protection frame
of <span class="arg">vm</span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctfreecstr">void cqctfreecstr(char *<span class="arg">str</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctfreeexpr">void cqctfreeexpr(Expr *<span class="arg">expr</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctfreevm">void cqctfreevm(VM *<span class="arg">vm</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctfini">void cqctfini(Toplevel *<span class="arg">top</span>)</span>
</div>
</div>
<div class="desc">
These functions free the resources allocated by the above functions.
<span class="id">Cqctfreecstr</span> frees a C string returned by
<span class="fnindex"><a href="#fn:cqctval2cstr">cqctval2cstr</a></span>
or <span class="fnindex"><a href="#fn:cqctsprintval">cqctsprintval</a></span>.
<span class="id">Cqctfreeexpr</span> frees an
expression, and should be called only if the expression
has not been successfully compiled.
<span class="id">Cqctfreevm</span> frees a virtual machine.
<span class="id">Cqctfini</span> frees a top-level
environment, and should be called only after all virtual
machines sharing the environment have been freed.
</div>
</div>

<h3 id="sec:synindex">Syntax Index</h3>

<div class="id">
<div class="index">
<div class="fnindex">
<a href="#syn:@include">@include</a><br />
<a href="#syn:@names">@names</a><br />
<a href="#syn:typeof">typeof</a><br />
</div>
</div>
</div>


<h3 id="sec:fnindex">Function Index</h3>
<div class="id">
<div class="index">
<div class="fnindex">
<a href="#fn:access">access</a><br />
<a href="#fn:append">append</a><br />
<a href="#fn:arraynelm">arraynelm</a><br />
<a href="#fn:backtrace">backtrace</a><br />
<a href="#fn:baseid">baseid</a><br />
<a href="#fn:bitfieldcontainer">bitfieldcontainer</a><br />
<a href="#fn:bitfieldpos">bitfieldpos</a><br />
<a href="#fn:bitfieldwidth">bitfieldwidth</a><br />
<a href="#fn:bsearch">bsearch</a><br />
<a href="#fn:close">close</a><br />
<a href="#fn:copy">copy</a><br />
<a href="#fn:cqctcallfn">cqctcallfn</a><br />
<a href="#fn:cqctcallthunk">cqctcallthunk</a><br />
<a href="#fn:cqctcompile">cqctcompile</a><br />
<a href="#fn:cqctcstrval">cqctcstrval</a><br />
<a href="#fn:cqctfaulthook">cqctfaulthook</a><br />
<a href="#fn:cqctfini">cqctfini</a><br />
<a href="#fn:cqctfreeexpr">cqctfreeexpr</a><br />
<a href="#fn:cqctfreevm">cqctfreevm</a><br />
<a href="#fn:cqctgcprotect">cqctgcprotect</a><br />
<a href="#fn:cqctinit">cqctinit</a><br />
<a href="#fn:cqctint8val">cqctint8val</a><br />
<a href="#fn:cqctint16val">cqctint16val</a><br />
<a href="#fn:cqctint32val">cqctint32val</a><br />
<a href="#fn:cqctint64val">cqctint64val</a><br />
<a href="#fn:cqctmkvm">cqctmkvm</a><br />
<a href="#fn:cqctparsefile">cqctparsefile</a><br />
<a href="#fn:cqctparsestr">cqctparsestr</a><br />
<a href="#fn:cqctsprintval">cqctsprintval</a><br />
<a href="#fn:cqctuint8val">cqctuint8val</a><br />
<a href="#fn:cqctuint16val">cqctuint16val</a><br />
<a href="#fn:cqctuint32val">cqctuint32val</a><br />
<a href="#fn:cqctuint64val">cqctuint64val</a><br />
<a href="#fn:cqctvalcstr">cqctvalcstr</a><br />
<a href="#fn:cqctvalint8">cqctvalint8</a><br />
<a href="#fn:cqctvalint16">cqctvalint16</a><br />
<a href="#fn:cqctvalint32">cqctvalint32</a><br />
<a href="#fn:cqctvalint64">cqctvalint64</a><br />
<a href="#fn:cqctvaluint8">cqctvaluint8</a><br />
<a href="#fn:cqctvaluint16">cqctvaluint16</a><br />
<a href="#fn:cqctvaluint32">cqctvaluint32</a><br />
<a href="#fn:cqctvaluint64">cqctvaluint64</a><br />
<a href="#fn:enumconsts">enumconsts</a><br />
<a href="#fn:fdname">fdname</a><br />
<a href="#fn:fieldid">fieldid</a><br />
<a href="#fn:fieldoff">fieldoff</a><br />
<a href="#fn:fields">fields</a><br />
<a href="#fn:fieldtype">fieldtype</a><br />
<a href="#fn:foreach">foreach</a><br />
<a href="#fn:fprintf">fprintf</a><br />
<a href="#fn:getbytes">getbytes</a><br />
<a href="#fn:getpid">getpid</a><br />
<a href="#fn:gettimeofday">gettimeofday</a><br />
<a href="#fn:head">head</a><br />
<a href="#fn:isalnum">isalnum</a><br />
<a href="#fn:isalpha">isalpha</a><br />
<a href="#fn:isarray">isarray</a><br />
<a href="#fn:isas">isas</a><br />
<a href="#fn:isascii">isascii</a><br />
<a href="#fn:isbase">isbase</a><br />
<a href="#fn:isbitfield">isbitfield</a><br />
<a href="#fn:isblank">isblank</a><br />
<a href="#fn:iscntrl">iscntrl</a><br />
<a href="#fn:isctype">isctype</a><br />
<a href="#fn:iscvalue">iscvalue</a><br />
<a href="#fn:isdigit">isdigit</a><br />
<a href="#fn:isdomain">isdomain</a><br />
<a href="#fn:isempty">isempty</a><br />
<a href="#fn:isenum">isenum</a><br />
<a href="#fn:isenumconst">isenumconst</a><br />
<a href="#fn:isfd">isfd</a><br />
<a href="#fn:isfunc">isfunc</a><br />
<a href="#fn:isgraph">isgraph</a><br />
<a href="#fn:islist">islist</a><br />
<a href="#fn:islower">islower</a><br />
<a href="#fn:isnil">isnil</a><br />
<a href="#fn:isns">isns</a><br />
<a href="#fn:isodigit">isodigit</a><br />
<a href="#fn:isprint">isprint</a><br />
<a href="#fn:isprocedure">isprocedure</a><br />
<a href="#fn:isptr">isptr</a><br />
<a href="#fn:ispunct">ispunct</a><br />
<a href="#fn:isrange">isrange</a><br />
<a href="#fn:isrd">isrd</a><br />
<a href="#fn:isrec">isrec</a><br />
<a href="#fn:isspace">isspace</a><br />
<a href="#fn:isstring">isstring</a><br />
<a href="#fn:isstruct">isstruct</a><br />
<a href="#fn:issu">issu</a><br />
<a href="#fn:istable">istable</a><br />
<a href="#fn:istypedef">istypedef</a><br />
<a href="#fn:isundeftype">isundeftype</a><br />
<a href="#fn:isunion">isunion</a><br />
<a href="#fn:isupper">isupper</a><br />
<a href="#fn:isvector">isvector</a><br />
<a href="#fn:isvoid">isvoid</a><br />
<a href="#fn:isxdigit">isxdigit</a><br />
<a href="#fn:length">length</a><br />
<a href="#fn:list">list</a><br />
<a href="#fn:listdel">listdel</a><br />
<a href="#fn:listins">listins</a><br />
<a href="#fn:listref">listref</a><br />
<a href="#fn:listset">listset</a><br />
<a href="#fn:mapfile">mapfile</a><br />
<a href="#fn:memset">memset</a><br />
<a href="#fn:mkctype_array">mkctype_array</a><br />
<a href="#fn:mkctype_bitfield">mkctype_bitfield</a><br />
<a href="#fn:mkctype_char">mkctype_char</a><br />
<a href="#fn:mkctype_const">mkctype_const</a><br />
<a href="#fn:mkctype_double">mkctype_double</a><br />
<a href="#fn:mkctype_enum">mkctype_enum</a><br />
<a href="#fn:mkctype_float">mkctype_float</a><br />
<a href="#fn:mkctype_fn">mkctype_fn</a><br />
<a href="#fn:mkctype_int">mkctype_int</a><br />
<a href="#fn:mkctype_ldouble">mkctype_ldouble</a><br />
<a href="#fn:mkctype_long">mkctype_long</a><br />
<a href="#fn:mkctype_ptr">mkctype_ptr</a><br />
<a href="#fn:mkctype_short">mkctype_short</a><br />
<a href="#fn:mkctype_struct">mkctype_struct</a><br />
<a href="#fn:mkctype_typedef">mkctype_typedef</a><br />
<a href="#fn:mkctype_uchar">mkctype_uchar</a><br />
<a href="#fn:mkctype_uint">mkctype_uint</a><br />
<a href="#fn:mkctype_ulong">mkctype_ulong</a><br />
<a href="#fn:mkctype_union">mkctype_union</a><br />
<a href="#fn:mkctype_ushort">mkctype_ushort</a><br />
<a href="#fn:mkctype_uvlong">mkctype_uvlong</a><br />
<a href="#fn:mkctype_vlong">mkctype_vlong</a><br />
<a href="#fn:mkctype_void">mkctype_void</a><br />
<a href="#fn:mkctype_xaccess">mkctype_xaccess</a><br />
<a href="#fn:mkdir">mkdir</a><br />
<a href="#fn:mkfield">mkfield</a><br />
<a href="#fn:mklist">mklist</a><br />
<a href="#fn:mkns">mkns</a><br />
<a href="#fn:mknsraw">mknsraw</a><br />
<a href="#fn:mkparam">mkparam</a><br />
<a href="#fn:mkstr">mkstr</a><br />
<a href="#fn:mktab">mktab</a><br />
<a href="#fn:mkvec">mkvec</a><br />
<a href="#fn:open">open</a><br />
<a href="#fn:opentcp">opentcp</a><br />
<a href="#fn:paramid">paramid</a><br />
<a href="#fn:params">params</a><br />
<a href="#fn:paramtype">paramtype</a><br />
<a href="#fn:pop">pop</a><br />
<a href="#fn:printf">printf</a><br />
<a href="#fn:push">push</a><br />
<a href="#fn:putbytes">putbytes</a><br />
<a href="#fn:rand">rand</a><br />
<a href="#fn:rand">randseed</a><br />
<a href="#fn:read">read</a><br />
<a href="#fn:resettop">resettop</a><br />
<a href="#fn:rettype">rettype</a><br />
<a href="#fn:reverse">reverse</a><br />
<a href="#fn:sort">sort</a><br />
<a href="#fn:split">split</a><br />
<a href="#fn:sprintfa">sprintfa</a><br />
<a href="#fn:stringof">stringof</a><br />
<a href="#fn:strlen">strlen</a><br />
<a href="#fn:strput">strput</a><br />
<a href="#fn:strref">strref</a><br />
<a href="#fn:strstr">strstr</a><br />
<a href="#fn:strton">strton</a><br />
<a href="#fn:substr">substr</a><br />
<a href="#fn:subtype">subtype</a><br />
<a href="#fn:suekind">suekind</a><br />
<a href="#fn:suetag">suetag</a><br />
<a href="#fn:susize">susize</a><br />
<a href="#fn:tabdelete">tabdelete</a><br />
<a href="#fn:tabenum">tabenum</a><br />
<a href="#fn:tabinsert">tabinsert</a><br />
<a href="#fn:tabkeys">tabkeys</a><br />
<a href="#fn:tablook">tablook</a><br />
<a href="#fn:tabvals">tabvals</a><br />
<a href="#fn:tail">tail</a><br />
<a href="#fn:typedefid">typedefid</a><br />
<a href="#fn:typedeftype">typedeftype</a><br />
<a href="#fn:unlink">unlink</a><br />
<a href="#fn:veclen">veclen</a><br />
<a href="#fn:vecref">vecref</a><br />
<a href="#fn:vecset">vecset</a><br />
<a href="#fn:vector">vector</a><br />
<a href="#fn:write">write</a><br />
<a href="#fn:xaccessget">xaccessget</a><br />
<a href="#fn:xaccessput">xaccessput</a><br />

</div>
</div>
</div>

</div>
</body>
</html>
