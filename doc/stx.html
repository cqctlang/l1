<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>Cinquecento Manual</title>
<link rel="stylesheet" type="text/css" href="reset.css"/>
<link rel="stylesheet" type="text/css" href="styles.css"/>
</head>

<body>

<div id="side1">
</div>

<div id="content">

<div id="title">
<h3>Cinquecento Abstract Syntax Tree</h3>
</div>

The following are syntax node types accepted by the compiler.

<div class="table">
<table>
    <tr>
        <th width=150px>kind(children...)</th>
        <th>properties</th>
        <th width=150px>children requirements</th>
        <th width=150px>represents</th>
    </tr>

    <!--
    Not described:
    #bool, #char, #complex, #double, #float, #int, #long, #short, #signed,
    #unsigned, #void, #ambig, #arr, #base, #bitfield, #boxref, #boxset,
    #comma, #decl, #decls, #dotdot, #enum, #enumel, #fieldoff, #fields,
    #fun, #id, #lapply, #mkbox, #mkbox0, #names, #null, #orpat, #ptr,
    #struct, #stxlist, #stxquote, #stxquasi, #stxsplice, #stxunquote,
    #typename, #typedef, #typespec, #union, #val


    -->

    <tr>
        <td>#add(e1, e2)</td>
        <td>expression</td>
        <td>e1: expression<br>
            e2: expression
        </td>
        <td>e1+e2</td>
    </tr>

    <tr>
        <td>#aref(e1, e2)</td>
        <td>expression</td>
        <td>e1: expression<br>
            e2: expression
        </td>
        <td>e1[e2]</td>
    </tr>

    <tr>
        <td>#arrow(e1, e2)</td>
        <td>expression</td>
        <td>e1: expression<br>
            e2: expression
        </td>
        <td>e1-&gt;e2</td>
    </tr>

    <tr>
        <td>#band(e1, e2)</td>
        <td>expression</td>
        <td>e1: expression<br>
            e2: expression
        </td>
        <td>e1 &amp; e2 (bitwise and)</td>
    </tr>

    <tr>
        <td>#block(e1, e2)</td>
        <td>expression</td>
        <td>e1: stx list of stx id's<br>
            e2: stx list of expression stx expressions
        </td>
        <td>A block of cqct statements</td>
    </tr>

    <tr>
        <td>#bor(e1, e2)</td>
        <td>expression</td>
        <td>e1: expression<br>
            e2: expression
        </td>
        <td>e1 | e2 (bitwise or)</td>
    </tr>

    <tr>
        <td>#break()</td>
        <td>expression</td>
        <td>N/A</td>
        <td>break statement</td>
    </tr>

    <tr>
        <td>#bxor(e1, e2)</td>
        <td>expression</td>
        <td>e1: expression<br>
            e2: expression
        </td>
        <td>e1 ^ e2 (bitwise xor)</td>
    </tr>

    <tr>
        <td>#call(e1, e2)</td>
        <td>expression</td>
        <td>e1: expression<br>
            e2: stx list of expression expressions
        </td>
        <td>call e1 with arguments from stx list e2</td>
    </tr>

    <tr>
        <td>#case(e1, e2)</td>
        <td>switch</td>
        <td>e1: stx value<br>
            e2: expression
        </td>
        <td>A case in a switch statement. e1 is the value of the case, and
            e2 is the code to be run in this case</td>
    </tr>

    <tr>
        <td>#cast(e1, e2)</td>
        <td>expression</td>
        <td>e1: stx type<br>
            e2: expression
        </td>
        <td>Cast expression e2 to the type specified by e1</td>
    </tr>

    <tr>
        <td>#cond(e1, e2, e3)</td>
        <td>expression</td>
        <td>e1: expression<br>
            e2: expression<br>
            e3: expression
        </td>
        <td>e1 ? e2 : e3</td>
    </tr>

    <tr>
        <td>#container(e1, e2, e3)</td>
        <td>expression</td>
        <td>e1: expression<br>
            e2: type<br>
            e3: expression
        </td>
        <td>@containerof(e1, e2, e3)</td>
    </tr>

    <tr>
        <td>#continue()</td>
        <td>expression</td>
        <td>N/A</td>
        <td>continue statement</td>
    </tr>

    <tr>
        <td>#defaut(e1)</td>
        <td>switch</td>
        <td>e1: expression</td>
        <td>default block of a switch statement</td>
    </tr>

    <tr>
        <td>#define(e1, e2, e3)</td>
        <td>expression</td>
        <td> e1: stx id<br>
             e2: stx list of stx ids or stx ellipsis<br>
             e3: expression
        </td>
        <td>corresponds to an @define defining e1 with arguments
            described by stx list e2 and with code block e3</td>
    </tr>

    <tr>
        <td>#defloc(e1, e2, e3)</td>
        <td>expression</td>
        <td> e1: stx id<br>
             e2: stx list of stx ids or stx ellipsis<br>
             e3: expression
        </td>
        <td>corresponds to an @defloc defining e1 with arguments
            described by stx list e2 and with code block e3</td>
    </tr>

    <tr>
        <td>#defrec(e1, e2)</td>
        <td>expression</td>
        <td> e1: stx id<br>
             e2: stx list of stx ids
        </td>
        <td>corresponds to an @record defining record type e1 with
            fields in stx list e2</td>
    </tr>

    <tr>
        <td>#defstx(e1, e2, e3, e4)</td>
        <td>expression</td>
        <td> e1: stx id<br>
            e2: stx list of stx ids or stx ellipsis<br>
            e3: stx id<br>
            e4: expression<br>
        </td>
        <td>@defstx definition of e1 (the stx id does not include
            the '@') with parameters e2, and id e3 to reference the macro
            body, with e4 containing the macro body</td>
    </tr>

    <tr>
        <td>#deref(e1)</td>
        <td>expression</td>
        <td> e1: expression
        </td>
        <td>dereference e1</td>
    </tr>

    <tr>
        <td>#do(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
            e2: expression
        </td>
        <td>do { ... } while loop. e1 is the block, and e2 is the condition
        </td>
    </tr>

    <tr>
        <td>#dot(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
             e2: stx id
        </td>
        <td>a dot expression, i.e. e1.e2. e2 is the field name. 
        </td>
    </tr>

    <tr>
        <td>#elist(e1, e2)</td>
        <td>stx list</td>
        <td> e1: stx<br>
             e2: stx list
        </td>
        <td>A stx list object.
            #[] or <a href=#fn:Zcons>Zcons</a> are preferred
            to using #elist directly.
        </td>
    </tr>

    <tr>
        <td>#ellipsis()</td>
        <td>stx ellipsis</td>
        <td>N/A</td>
        <td>An ellipsis for varargs functions
        </td>
    </tr>

    <tr>
        <td>#eq(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
             e2: expression
        </td>
        <td>Checks the equality of e1 and e2 (i.e. e1 == e2)
        </td>
    </tr>

    <tr>
        <td>#for(e1, e2, e3, e4)</td>
        <td>expression</td>
        <td> e1: expression<br>
            e2: expression<br>
            e3: expression<br>
            e4: expression<br>
        </td>
        <td>for loop. e1 is the initial condition, e2 is the check to see
            if the loop should continue, e3 is the increment statement, and
            e4 is the loop body
        </td>
    </tr>

    <tr>
        <td>#for(e1, e2, e3, e4)</td>
        <td>expression</td>
        <td> e1: expression<br>
            e2: expression<br>
            e3: expression<br>
            e4: expression
        </td>
        <td>for loop. e1 is the initial condition, e2 is the check to see
            if the loop should continue, e3 is the increment statement, and
            e4 is the loop body
        </td>
    </tr>

    <!--- XXX maybe we should introduce a lhs expression -->
    <tr>
        <td>#g(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
            e2: expression
        </td>
        <td>Assignment of e2 to e1.
        </td>
    </tr>

    <tr>
        <td>#gadd(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
            e2: expression
        </td>
        <td>Assign e1 to e1 plus e2 (e1 += e2).
        </td>
    </tr>

    <tr>
        <td>#gband(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
            e2: expression
        </td>
        <td>Assign e1 to e1 binary and'ed with  e2 (e1 &= e2).
        </td>
    </tr>

    <tr>
        <td>#gbor(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
            e2: expression
        </td>
        <td>Assign e1 to e1 binary or'ed with e2 (e1 |= e2).
        </td>
    </tr>

    <tr>
        <td>#gbxor(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
            e2: expression
        </td>
        <td>Assign e1 to e1 binary xor'ed with e2 (e1 ^= e2).
        </td>
    </tr>

    <tr>
        <td>#gdiv(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
            e2: expression
        </td>
        <td>Assign e1 to e1 divided by e2 (e1 /= e2).
        </td>
    </tr>

    <tr>
        <td>#ge(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
            e2: expression
        </td>
        <td>e1 greater than or equal to e2
        </td>
    </tr>

    <tr>
        <td>#gmod(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
            e2: expression
        </td>
        <td>Assign e1 to e1 mod'ed by e2 (e1 %= e2).
        </td>
    </tr>

    <tr>
        <td>#gmul(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
            e2: expression
        </td>
        <td>Assign e1 to e1 multiplied by e2 (e1 *= e2).
        </td>
    </tr>

    <tr>
        <td>#gshl(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
            e2: expression
        </td>
        <td>Assign e1 to e1 shifted left by e2 (e1 &lt;&lt;= e2).
        </td>
    </tr>

    <tr>
        <td>#gshr(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
            e2: expression
        </td>
        <td>Assign e1 to e1 shifted right by e2 (e1 &gt;&gt;= e2).
        </td>
    </tr>

    <tr>
        <td>#gsub(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
             e2: expression
        </td>
        <td>subtrace e2 from e1
        </td>
    </tr>

    <tr>
        <td>#global(e1)</td>
        <td>expression</td>
        <td> e1: stx list of stx id's<br>
        </td>
        <td>List of defined globals
        </td>
    </tr>

    <tr>
        <td>#goto(e1)</td>
        <td>expression</td>
        <td> e1: stx id<br>
        </td>
        <td>goto the given id
        </td>
    </tr>

    <tr>
        <td>#gt(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
             e2: expression
        </td>
        <td>checks if e1 is strictly greater than e2
        </td>
    </tr>

    <tr>
        <td>#gt(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
             e2: expression
        </td>
        <td>checks if e1 is strictly greater than e2
        </td>
    </tr>

    <tr>
        <td>#if(e1, e2, e3)</td>
        <td>expression</td>
        <td> e1: expression<br>
            e2: expression<br>
            e3: expression
        </td>
        <td>Runs e1, then if e1 is nil or 0, run e3, otherwise run e2
        </td>
    </tr>

    <tr>
        <td>#label(e1)</td>
        <td>expression</td>
        <td> e1: stx id
        </td>
        <td>Tag this line as a target for a goto statement
        </td>
    </tr>

    <tr>
        <td>#lambda(e1, e2)</td>
        <td>expression</td>
        <td> e1: stx list of stx id<br>
             e2: expression
        </td>
        <td>defines a procedure with parameters e1 and block e2
        </td>
    </tr>

    <tr>
        <td>#land(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
             e2: expression
        </td>
        <td>computes the result of e1 logically and'ed to e2
        </td>
    </tr>

    <tr>
        <td>#le(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
             e2: expression
        </td>
        <td>computes the result of e1 less than or equal to e2
        </td>
    </tr>

    <tr>
        <td>#list(e1)</td>
        <td>expression</td>
        <td> e1: stx list of expression
        </td>
        <td>creates a cqct list
        </td>
    </tr>

    <tr>
        <td>#pair(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
             e2: expression
        </td>
        <td>creates a pair
        </td>
    </tr>

    <tr>
        <td>#lor(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
             e2: expression
        </td>
        <td>logical or of the results of e1 and e2
        </td>
    </tr>

    <tr>
        <td>#lt(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
             e2: expression
        </td>
        <td>computes e1 strictly less than e2
        </td>
    </tr>

    <tr>
        <td>#mcall(e1, e2, e3)</td>
        <td>expression</td>
        <td> e1: stx id<br>
            e2: stx list of expression<br>
            e3: expression
        </td>
        <td>
        </td>
    </tr>

    <tr>
        <td>#match(e1, e2)</td>
        <td>switch</td>
        <td> e1: pattern<br>
            e2: expression
        </td>
        <td>A match statement inside of a switch statement
        </td>
    </tr>

    <tr>
        <td>#mkctype(e1)</td>
        <td>expression</td>
        <td> e1: typename
        </td>
        <td>a @typename statement
        </td>
    </tr>

    <tr>
        <td>#mod(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
             e2: expression
        </td>
        <td>A mod statement (e1 % e2)
        </td>
    </tr>

    <tr>
        <td>#mul(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
             e2: expression
        </td>
        <td>A multiply statement (e1 * e2)
        </td>
    </tr>

    <tr>
        <td>#neq(e1, e2)</td>
        <td>expression</td>
        <td> e1: expression<br>
             e2: expression
        </td>
        <td>A not equal statement (e1 != e2)
        </td>
    </tr>

    <tr>
        <td>#nop()</td>
        <td>expression</td>
        <td>N/A
        </td>
        <td>A no-op (operation that does nothing)
        </td>
    </tr>

    <tr>
        <td>#nil()</td>
        <td>expression</td>
        <td>N/A
        </td>
        <td>A statement that evaluates to nil
        </td>
    </tr>

    <tr>
        <td>#postdec(e1)</td>
        <td>expression</td>
        <td>e1: stx id
        </td>
        <td>Return the value of e1 then decrement e1
        </td>
    </tr>

    <tr>
        <td>#postinc(e1)</td>
        <td>expression</td>
        <td>e1: stx id
        </td>
        <td>Return the value of e1 then increment e1
        </td>
    </tr>

    <tr>
        <td>#predec(e1)</td>
        <td>expression</td>
        <td>e1: stx id
        </td>
        <td>Decrement e1 then return the value
        </td>
    </tr>

    <tr>
        <td>#preinc(e1)</td>
        <td>expression</td>
        <td>e1: stx id
        </td>
        <td>Increment e1 then return the value
        </td>
    </tr>

    <tr>
        <td>#ref(e1)</td>
        <td>expression</td>
        <td>e1: expression
        </td>
        <td>Return a pointer to the expression e1 (&amb;e1)
        </td>
    </tr>

    <tr>
        <td>#ret()</td>
        <td>expression</td>
        <td>N/A
        </td>
        <td>Return statement
        </td>
    </tr>

    <tr>
        <td>#scope(e1)</td>
        <td>expression</td>
        <td>e1: expression
        </td>
        <td>A scope (often paired with a block)
        </td>
    </tr>

    <tr>
        <td>#shl(e1, e2)</td>
        <td>expression</td>
        <td>e1: expression<br>
             e2: expression
        </td>
        <td>Shift e1 left by e2 bits
        </td>
    </tr>

    <tr>
        <td>#shr(e1, e2)</td>
        <td>expression</td>
        <td>e1: expression<br>
             e2: expression
        </td>
        <td>Shift e1 right by e2 bits
        </td>
    </tr>

    <tr>
        <td>#sizeofe(e1)</td>
        <td>expression</td>
        <td>e1: expression
        </td>
        <td>Size of the expression e1
        </td>
    </tr>

    <tr>
        <td>#sizeoft(e1)</td>
        <td>expression</td>
        <td>e1: typename
        </td>
        <td>Size of the type e1
        </td>
    </tr>

    <tr>
        <td>#stx(e1, e2)</td>
        <td>expression</td>
        <td>e1: stx id <br>
             e2: stx list of expressions
        </td>
        <td>An stx expression with id e1 (without the '#') and
            parameters e2
        </td>
    </tr>

    <tr>
        <td>#sub(e1, e2)</td>
        <td>expression</td>
        <td>e1: expression <br>
             e2: expression
        </td>
        <td>Subtrace e2 from e1
        </td>
    </tr>

    <tr>
        <td>#switch(e1, e2)</td>
        <td>expression</td>
        <td>e1: expression <br>
             e2: stx list of stx switch
        </td>
        <td>Switch statement, switching on e1 with cases defined
            by e2 (match statements included)
        </td>
    </tr>

    <tr>
        <td>#tab(e1)</td>
        <td>expression</td>
        <td>e1: stx list of two element stx lists of evaluable
        </td>
        <td>Defines a new table, where keys are the first element of
            each of the provided lists that are mapped to the second
            element of each of the provided lists
        </td>
    </tr>

    <tr>
        <td>#ticke(e1, e2)</td>
        <td>expression</td>
        <td>e1: stx id<br>
            e2: stx id
        </td>
        <td>A tick expression to reference a value in a domain,
            i.e. t`x, where x is a symbol defined in the domain t
        </td>
    </tr>

    <tr>
        <td>#tickt(e1, e2)</td>
        <td>type</td>
        <td>e1: stx id<br>
            e2 stx id
        </td>
        <td>A tick expression to reference a type in a domain,
            i.e. t`x, where x is a type defined in the domain t
        </td>
    </tr>

    <tr>
        <td>#typeofe(e1)</td>
        <td>expression</td>
        <td>e1: expression
        </td>
        <td>Returns the typeof the computed expression e1
        </td>
    </tr>

    <tr>
        <td>#typeoft(e1)</td>
        <td>expression</td>
        <td>e1: type
        </td>
        <td>Returns the typeof the type e1
        </td>
    </tr>

    <tr>
        <td>#uminus(e1)</td>
        <td>expression</td>
        <td>e1: expression
        </td>
        <td>Unary minus of the given expression
        </td>
    </tr>

    <tr>
        <td>#unot(e1)</td>
        <td>expression</td>
        <td>e1: expression
        </td>
        <td>Unary not
        </td>
    </tr>

    <tr>
        <td>#uplus(e1)</td>
        <td>expression</td>
        <td>e1: expression
        </td>
        <td>Unary plus (i.e. "+x");
        </td>
    </tr>

    <tr>
        <td>#utwiddle(e1)</td>
        <td>expression</td>
        <td>e1: expression
        </td>
        <td>Unary binary not (i.e. "~x");
        </td>
    </tr>

    <tr>
        <td>#while(e1, e2)</td>
        <td>expression</td>
        <td>e1: expression<br>
            e2: expression
        </td>
        <td>While loop with condition e1 and body e2
        </td>
    </tr>

    <tr>
        <td>#xcast(e1, e2)</td>
        <td>expression</td>
        <td>e1: expression<br>
            e2: expression
        </td>
        <td>Extended cast of e2 to the domain or type computed by e1
        </td>
    </tr>



</table>
</div>




<h4 id="sec:storage">Storage Management</h4>

<p>
Storage in the L1 implementation of Cinquecento is
managed by a generational stop-the-world copying
collector.  Its design draws on published
descriptions of storage management in <em>Chez Scheme</em>
[<a href="#bib:csug">CSUG</a>, <a href="#bib:bibop">BiBOP</a>,
<a href="#bib:guardian">Guardians</a>].
</p>

<p>
User functions related to storage management are:
</p>


<div class="docitem" id="fn:gc">
<div class="proto">
<div class="function">
<span class="id">gc()</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Runs the collector.
</div>
</div>

<div class="docitem" id="fn:postgc">
<div class="proto">
<div class="function">
<span class="id">postgc()</span>
</div>
<div class="returns">
<span class="type">ignored</span>
</div>
</div>
<div class="desc">
The system calls the
nullary function <span class="id">postgc</span>
after each collection cycle.
By default,
<span class="id">postgc</span> is a function that
returns <span class="val">nil</span>.  Programs may
rebind <span class="id">postgc</span> to another function
that performs work intended to be coordinated with
collection.  Since other code may independently modify
<span class="id">postgc</span>, the
old value of <span class="id">postgc</span> should be called
at some point during the evaluation of its replacement.  For example,
the first time the function
<span class="fnindex"><a href="#fn:finalize">finalize</a></span>
is called, it replaces <span class="id">postgc</span> with a function
that calls the previous value
of <span class="id">postgc</span> and then services
any registered finalizers.
</div>
</div>


<div class="docitem" id="fn:compact">
<div class="proto">
<div class="function">
<span class="id">compact()</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
This function moves all currently live objects to a
region of memory that will never be collected again.
Its effect is to spare the collector most of the
overhead of ever scanning these objects again, at the
cost of their perpetual storage.  Mutable objects
preserved by <span class="id">compact</span> that later
acquire references to objects in younger generations
may still be scanned during future collections.
</div>
</div>

<div class="docitem" id="fn:gclock">
<div class="proto">
<div class="function">
<span class="id">gclock(<span class="arg">val</span>)</span>
</div>
<div class="function">
<span class="id">gcunlock(<span class="arg">val</span>)</span>
</div>
<div class="param">
<span class="arg">val</span>: <span class="type">any value</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Prevents the storage associated
with <span class="arg">val</span> from being reclaimed
or moved by the collector.  Locking incurs significant
space and execution overhead; it should be done
sparingly.  An object may be locked multiple times.
A locked object
may be later unlocked by an equal number of calls to <span class="id">gcunlock</span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:gcstats">gcstats()</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Prints information about the current state of the storage manager.
</div>
</div>


<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:mkguardian">mkguardian()</span>
</div>
<div class="returns">
<span class="type">procedure</span>
</div>
</div>
<div class="desc">
Guardians protect objects from reclamation.  The
semantics and interface of the guardians provided by L1
are very similar to those in published descriptions of <em>Chez Scheme</em>
[<a href="#bib:csug">CSUG</a>].
</div>
</div>

<div class="docitem" id="fn:finalize">
<div class="proto">
<div class="function">
<span class="id">finalize(v, fn)</span>
</div>
<div class="param">
<span class="arg">v</span>: <span class="type">any value</span>
</div>
<div class="param">
<span class="arg">fn</span>: <span class="type">function or nil</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">

Registers a finalizer function to be called before the
collector reclaims storage for the
value <span class="arg">v</span>.  The collector schedules a
call to the finalizer <span class="arg">fn</span> some
time after determining that <span class="arg">v</span>
is unreachable.  The sole argument passed
to <span class="arg">fn</span>
is <span class="arg">v</span>.

<p>
At the time it is passed to the finalizer, the
value <span class="arg">v</span> is unreachable but
otherwise has no special status.  In particular, the
finalizer may reintroduce references to the value,
e.g. by storing it in a hash table.  The finalizer will
not be called again for such a reincarnated value;
a new call to <span class="id">finalize</span>
must be arranged.
</p>

<p>
Only one finalizer can be associated with a value at
a time; <span class="id">finalize</span> replaces
the previously registered finalizer, if any.
To disassociate a finalizer from a value <span class="arg">v</span>,
call <span class="id">finalize(<span class="arg">v</span>, nil)</span>.
</p>

<p>
Finalizers are implemented through <a href="#fn:mkguardian">guardians</a>
and <span class="fnindex"><a href="#fn:postgc">postgc</a></span>.
</p>

</div>
</div>

<h4 id="sec:perf">Instrumentation</h4>

<p>
The function <span class="id">statistics</span> provides
access to internal instrumentation of the L1 runtime.
</p>

<div class="docitem" id="fn:statistics">
<div class="proto">
<div class="function">
<span class="id">statistics()</span>
</div>
<div class="returns">
<span class="type">table</span>
</div>
</div>
<div class="desc">
<p>
Returns a table containing instrumentation data for the
current L1 execution.  Each key/value pair of the table
is a separate instrumentation report.  Keys are cids,
identifying the form of instrumentation.  The type of
the corresponding value depends on the instrumentation.
Instrumentation reports include:
</p>

<div class="table-short">
<table>
<tr>
<td>
<span class="id">exetime</span>
</td>
<td>
Elapsed wall clock time in microseconds spent in L1 execution,
including calls to foreign functions,
system calls,
collection and other storage management.
</td>
</tr>
<tr>
<td>
<span class="id">collectime</span>
</td>
<td>
The portion of <span class="id">exetime</span>,
in microseconds, spent in the L1 collector.
</td>
</tr>
</table>
</div>

</div>
</div>


<h4 id="sec:system">System Functions</h4>

<p>
This section documents various system-level functions.
</p>

<div class="docitem" id="fn:l1version">
<div class="proto">
<div class="function">
<span class="id">l1version()</span>
</div>
<div class="returns">
<span class="type">string</span>
</div>
</div>
<div class="desc">

Returns a string describing the L1 system version.

The string has the format

<div class="code">
<pre>
<span class="val">"L1 version <span class="arg">commit</span> <span class="arg">date</span>"</span>
</pre>
</div>

where <span class="val"><span class="arg">commit</span></span>
is the version control commit identifier,
and <span class="val"><span class="arg">date</span></span>
is the commit date.
</div>
</div>

<div class="docitem" id="fn:errno">
<div class="proto">
<div class="function">
<span class="id">errno()</span>
</div>
<div class="returns">
<span class="type">list</span>
</div>
</div>
<div class="desc">
Returns a list of two elements that describe the most
recent OS-level error caused by execution of an L1
system function.  The first element is a cvalue whose
value is the <span class="arg">errno</span> value
returned by the operating system.  The second element
is string containing the textual description of the
error.
</div>
</div>

<div class="docitem" id="fn:exit">
<div class="proto">
<div class="function">
<span class="id">exit(<span class="arg">status</span>)</span>
</div>
<div class="param">
<span class="arg">status</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">does not return</span>
</div>
</div>
<div class="desc">
Causes the Cinquecento evaluator to exit with status <span class="arg">status</span>.
</div>
</div>

<div class="docitem" id="fn:fork">
<div class="proto">
<div class="function">
<span class="id">fork()</span>
</div>
<div class="returns">
<span class="type">cvalue</span>
</div>
</div>
<div class="desc">
Causes the process in which the Cinquecento evaluator is running to fork.
The call returns <span class="val">0</span> in the created process (child),
and the process identifier of the child in the original process.
</div>
</div>

<div class="docitem" id="fn:waitpid">
<div class="proto">
<div class="function">
<span class="id">waitpid(<span class="arg">pid</span>,<span class="arg">options</span>)</span>
</div>
<div class="returns">
<span class="type">list of two cvalues</span>
</div>
</div>
<div class="desc">
Returns the result of calling the system call <span class="val">waitpid</span>.
<span class="arg">Pid</span> and <span class="arg">options</span>
are passed, respectively, as the pid and options arguments to
<span class="val">waitpid</span>.  The return value is
a list of two cvalues representing the two values
return <span class="val">waitpid</span>: the process
identifer for the process whose change has been
reported, and the status descriptor that encodes the change.
</div>
</div>

<div class="docitem" id="fn:popen">
<div class="proto">
<div class="function">
<span class="id">popen(<span class="arg">arg</span>,...[,<span class="arg">flags</span>])</span>
</div>
<div class="param">
<span class="arg">arg</span>: <span class="type">string</span>
</div>
<div class="param">
<span class="arg">flags</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">list of file descriptors</span>
</div>
</div>
<div class="desc">
<p>
Executes a command in a new process with I/O connected
to the calling process.  The
arguments <span class="arg">arg ...</span>  form the
elements of the argument vector used to create (via
double <span class="id">fork</span> then <span class="id">execve</span>)
the new process image.
There is no way to affect its enviornment.
There is no standard way to obtain the exit status of the process.
An error is raised if the process cannot be created.
</p>

<p>
By default, <span class="id">popen</span> returns a
list of three file descriptors connected (via unix
domain sockets in stream mode) to the standard input,
standard output, and standard error, respectively, of
the new process.
<span class="arg">Flags</span> is a bitmask of flags
used to specify alternative plumbing.  (We show
internal names for these flags, but these are not
defined in any library.)  If bit zero is set
(<span class="id">PopenNoErr</span>), standard error is
redirected to <span class="id">/dev/null</span>, and is
not represented in the returned descriptor list.  If
bit one is set (<span class="id">PopenStderr</span>),
standard error is not redirected, but rather is left
connected to the standard error of the calling
process,.  Likewise, if bit two is set
(<span class="id">PopenStdout</span>), standard output
is left connected to the standard output of the calling
process.  If bit three is set
(<span class="id">PopenFullDuplex</span>), standard
input and output of the new process are connected to
the same file descriptor. If bit four is set (
<span class="id">PopenSession</span>), the new process
is the leader of a new unix session.  Finally, if bit
five is set (<span class="id">PopenStderrOnStdout</span>,
stderr in the new process is connected to the same file
descriptor as stdout.
</p>

<p>
The definition of <span class="id">popen</span> is
likely to change in the future. The current definition
differs substantially from the well known standard C
library call of the same name.
</p>

</div>
</div>

<div class="docitem" id="fn:chdir">
<div class="proto">
<div class="function">
<span class="id">chdir(<span class="arg">dir</span>)</span>
</div>
<div class="param">
<span class="arg">dir</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Changes the current working directory of the Cinquecento evaluator process
to <span class="arg">dir</span>.
</div>
</div>

<div class="docitem" id="fn:cwd">
<div class="proto">
<div class="function">
<span class="id">cwd()</span>
</div>
<div class="returns">
<span class="type">string</span>
</div>
</div>
<div class="desc">
Returns the current working directory of the Cinquecento evaluator process.
</div>
</div>

<div class="docitem" id="fn:getpid">
<div class="proto">
<div class="function">
<span class="id">getpid()</span>
</div>
<div class="returns">
<span class="type">cvalue</span>
</div>
</div>
<div class="desc">
Returns the process identifier of the process in which
the Cinquecento system is running.
</div>
</div>

<div class="docitem" id="fn:gettimeofday">
<div class="proto">
<div class="function">
<span class="id">gettimeofday()</span>
</div>
<div class="returns">
<span class="type">cvalue</span>
</div>
</div>
<div class="desc">
Returns the current time in microseconds.
</div>
</div>

<div class="docitem" id="fn:getenv">
<div class="proto">
<div class="function">
<span class="id">getenv(var)</span>
</div>
<div class="param">
<span class="arg">var</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">string or nil</span>
</div>
</div>
<div class="desc">
Returns the value associated with the variable <span class="arg">var</span>
in the environment of the calling process, or <span class="val">nil</span>
if the variable is undefined.
</div>
</div>

<div class="docitem" id="fn:setenv">
<div class="proto">
<div class="function">
<span class="id">setenv(var,val)</span>
</div>
<div class="param">
<span class="arg">var</span>: <span class="type">string</span>
</div>
<div class="param">
<span class="arg">val</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Sets the value associated with the variable <span class="arg">var</span>
in the environment of the calling process to <span class="arg">val</span>,
creating the variable if necessary.
</div>
</div>

<div class="docitem" id="fn:environ">
<div class="proto">
<div class="function">
<span class="id">environ()</span>
</div>
<div class="returns">
<span class="type">list of string</span>
</div>
</div>
<div class="desc">
Returns the environment of the calling process as list each of whose elements
is a string of the form <span class="val">"<span class="arg">VAR</span>=<span class="arg">VAL</span>"</span>, where <span class="arg">VAR</span>
is the name of a defined environment variable  and 
<span class="arg">VAL</span> is the corresponding value.
</div>
</div>


<div class="docitem" id="fn:uname">
<div class="proto">
<div class="function">
<span class="id">uname()</span>
</div>
<div class="returns">
<span class="type">list of strings</span>
</div>
</div>
<div class="desc">
Returns the system "uname" information as list of four
strings: operating system name, operating system
release, operating system version, and hardware
identifier.
</div>
</div>


<div class="docitem" id="fn:loadpath">
<div class="proto">
<div class="function">
<span class="id">loadpath()</span>
</div>
<div class="returns">
<span class="type">list</span>
</div>
</div>
<div class="desc">
Returns the current load path as a list of strings.
</div>
</div>


<div class="docitem" id="fn:loadwhich">
<div class="proto">
<div class="function">
<span class="id">loadwhich(file)</span>
</div>
<div class="returns">
<span class="type">string</span> or <span class="type">nil</span>
</div>
</div>
<div class="desc">
Returns the first entry in the load path matching <span class="arg">file</span>.
Returns nil if no match is found in the load path.
</div>
</div>


<div class="docitem" id="fn:setloadpath">
<div class="proto">
<div class="function">
<span class="id">setloadpath(l)</span>
</div>
<div class="param">
<span class="arg">l</span>: <span class="type">list</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Sets the current load path to the list of strings <span class="arg">l</span>.
</div>
</div>


<div class="docitem" id="fn:backtrace">
<div class="proto">
<div class="function">
<span class="id">backtrace()</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Prints to the current standard output a formatted
snapshot of the Cinquecento call stack.
</div>
</div>

<div class="docitem" id="fn:rand">
<div class="proto">
<div class="function">
<span class="id">rand(<span class="arg">max</span>)</span>
</div>
<div class="param">
<span class="arg">max</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">cvalue</span>
</div>
</div>
<div class="desc">
Returns a random integer in the range [0...<span
class="arg">max</span>).  It is an error if <span
class="arg">max</span> exceeds the
implementation-defined maximum random number.
</div>
</div>

<div class="docitem" id="fn:randseed">
<div class="proto">
<div class="function">
<span class="id">randseed(<span class="arg">seed</span>)</span>
</div>
<div class="param">
<span class="arg">seed</span>: <span class="type">cvalue</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Seeds the random number generator used by <span class="id">rand</span>.
The seed value <span class="val">1</span> restores the
random number generator to its initial state.
</div>
</div>

<div class="docitem" id="fn:resettop">
<div class="proto">
<div class="function">
<span class="id">resettop()</span>
</div>
<div class="returns">
<span class="type">nil</span>
</div>
</div>
<div class="desc">
Resets the top-level environment to the initial
bindings established when the Cinquecento evaluator is
started.  All user-defined bindings are destroyed.
</div>
</div>



<h4 id="sec:mash">Compression and Hashing</h4>

<p>
This section documents functions related to compression and hashing.
</p>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:inflate">inflate(<span class="arg">buf</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:inflatezlib">inflatezlib(<span class="arg">buf</span>)</span>
</div>
<div class="param">
<span class="arg">buf</span>: <span class="type">string</span> or <span class="type">cvalue</span> of type <span class="type">char*</span> or <span class="type">unsigned char*</span>
</div>
<div class="returns">
<span class="type">string</span>
</div>
</div>
<div class="desc">
<span class="id">inflate</span> decompresses the
contents of the string <span class="arg">buf</span> using the deflate
compression algorithm (which is used for gzip, zip, and
zlib files).  <span class="id">inflatezlib</span> is
like <span class="id">inflate</span>, but operates on
strings with a zlib header and trailer.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:sha1">sha1(<span class="arg">buf</span>)</span>
</div>
<div class="param">
<span class="arg">buf</span>: <span class="type">string</span>
</div>
<div class="returns">
<span class="type">string</span>
</div>
</div>
<div class="desc">
Returns the SHA-1 hash of <span class="arg">buf</span>.
</div>
</div>


<h4 id="sec:stdlib">Standard Libraries</h4>

<p>
The L1 implementation of Cinquecento comes with several 
standard libraries stored
in the lib/ subdirectory. Since they are included in
l1's load path, these libraries are loaded via the command:
</p>
<div class="code">
@include &lt;<span class="arg">library</span>&gt;<br />
</div>

<p>
In <a href=libs.html>this document</a>, the APIs for many of
the provided libraries are specified.
</p>


<h4 id="sec:runtime">L1 Executable</h4>

<p>
The L1 executable is a command-line program that
provides an interactive read-eval-print-loop interface
to Cinquecento.  It is built by default when the L1
source distribution is compiled.
</p>

<h5 id="sec:loadpath">The load path</h5>

<p>
The system load path is a list of paths that is searched
in order for any input file that is included with the form:
</p>

<div class="code">
@include &lt;<span class="arg">filename</span>&gt;<br />
</div>

<p>
The load path may be inspected and changed from within
Cinquecento with the functions
<a href="#fn:loadpath">loadpath</a>
and <a href="#fn:setloadpath">setloadpath</a>.
</p>

<p>
The default load path consists of one path:
<span class="val"><span class="arg">L1PATH</span>/lib</span>,
where <span class="val"><span class="arg">L1PATH</span></span>
is an absolute path to the directory containing the L1
executable.  L1 attempts to
set <span class="val"><span class="arg">L1PATH</span></span>
to the directory in which the actual L1 executable
resides, even if it was invoked through a symbolic
link.
</p>

<p>
Two L1 command-line options affect the load path.  First,
each occurrence of a command line option of the form
</p>

<div class="code">
-l <span class="arg">path</span>
</div>

<p>
prepends <span class="val"><span class="arg">path</span></span>
to the load path.  Each occurrence is processed in the
order in which it appears.  Second, if
the <span class="val">-s</span> option is given, then
the default load path is <em>not</em> included in the
load path; instead, the load path consists only of
paths specified with the <span class="val">-l</span>
option.
</p>

<p>
Two additional mechanisms override the use of
<span class="val"><span class="arg">L1PATH</span>/lib</span>
as the default path:
</p>

<ul>

<li>
When L1 is built, if the preprocessor variable <span class="val">LIBDIR</span> is defined
for the compilation of the l1 driver (main.c), then the
default load path is initialized to its value, which
must be a string containing colon-separated list of
directories.
</li>

<li>
When L1 is executed, if the environment
variable <span class="val">L1LIBPATH</span> is defined,
then its value, which must be a colon-separated list of
directories, is appended to the path specified
by <span class="val">LIBDIR</span>, if any.
</li>

</ul>

<p>
If neither <span class="val">LIBDIR</span>  (at compile
time) nor <span class="val">L1LIBPATH</span> (at run
time) is defined, then the default load path is
set to the list containing the single directory
<span class="val"><span class="arg">L1PATH</span>/lib</span>,
as described above.
</p>

<h5>The prelude</h5>

<p>
Before the first evaluation of a user expression, the
L1 evaluator loads the <em>prelude</em> by implicitly evaluating the form
</p>

<div class="code">
@include &lt;<span class="arg">prelude.cqct</span>&gt;<br />
</div>

<p>
The library distributed with L1 includes the
version of <span class="val">prelude.cqct</span> that the
evaluator expects to load with this evaluation.
This file defines an increasing portion of the
default top-level environment of the Cinquecento
evaluator, including many functions, name spaces, and
other top-level variables described in this manual.
</p>

<p>
The prelude can be suppressed by passing the <span class="val">-s</span>
option to L1.
</p>

<h4 id="sec:cinterface">C Interface</h4>

<p>
Note: This section is significantly out of date with the implementation.
</p>

<p>
The following functions comprise the C interface to the
L1 implementation of Cinquecento.  The interface is defined in 
<span class="val">cqct.h</span>.
For an example of
how to use the interface, see the file <span
class="val">main.c</span> in the L1 implementation, which
implements the L1 read-eval-print loop.
The functions are described below in roughly the order in
which a typical program would call them.
</p>

<p>
The interface operates on values of several opaque
types.
</p>

<div class="table">
<table>
<tr>
<td><span class="id">Toplevel</span></td>
<td>Toplevel environment</td>
</tr>
<tr>
<td><span class="id">Val</span></td>
<td>Cinquecento value</td>
</tr>
<tr>
<td><span class="id">VM</span></td>
<td>Evaluator for compiled Cinquecento expressions</td>
</tr>
<tr>
<td><span class="id">Xfd</span></td>
<td>File descriptor representation</td>
</tr>
</table>
</div>

<p>
A <span class="id">Val</span> is pointer to a structure
allocated and managed by the L1 storage manager.  Its
fields should not be accessed.  Since the L1 storage
manager is based on a copying garbage collector, the
value of a <span class="id">Val</span> (<em>i.e.</em>,
the address of the referenced structure) may change
across calls to functions that invoke the L1 evaluator,
including 
<span class="fnindex"><a href="#fn:cqctcompile">cqctcompile</a></span>,
<span class="fnindex"><a href="#fn:cqctcallfn">cqctcallfn</a></span>,
<span class="fnindex"><a href="#fn:cqctcallthunk">cqctcallthunk</a></span>,
and <span class="fnindex"><a href="#fn:cqcteval">cqctcalleval</a></span>.

The function <span class="fnindex"><a href="#fn:cqctgcpersist">cqctgcpersist</a></span>
can be called to lock the location in memory of 
an individual <span class="id">Val</span>,
but this operation creates storage and run-time overhead
for the storage manager.
</p>

<p>
A <span class="id">Val</span> can represent any type of
Cinquecento value.  The <span class="id">Qkind</span>
type defines enumeration constants for each valid type:
</p>

<div class="code">
<pre>
typedef
enum {
	Qundef = 0,	/* the undefined value (private) */
	Qnil,		/* the nil value */
	Qas,		/* address space */
	Qbox,		/* box (private) */
	Qcl,		/* closure */
	Qcode,		/* code object (private) */
	Qcval,		/* cvalue */
	Qdom,		/* domain */
	Qexpr,		/* syntax */
	Qfd,		/* file descriptor */
	Qlist,		/* list */
	Qns,		/* name space */
	Qpair,		/* pair (unused) */
	Qrange,		/* range */
	Qrd,		/* record descriptor */
	Qrec,		/* record */
	Qstr,		/* string */
	Qtab,		/* table */
	Qvec,		/* vector */
	Qxtn,		/* ctype */
	Qnkind		/* invalid (# of kinds) */
} Qkind;
</pre>
</div>


<p>
Use the <span class="val">Vkind</span> macro
to determine the 
type of a <span class="id">Val</span>:
</p>

<div class="docitem" id="fn:Vkind">
<div class="proto">
<div class="function">
<span class="id">Qkind Vkind(Val v)</span>
</div>
</div>
<div class="desc">
This macro evaluates to the <span class="id">Qkind</span>
value corresponding to the type of the value <span class="arg">v</span>.
</div>
</div>

<p>
An <span class="id">Xfd</span> is a structure whose
fields define an interface to an open file descriptor.
The Cinquecento initializer,
<span class="id"><a href="#fn:cqctinit">cqctinit</a></span> uses its <span class="id">Xfd</span>
parameter to override the default destination of
standard I/O.
</p>

<div class="code">
<pre>
typedef struct Xfd Xfd;
struct Xfd {
	uint64_t (*read)(Xfd*, char*, uint64_t);
	uint64_t (*write)(Xfd*, char*, uint64_t);
	void (*close)(Xfd*);
	int fd;
};
</pre>
</div>

<p>
Each function is passed the <span class="id">xfd</span>
from which it was referenced.

The <span class="id">fd</span> is a convenience for the user;
the system does not use its value.

The other arguments to <span class="id">read</span>
and <span class="id">write</span> are a pointer to the
data buffer and the number of bytes to be transferred;
these functions should return the number of bytes
actually transferred or <span class="id">(uint64_t)-1</span> on error.

The function <span class="id">close</span>
is called when the system decides to close the file descriptor.

Any of the functions in an
<span class="id">Xfd</span> may be <span class="id">NULL</span>;
if the system needs to call a <span class="id">NULL</span> function, it becomes a no-op.
</p>

<div class="docitem" id="fn:cqctinit">
<div class="proto">
<div class="function">
<span class="id">Toplevel* cqctinit(char **<span class="arg">loadpath</span>, 
Xfd *<span class="arg">in</span>, 
Xfd *<span class="arg">out</span>, 
Xfd *<span class="arg">err</span>)</span>
</div>
</div>
<div class="desc">
This function must be called first.  It allocates
and returns an initialized Cinquecento top-level environment
containing bindings for all built-in functions and
other values.  It also initializes the Cinquecento
storage manager.  If <span class="arg">loadpath</span> is non-NULL,
it is the vector of directories in which the
the @include &lt;<span class="arg">filename</span>>
form searches for <span class="arg">filename</span>; its final element must be NULL.
If <span class="arg">in</span> is non-NULL,
it specifies the input file to which the
the Cinquecento <span class="id">stdin</span> file descriptor
is bound; otherwise its default value is the standard input of the host
process.
Similarly, <span class="arg">out</span>
and <span class="arg">err</span>
specify the Cinquecento <span class="id">stdout</span>
and <span class="id">stderr</span> descriptors,
which are otherwise default to standard output and error.
</div>
</div>

<div class="docitem" id="fn:cqctfaulthook">
<div class="proto">
<div class="function">
<span class="id">int cqctfaulthook(void (*<span class="arg">fn</span>)(void), int <span class="arg">in</span>)</span>
</div>
</div>
<div class="desc">
In the event of a non-recoverable error in the
Cinquecento system, functions previously registered by
this interface are called in reverse order of their registration.
When <span class="arg">in</span> is non-zero, this
function registers <span class="arg">fn</span>;
when <span class="arg">in</span> is
zero, <span class="arg">fn</span> is unregistered.  At
most 4 functions can be registered.  When a
non-recoverable error occurs, if no functions are
registered, or if each registered function returns, the
system stops executing in an unspecified manner.
Programs wishing to regain control should register a
function that performs a non-local escape.
<span class="id">Cqctfaulthook</span> returns non-zero
if there an error occurs during (un)registration.
</div>
</div>


<div class="docitem" id="fn:cqctmkvm">
<div class="proto">
<div class="function">
<span class="id">VM* cqctmkvm(Toplevel *<span class="arg">top</span>)</span>
</div>
</div>
<div class="desc">
Returns a new Cinquecento evaluator initialized with
the top-level environment bound
to <span class="arg">top</span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctcompile">Val cqctcompile(char *<span class="arg">expr</span>,
char *<span class="arg">src</span>,
Toplevel *<span class="arg">top</span>,
char *<span class="arg">argsid</span>)</span>
</div>
</div>
<div class="desc">
Compiles Cinquecento code in the string
<span class="arg">expr</span> and returns a function
that, when called, executes the code.
If <span class="arg">argsid</span> is null, the returned
function takes no arguments; otherwise it is a variable arity
function whose argument list is bound to a parameter
whose name is the string pointed to <span class="arg">argsid</span>.
If <span class="arg">src</span> is non-zero, it will
be printed during error formatting as a location
identifier for <span class="arg">str</span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctcallfn">int cqctcallfn(VM *<span class="arg">vm</span>, Val <span class="arg">fn</span>, int <span class="arg">argc</span>, Val *<span class="arg">argv</span>, Val *<span class="arg">rv</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctcallthunk">int cqctcallthunk(VM *<span class="arg">vm</span>, Val <span class="arg">thunk</span>, Val *<span class="arg">rv</span>)</span>
</div>
</div>

<div class="desc">

<span class="id">Cqctcallfn</span> calls <span class="arg">fn</span>,
passing the <span class="arg">argc</span> arguments stored in the
array <span class="arg">argv</span>.  On success, the value returned
by <span class="arg">fn</span> is stored in the value pointed to by
<span class="arg">rv</span> and the call returns <span
class="val">0</span>.  If an error occurs, the call returns <span
class="val">-1</span>.

</div>

<div class="desc">
<span class="id">Cqctcallthunk</span> calls <span
class="arg">thunk</span>.  On success, the value returned by <span
class="arg">thunk</span> is stored in the value pointed to by <span
class="arg">rv</span> and the call returns <span class="val">0</span>.
If an error occurs, the call returns <span class="val">-1</span>.
</div>

</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqcteval">int cqcteval(VM *<span class="arg">vm</span>, char *<span class="arg">str</span>, char *<span class="arg">whence</span>, Val *<span class="arg">rv</span>)</span>
</div>
</div>

<div class="desc">
<span class="id">Cqcteval</span> composes
<span class="id">cqctparsestr</span>,
<span class="id">cqctcompile</span>, and
<span class="id">cqctcallthunk</span>.
The Cinquecento expression <span class="arg">str</span> is parsed, compiled, and executed.
On success, the value of the expression
is stored in the value pointed to by
<span class="arg">rv</span> and the call returns <span class="val">0</span>.
If an error occurs, the call returns <span class="val">-1</span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctsprintval">char* cqctsprintval(VM *<span class="arg">vm</span>, Val <span class="arg">v</span>)</span>
</div>
</div>
<div class="desc">
Prints the value <span class="arg">v</span> into a freshly allocated C string;
the
caller is responsible for freeing the returned string
with <span class="fnindex"><a href="#fn:cqctfreecstr">cqctfreecstr</a></span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctvalcbase">Cbase cqctvalcbase(Val <span class="arg">v</span>)</span>
</div>
</div>
<div class="desc">
Returns the name of the base C type of the cvalue
<span class="arg">v</span>.  The result is undefined
if <span class="arg">v</span> is not a cvalue.
The enumerated type <span class="id">Cbase</span> defines
the type names used by the system:
<div class="code">
<pre>
typedef
enum Cbase {
	Vundef=0,
	Vchar,
	Vshort,
	Vint,
	Vlong,
	Vvlong,
	Vuchar,
	Vushort,
	Vuint,
	Vulong,
	Vuvlong,
	Vfloat,
	Vdouble,
	Vlongdouble,
	Vcomplex,
	Vdoublex,
	Vlongdoublex,
	Vnbase,
	Vptr = Vnbase,
	Vvoid,
	Vnallbase,
} Cbase;
</pre>
</div>
Only names in the range <span class="id">Vchar</span> ... <span class="id">Vlongdoublex</span> will be returned by <span class="id">cqctvalcbase</span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctint8val">Val cqctint8val(int8_t <span class="arg">x</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctint16val">Val cqctint16val(int16_t <span class="arg">x</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctint32val">Val cqctint32val(int32_t <span class="arg">x</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctint64val">Val cqctint64val(int64_t <span class="arg">x</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctuint8val">Val cqctuint8val(uint8_t <span class="arg">x</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctuint16val">Val cqctuint16val(uint16_t <span class="arg">x</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctuint32val">Val cqctuint32val(uint32_t <span class="arg">x</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctuint64val">Val cqctuint64val(uint64_t <span class="arg">x</span>)</span>
</div>
</div>
<div class="desc">
These functions construct and return a Cinquecento literal cvalue
of the indicated type from <span class="arg">x</span>.
</div>
</div>


<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctvalint8">int8_t cqctvalint8(Val <span class="arg">v</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctvalint16">int16_t cqctvalint16(Val <span class="arg">v</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctvalint32">int32_t cqctvalint32(Val <span class="arg">v</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctvalint64">int64_t cqctvalint64(Val <span class="arg">v</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctvaluint8">uint8_t cqctvaluint8(Val <span class="arg">v</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctvaluint16">uint16_t cqctvaluint16(Val <span class="arg">v</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctvaluint32">uint32_t cqctvaluint32(Val <span class="arg">v</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctvaluint64">uint64_t cqctvaluint64(Val <span class="arg">v</span>)</span>
</div>
</div>
<div class="desc">
These functions convert the
value <span class="arg">v</span> to a C integer of the
indicated type.  The result is undefined
if <span class="arg">v</span> is not a cvalue.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctcstrval">Val cqctcstrval(char *<span class="arg">s</span>)</span>
</div>
</div>
<div class="desc">
Constructs and returns a Cinquecento string that is a
copy of the null-terminated C string <span class="arg">s</span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctcstrnval">Val cqctcstrnval(char *<span class="arg">s</span>, uint64_t <span class="arg">len</span>)</span>
</div>
</div>
<div class="desc">
Constructs and returns a Cinquecento string by copying <span class="arg">len</span> bytes starting at <span class="arg">s</span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctcstrvalshared">Val cqctcstrvalshared(char *<span class="arg">s</span>)</span>
</div>
</div>
<div class="desc">
Constructs and returns a Cinquecento string that
shares storage with the null-terminated C string <span class="arg">s</span>.
Responsibility for the storage remains with the caller.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctcstrnvalshared">Val cqctcstrnvalshared(char *<span class="arg">s</span>, uint64_t <span class="arg">len</span>)</span>
</div>
</div>
<div class="desc">
Constructs and returns a Cinquecento string that shares the <span class="arg">len</span> bytes of storage starting at <span class="arg">s</span>.
Responsibility for the storage remains with the caller.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctvalcstr">char* cqctvalcstr(Val <span class="arg">v</span>)</span>
</div>
</div>
<div class="desc">
Copies the Cinquecento string <span class="arg">v</span> to a C
string.  The result is undefined
if <span class="arg">v</span> is not a string.  The
caller is responsible for freeing the returned string
with <span class="fnindex"><a href="#fn:cqctfreecstr">cqctfreecstr</a></span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctvalcstrshared">char* cqctvalcstrshared(Val <span class="arg">v</span>)</span>
</div>
</div>
<div class="desc">
Returns a pointer to the underlying contiguous storage
of the string <span class="arg">v</span>, if possible.
The storage is shared with the Cinquecento string
object; callers should arrange to protect this object
from garbage collection when appropriate.  The result
is zero if <span class="arg">v</span> is a string whose
storage cannot be represented by a single pointer (call 
<span class="fnindex"><a href="#fn:cqctvalcstr">cqctvalcstr</a></span>
instead), and undefined if <span class="arg">v</span> is not a
string.
</div>
</div>


<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctvalcstrlen">uint64_t cqctvalcstrlen(Val <span class="arg">v</span>)</span>
</div>
</div>
<div class="desc">
Returns the number of bytes in the string <span class="arg">v</span>.
The result is undefined if <span class="arg">v</span> is not a string.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctlength">uint64_t cqctlength(Val <span class="arg">v</span>)</span>
</div>
</div>
<div class="desc">
If <span class="arg">v</span> is a container object, returns the number of elements
in the container; it is equivalent to the built-in function <span class="id"><a href="#fn:length">length</a></span>.
The result is undefined if <span class="arg">v</span> is not a container.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctmklist">Val cqctmklist(uint64_t <span class="arg">n</span>)</span>
</div>
</div>
<div class="desc">
This function is a C wrapper for
<span class="fnindex"><a href="#fn:mklist">mklist</a></span>.
It returns a Cinquecento list initialized with <span class="arg">n</span> <span class="val">nil</span>
elements.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctlistref">Val cqctlistref(Val <span class="arg">l</span>, uint64_r <span class="arg">idx</span>)</span>
</div>
</div>
<div class="desc">
Returns the element at index <span class="arg">idx</span>
in the list <span class="arg">l</span>, or <span class="val">0</span>
if the index is out of bounds or <span class="arg">l</span>
is not a list.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctlistset">Val cqctlistset(Val <span class="arg">l</span>, uint64_r <span class="arg">idx</span>, Val <span class="arg">val</span>)</span>
</div>
</div>
<div class="desc">
Sets the element at index <span class="arg">idx</span>
in the list <span class="arg">l</span> to <span class="arg">val</span>,
and returns <span class="arg">l</span>.
If the index is out of bounds or <span class="arg">l</span>
is not a list, returns <span class="val">0</span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctlistappend">Val cqctlistappend(Val <span class="arg">l</span>, Val <span class="arg">val</span>)</span>
</div>
</div>
<div class="desc">
Appends <span class="arg">val</span> to the end of the list
<span class="arg">l</span>, and returns <span class="arg">l</span>.
If the index is out of bounds or <span class="arg">l</span>
is not a list, returns <span class="val">0</span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctlistvals">Val* cqctlistvals(Val <span class="arg">v</span>)</span>
</div>
</div>
<div class="desc">
Returns a pointer to the array of <span class="id">Val</span>s in
the list <span class="arg">v</span>.
The number of elements in the array is the length returned by
<span class="id"><a href="#fn:cqctlength">cqctlength</a></span>.
The result is undefined if <span class="arg">v</span> is not a list.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctmkvec">Val cqctmkvec(uint64_t <span class="arg">n</span>)</span>
</div>
</div>
<div class="desc">
This function is a C wrapper for
<span class="fnindex"><a href="#fn:mkvec">mkvec</a></span>.
It returns a Cinquecento vector initialized with <span class="arg">n</span> <span class="val">nil</span>
elements.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctvecref">Val cqctvecref(Val <span class="arg">v</span>, uint64_r <span class="arg">idx</span>)</span>
</div>
</div>
<div class="desc">
Returns the element at index <span class="arg">idx</span>
in the vector <span class="arg">v</span>, or <span class="val">0</span>
if the index is out of bounds or <span class="arg">v</span>
is not a vector.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctvecset">Val cqctvecset(Val <span class="arg">v</span>, uint64_r <span class="arg">idx</span>, Val <span class="arg">val</span>)</span>
</div>
</div>
<div class="desc">
Sets the element at index <span class="arg">idx</span>
in the vector <span class="arg">v</span> to <span class="arg">val</span>,
and returns <span class="arg">v</span>.
If the index is out of bounds or <span class="arg">v</span>
is not a vector, returns <span class="val">0</span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctvecvals">Val* cqctvecvals(Val <span class="arg">v</span>)</span>
</div>
</div>
<div class="desc">
Returns a pointer to the array of <span class="id">Val</span>s in
the vector <span class="arg">v</span>.
The number of elements in the array is the length returned by
<span class="id"><a href="#fn:cqctlength">cqctlength</a></span>.
The result is undefined if <span class="arg">v</span> is not a vector.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctmkrange">Val cqctmkrange(Val <span class="arg">beg</span>, Val <span class="arg">len</span>)</span>
</div>
</div>
<div class="desc">
This function is a C wrapper for
<span class="fnindex"><a href="#fn:mkrange">mkrange</a></span>.
It returns a Cinquecento range representing the span of <span class="arg">len</span>
bytes beginning at <span class="arg">beg</span>, or <span class="val">0</span>
if either one <span class="arg">len</span> or <span class="arg">beg</span>
is not a cvalue.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctrangebeg">Val cqctrangebeg(Val <span class="arg">r</span>)</span>
</div>
</div>
<div class="desc">
Returns a cvalue corresponding to the beginning of the range <span class="arg">r</span>,
or <span class="val">0</span>
if <span class="arg">r</span> is not a range.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctrangelen">Val cqctrangelen(Val <span class="arg">r</span>)</span>
</div>
</div>
<div class="desc">
Returns a cvalue corresponding to the length of the range <span class="arg">r</span>,
or <span class="val">0</span>
if <span class="arg">r</span> is not a range.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctmkfd">Val cqctmkfd(Xfd *<span class="arg">Xfd</span>,
char *<span class="arg">name</span>);</span>
</div>
</div>
<div class="desc">
This function is a C wrapper for
<span class="fnindex"><a href="#fn:mkfd">mkfd</a></span>.
Returns a Cinquecento file descriptor value backed by the C functions
defined in <span class="arg">xfd</span>.
The first argument passed to each of the <span class="arg">xfd</span> functions will be a <em>copy</em> of <span class="arg">xfd</span>.
If <span class="arg">name</span> is <span class="id">NULL</span>,
the file descriptor is unnamed.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctenvbind">void cqctenvbind(Toplevel *<span class="arg">top</span>, char *<span class="arg">name</span>,
Val <span class="arg">val</span>);</span>
</div>
</div>
<div class="desc">
Updates (or creates) the binding of <span class="arg">name</span>
in the top-level environment <span class="arg">top</span>
to <span class="arg">val</span>.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctenvlook">Val cqctenvlook(Toplevel *<span class="arg">top</span>, char *<span class="arg">name</span>);</span>
</div>
</div>
<div class="desc">
Returns the value bound to <span class="arg">name</span>
in the top-level environment <span class="arg">top</span>
or <span class="id">NULL</span> if the variable is unbound.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctgcprotect">void cqctgcprotect(VM *<span class="arg">vm</span>, Val <span class="arg">v</span>)</span>
</div>
</div>
<div class="desc">
Protects the value <span class="arg">v</span> from
garbage collection by registering it with the current
GC protection frame of <span class="arg">vm</span>.
References to the value will be valid until after at least
one of the following events: (1) the frame is popped, (2)
<span class="fnindex"><a href="#fn:cqctgcunprotect">cqctgcunprotect</a></span>
is called on the same arguments while the current GC frame is active,
or (3) <span class="arg">vm</span> is freed.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctinterrupt">void cqctinterrupt(VM *<span class="arg">vm</span>)</span>
</div>
</div>
<div class="desc">
Interrupt the Cinquecento evaluator <span class="arg">vm</span>,
if it is executing.
</div>
</div>

<div class="docitem">
<div class="proto">
<div class="function">
<span class="id" id="fn:cqctfreecstr">void cqctfreecstr(char *<span class="arg">str</span>)</span>
</div>
<div class="function">
<span class="id" id="fn:cqctfini">void cqctfini(Toplevel *<span class="arg">top</span>)</span>
</div>
</div>
<div class="desc">
These functions free the resources allocated by the above functions.
<span class="id">Cqctfreecstr</span> frees a C string returned by
<span class="fnindex"><a href="#fn:cqctval2cstr">cqctval2cstr</a></span>
or <span class="fnindex"><a href="#fn:cqctsprintval">cqctsprintval</a></span>.
<span class="id">Cqctfini</span> frees a top-level
environment, and should be called only after all virtual
machines sharing the environment have been freed.
</div>
</div>

<h4 id="sec:bib">Bibliography</h4>

<div>
<table>

<tr>
<td>
<span id="bib:sicp">[SICP]</span>
</td>
<td>
Harold Abelson and Gerald Jay Sussman with Julie Sussman.
<em><a href="http://mitpress.mit.edu/sicp/full-text/book/book.html">Structure and Interpretation of Computer Programs (2nd Edition)</a></em>.
MIT Press, 1996.
</td>
</tr>

<tr>
<td>
<span id="bib:csug">[CSUG]</span>
</td>
<td>
 R. Kent Dybvig. <em><a href="http://www.scheme.com/csug8">The Chez Scheme Version 8 User's Guide</a></em>.  Cadence Research Systems, 2009.
</td>
</tr>

<tr>
<td>
<span id="bib:tspl">[TSPL]</span>
</td>
<td>
R. Kent Dybvig. <em><a href="http://www.scheme.com/tspl4/">The Scheme Programming Language, 4th edition</a></em>. MIT Press, 2009
</td>

<tr>
<td>
<span id="bib:bibop">[BiBOP]</span>
</td>
<td>
R. Kent Dybvig, David Eby, and Carl Bruggeman.
<em><a href="http://www.cs.indiana.edu/~dyb/pubs/bibop.pdf">Don't stop the BiBOP: Flexible and efficient storage management for dynamically typed languages.</a></em>  Indiana University technical report #400, March 1994. 
</td>
</tr>

<tr>
<td>
<span id="bib:guardian">[Guardians]</span>
</td>
<td>
R. Kent Dybvig, David Eby, and Carl Bruggeman.
<em><a href="http://www.cs.indiana.edu/~dyb/pubs/guardians-pldi93.pdf">
Guardians in a generation-based collector.</a></em>
ACM SIGPLAN 1993 Conference on Programming Language
Design and Implementation, 207-216, June 1993.
</td>
</tr>

<tr>
<td>
<span id="bib:ls">[Little]</span>
</td>
<td>
Daniel P. Friedman and Matthias Felleisen.
<em>The Little Schemer (4th Edition)</em>.
MIT Press, 1995.
</td>
</tr>

<tr>
<td>
<span id="bib:hs">[H&S]</span>
</td>
<td>
Samuel P. Harbison III and Guy L. Steele Jr.
<em>C: A Reference Manual (5th Edition)</em>.
Prentice Hall, 2002.
</td>
</tr>

<tr>
<td>
<span id="bib:kr">[K&R]</span>
</td>
<td>
Brian W. Kernighan and Dennis M. Ritchie.
<em>The C Programming Language (2nd Edition)</em>.
Prentice Hall, 1988.
</td>
</tr>

</table>


<h4 id="sec:synindex">Syntax Index</h4>
<div class="id">
<div class="index">
<div class="fnindex">
<a href="#syn:cidlit"><span class="val">'id</span> (cid literal)</a><br />
<a href="#syn:invoke"><span class="val"><span class="arg">o</span>.<span class="arg">f</span> (method invocation)</a><br />
<a href="#syn:asof"><span class="val"><span class="arg">dom</span>.as</span></a><br />
<a href="#syn:asof"><span class="val"><span class="arg">dom</span>.ns</span></a><br />
<a href="#syn:_emptylist_">[<span class="arg">value</span>, ... ]</a><br />
<a href="#syn:_emptytable_">[<span class="arg">key</span> : <span class="arg">value</span>, ...]</a><br />
<a href="#syn:_at_define">@define</a><br />
<a href="#syn:_at_defloc">@defloc</a><br />
<a href="#syn:_at_global">@global</a><br />
<a href="#syn:_at_include">@include</a><br />
<a href="#syn:_at_lambda">@lambda</a><br />
<a href="#syn:_at_lazyapply">@lazyapply</a><br />
<a href="#syn:_at_local">@local</a><br />
<a href="#syn:_at_names">@names</a><br />
<a href="#syn:_at_quote">@quote</a><br />
<a href="#syn:_at_record">@record</a><br />
<a href="#syn:return">return</a><br />
<a href="#syn:_at_typeof">@typeof</a><br />
</div>
</div>
</div>

<h4 id="sec:cindex">C Interface Index</h4>
<div class="id">
<div class="index">
<div class="fnindex">
<a href="#fn:cqctcallfn">cqctcallfn</a><br />
<a href="#fn:cqctcallthunk">cqctcallthunk</a><br />
<a href="#fn:cqctcompile">cqctcompile</a><br />
<a href="#fn:cqctcstrnval">cqctcstrnval</a><br />
<a href="#fn:cqctcstrnvalshared">cqctcstrnvalshared</a><br />
<a href="#fn:cqctcstrval">cqctcstrval</a><br />
<a href="#fn:cqctcstrvalshared">cqctcstrvalshared</a><br />
<a href="#fn:cqctenvbind">cqctenvbind</a><br />
<a href="#fn:cqctenvlook">cqctenvlook</a><br />
<a href="#fn:cqcteval">cqcteval</a><br />
<a href="#fn:cqctfaulthook">cqctfaulthook</a><br />
<a href="#fn:cqctfini">cqctfini</a><br />
<a href="#fn:cqctinit">cqctinit</a><br />
<a href="#fn:cqctint8val">cqctint8val</a><br />
<a href="#fn:cqctint16val">cqctint16val</a><br />
<a href="#fn:cqctint32val">cqctint32val</a><br />
<a href="#fn:cqctint64val">cqctint64val</a><br />
<a href="#fn:cqctinterrupt">cqctinterrupt</a><br />
<a href="#fn:cqctlength">cqctlength</a><br />
<a href="#fn:cqctlistappend">cqctlistappend</a><br />
<a href="#fn:cqctlistref">cqctlistref</a><br />
<a href="#fn:cqctlistset">cqctlistset</a><br />
<a href="#fn:cqctlistvals">cqctlistvals</a><br />
<a href="#fn:cqctmkfd">cqctmkfd</a><br />
<a href="#fn:cqctmklist">cqctmklist</a><br />
<a href="#fn:cqctmkrange">cqctmkrange</a><br />
<a href="#fn:cqctmkvec">cqctmkvec</a><br />
<a href="#fn:cqctmkvm">cqctmkvm</a><br />
<a href="#fn:cqctrangebeg">cqctrangebeg</a><br />
<a href="#fn:cqctrangelen">cqctrangelen</a><br />
<a href="#fn:cqctsprintval">cqctsprintval</a><br />
<a href="#fn:cqctuint8val">cqctuint8val</a><br />
<a href="#fn:cqctuint16val">cqctuint16val</a><br />
<a href="#fn:cqctuint32val">cqctuint32val</a><br />
<a href="#fn:cqctuint64val">cqctuint64val</a><br />
<a href="#fn:cqctvalcbase">cqctvalcbase</a><br />
<a href="#fn:cqctvalcstr">cqctvalcstr</a><br />
<a href="#fn:cqctvalcstrlen">cqctvalcstrlen</a><br />
<a href="#fn:cqctvalcstrshared">cqctvalcstrshared</a><br />
<a href="#fn:cqctvalint8">cqctvalint8</a><br />
<a href="#fn:cqctvalint16">cqctvalint16</a><br />
<a href="#fn:cqctvalint32">cqctvalint32</a><br />
<a href="#fn:cqctvalint64">cqctvalint64</a><br />
<a href="#fn:cqctvaluint8">cqctvaluint8</a><br />
<a href="#fn:cqctvaluint16">cqctvaluint16</a><br />
<a href="#fn:cqctvaluint32">cqctvaluint32</a><br />
<a href="#fn:cqctvaluint64">cqctvaluint64</a><br />
<a href="#fn:cqctvecref">cqctvecref</a><br />
<a href="#fn:cqctvecset">cqctvecset</a><br />
<a href="#fn:cqctvecvals">cqctvecvals</a><br />
</div>
</div>
</div>


<h4 id="sec:fnindex">Function Index</h4>
<div class="id">
<div class="index">
<div class="fnindex">
<a href="#fn:asof">asof</a><br />
<a href="#fn:access">access</a><br />
<a href="#fn:append">append</a><br />
<a href="#fn:apply">apply</a><br />
<a href="#fn:applyk">applyk</a><br />
<a href="#fn:arraynelm">arraynelm</a><br />
<a href="#fn:backtrace">backtrace</a><br />
<a href="#fn:basebase">basebase</a><br />
<a href="#fn:baseid">baseid</a><br />
<a href="#fn:baserep">baserep</a><br />
<a href="#fn:bitfieldcontainer">bitfieldcontainer</a><br />
<a href="#fn:bitfieldpos">bitfieldpos</a><br />
<a href="#fn:bitfieldwidth">bitfieldwidth</a><br />
<a href="#fn:bsearch">bsearch</a><br />
<a href="#fn:callcc">callcc</a><br />
<a href="#fn:car">car</a><br />
<a href="#fn:cdr">cdr</a><br />
<a href="#fn:chdir">chdir</a><br />
<a href="#fn:cid2str">cid2str</a><br />
<a href="#fn:close">close</a><br />
<a href="#fn:cntrget">cntrget</a><br />
<a href="#fn:cntrput">cntrput</a><br />
<a href="#fn:compact">compact</a><br />
<a href="#fn:compile">compile</a><br />
<a href="#fn:concat">concat</a><br />
<a href="#fn:cons">cons</a><br />
<a href="#fn:copy">copy</a><br />
<a href="#fn:count">count</a><br />
<a href="#fn:cvalcmp">cvalcmp</a><br />
<a href="#fn:cwd">cwd</a><br />
<a href="#fn:delete">delete</a><br />
<a href="#fn:delq">delq</a><br />
<a href="#fn:domof">domof</a><br />
<a href="#fn:enumconsts">enumconsts</a><br />
<a href="#fn:nsenumsym">enumsym</a> (ns method)<br />
<a href="#fn:nsenumtype">enumtype</a> (ns method)<br />
<a href="#fn:environ">environ</a><br />
<a href="#fn:eq">eq</a><br />
<a href="#fn:equal">equal</a><br />
<a href="#fn:equalctype">equalctype</a><br />
<a href="#fn:equalcval">equalcval</a><br />
<a href="#fn:eqv">eqv</a><br />
<a href="#fn:eqvctype">eqvctype</a><br />
<a href="#fn:eqvcval">eqvcval</a><br />
<a href="#fn:errno">errno</a><br />
<a href="#fn:error">error</a><br />
<a href="#fn:eval">eval</a><br />
<a href="#fn:evalk">evalk</a><br />
<a href="#fn:exit">exit</a><br />
<a href="#fn:fault">fault</a><br />
<a href="#fn:fdname">fdname</a><br />
<a href="#fn:fdopen">fdopen</a><br />
<a href="#fn:fieldattr">fieldattr</a><br />
<a href="#fn:fieldid">fieldid</a><br />
<a href="#fn:fieldoff">fieldoff</a><br />
<a href="#fn:fields">fields</a><br />
<a href="#fn:fieldtype">fieldtype</a><br />
<a href="#fn:finalize">finalize</a><br />
<a href="#fn:foreach">foreach</a><br />
<a href="#fn:fork">fork</a><br />
<a href="#fn:fprintf">fprintf</a><br />
<a href="#fn:fread">fread</a><br />
<a href="#fn:gc">gc</a><br />
<a href="#fn:gclock">gclock</a><br />
<a href="#fn:gcstats">gcstats</a><br />
<a href="#fn:gclock">gcunlock</a><br />
<a href="#fn:asget">get</a> (as method)<br />
<a href="#fn:getbytes">getbytes</a><br />
<a href="#fn:getenv">getenv</a><br />
<a href="#fn:gethostbyname">gethostbyname</a><br />
<a href="#fn:getpid">getpid</a><br />
<a href="#fn:getpeername">getpeername</a><br />
<a href="#fn:getsockname">getsockname</a><br />
<a href="#fn:gettimeofday">gettimeofday</a><br />
<a href="#fn:hash">hash</a><br />
<a href="#fn:hashctype">hashctype</a><br />
<a href="#fn:hashcval">hashcval</a><br />
<a href="#fn:hashq">hashqv</a><br />
<a href="#fn:hashqv">hashqv</a><br />
<a href="#fn:hashqvctype">hashqvctype</a><br />
<a href="#fn:hashqvcval">hashqvcval</a><br />
<a href="#fn:head">head</a><br />
<a href="#fn:index">index</a><br />
<a href="#fn:inflate">inflate</a><br />
<a href="#fn:inflate">inflatezlib</a><br />
<a href="#fn:ioctl">ioctl</a><br />
<a href="#fn:isalnum">isalnum</a><br />
<a href="#fn:isalpha">isalpha</a><br />
<a href="#fn:isarray">isarray</a><br />
<a href="#fn:isas">isas</a><br />
<a href="#fn:isascii">isascii</a><br />
<a href="#fn:isbase">isbase</a><br />
<a href="#fn:isbitfield">isbitfield</a><br />
<a href="#fn:isblank">isblank</a><br />
<a href="#fn:iscid">iscid</a><br />
<a href="#fn:iscntrl">iscntrl</a><br />
<a href="#fn:isctype">isctype</a><br />
<a href="#fn:iscvalue">iscvalue</a><br />
<a href="#fn:isdigit">isdigit</a><br />
<a href="#fn:isdom">isdom</a><br />
<a href="#fn:isempty">isempty</a><br />
<a href="#fn:isenum">isenum</a><br />
<a href="#fn:isenumconst">isenumconst</a><br />
<a href="#fn:isfd">isfd</a><br />
<a href="#fn:isfunc">isfunc</a><br />
<a href="#fn:isgraph">isgraph</a><br />
<a href="#fn:islist">islist</a><br />
<a href="#fn:islower">islower</a><br />
<a href="#fn:ismapped">ismapped</a> (function)<br />
<a href="#fn:asismapped">ismapped</a> (as method)<br />
<a href="#fn:ismember">ismember</a><br />
<a href="#fn:isnil">isnil</a><br />
<a href="#fn:isns">isns</a><br />
<a href="#fn:isodigit">isodigit</a><br />
<a href="#fn:ispair">ispair</a><br />
<a href="#fn:isprint">isprint</a><br />
<a href="#fn:isprocedure">isprocedure</a><br />
<a href="#fn:isptr">isptr</a><br />
<a href="#fn:ispunct">ispunct</a><br />
<a href="#fn:isrange">isrange</a><br />
<a href="#fn:isrd">isrd</a><br />
<a href="#fn:isrec">isrec</a><br />
<a href="#fn:isrinr">isrinr</a><br />
<a href="#fn:isspace">isspace</a><br />
<a href="#fn:isstring">isstring</a><br />
<a href="#fn:isstruct">isstruct</a><br />
<a href="#fn:issu">issu</a><br />
<a href="#fn:istable">istable</a><br />
<a href="#fn:istypedef">istypedef</a><br />
<a href="#fn:isundeftype">isundeftype</a><br />
<a href="#fn:isunion">isunion</a><br />
<a href="#fn:isupper">isupper</a><br />
<a href="#fn:isvector">isvector</a><br />
<a href="#fn:isvoid">isvoid</a><br />
<a href="#fn:isweakpair">isweakpair</a><br />
<a href="#fn:isxdigit">isxdigit</a><br />
<a href="#fn:join">join</a><br />
<a href="#fn:l1version">l1version</a><br />
<a href="#fn:length">length</a><br />
<a href="#fn:list">list</a><br />
<a href="#fn:listdel">listdel</a><br />
<a href="#fn:listins">listins</a><br />
<a href="#fn:listref">listref</a><br />
<a href="#fn:listset">listset</a><br />
<a href="#fn:nslookaddr">lookaddr</a> (ns method)<br />
<a href="#fn:lookfield">lookfield</a><br />
<a href="#fn:nslooksym">looksym</a> (ns method)<br />
<a href="#fn:looksym">looksym</a> (function)<br />
<a href="#fn:nslooktype">looktype</a> (ns method)<br />
<a href="#fn:looktype">looktype</a> (function)<br />
<a href="#fn:malloc">malloc</a><br />
<a href="#fn:map">map</a> (function)<br />
<a href="#fn:asmap">map</a> (as method)<br />
<a href="#fn:mapfile">mapfile</a><br />
<a href="#fn:memcpy">memcpy</a><br />
<a href="#fn:memset">memset</a><br />
<a href="#fn:mkcid">mkcid</a><br />
<a href="#fn:mkctype_array">mkctype_array</a><br />
<a href="#fn:mkctype_base">mkctype_base</a><br />
<a href="#fn:mkctype_bitfield">mkctype_bitfield</a><br />
<a href="#fn:mkctype_bool">mkctype_bool</a><br />
<a href="#fn:mkctype_char">mkctype_char</a><br />
<a href="#fn:mkctype_complex">mkctype_complex</a><br />
<a href="#fn:mkctype_const">mkctype_const</a><br />
<a href="#fn:mkctype_double">mkctype_double</a><br />
<a href="#fn:mkctype_doublex">mkctype_doublex</a><br />
<a href="#fn:mkctype_enum">mkctype_enum</a><br />
<a href="#fn:mkctype_float">mkctype_float</a><br />
<a href="#fn:mkctype_fn">mkctype_fn</a><br />
<a href="#fn:mkctype_int">mkctype_int</a><br />
<a href="#fn:mkctype_ldouble">mkctype_ldouble</a><br />
<a href="#fn:mkctype_ldoublex">mkctype_ldoublex</a><br />
<a href="#fn:mkctype_long">mkctype_long</a><br />
<a href="#fn:mkctype_ptr">mkctype_ptr</a><br />
<a href="#fn:mkctype_short">mkctype_short</a><br />
<a href="#fn:mkctype_struct">mkctype_struct</a><br />
<a href="#fn:mkctype_typedef">mkctype_typedef</a><br />
<a href="#fn:mkctype_uchar">mkctype_uchar</a><br />
<a href="#fn:mkctype_uint">mkctype_uint</a><br />
<a href="#fn:mkctype_ulong">mkctype_ulong</a><br />
<a href="#fn:mkctype_undef">mkctype_undef</a><br />
<a href="#fn:mkctype_union">mkctype_union</a><br />
<a href="#fn:mkctype_ushort">mkctype_ushort</a><br />
<a href="#fn:mkctype_uvlong">mkctype_uvlong</a><br />
<a href="#fn:mkctype_vlong">mkctype_vlong</a><br />
<a href="#fn:mkctype_void">mkctype_void</a><br />
<a href="#fn:mkdir">mkdir</a><br />
<a href="#fn:mkdom">mkdom</a><br />
<a href="#fn:mkfd">mkfd</a><br />
<a href="#fn:mkfield">mkfield</a><br />
<a href="#fn:mkguardian">mkguardian</a><br />
<a href="#fn:mklist">mklist</a><br />
<a href="#fn:mkmas">mkmas</a><br />
<a href="#fn:mkmas">mkmasx</a><br />
<a href="#fn:mknas">mknas</a><br />
<a href="#fn:mkas">mkns</a><br />
<a href="#fn:mknsraw">mknsraw</a><br />
<a href="#fn:mkparam">mkparam</a><br />
<a href="#fn:mkrange">mkrange</a><br />
<a href="#fn:mkrd">mkrd</a><br />
<a href="#fn:mksas">mksas</a><br />
<a href="#fn:mkstr">mkstr</a><br />
<a href="#fn:mksym">mksym</a><br />
<a href="#fn:mktab">mktab</a><br />
<a href="#fn:mktabq">mktabq</a><br />
<a href="#fn:mktabqv">mktabqv</a><br />
<a href="#fn:mkvec">mkvec</a><br />
<a href="#fn:mkxsas">mkxsas</a><br />
<a href="#fn:mkzas">mkzas</a><br />
<a href="#fn:myrootns">myrootns</a><br />
<a href="#fn:nameof">nameof</a><br />
<a href="#fn:asof">nsof</a><br />
<a href="#fn:nsptr">nsptr</a><br />
<a href="#fn:open">open</a><br />
<a href="#fn:paramid">paramid</a><br />
<a href="#fn:params">params</a><br />
<a href="#fn:paramtype">paramtype</a><br />
<a href="#fn:parse">parse</a><br />
<a href="#fn:pop">pop</a><br />
<a href="#fn:popen">popen</a><br />
<a href="#fn:postgc">postgc</a><br />
<a href="#fn:asput">put</a> (as method)<br />
<a href="#fn:printf">printf</a><br />
<a href="#fn:push">push</a><br />
<a href="#fn:putbytes">putbytes</a><br />
<a href="#fn:rangebeg">rangebeg</a><br />
<a href="#fn:rangelen">rangelen</a><br />
<a href="#fn:rand">rand</a><br />
<a href="#fn:rand">randseed</a><br />
<a href="#fn:rdis">rdis</a><br />
<a href="#fn:rdfields">rdfields</a><br />
<a href="#fn:rdfmt">rdfmt</a><br />
<a href="#fn:rdgettab">rdgettab</a><br />
<a href="#fn:rdmk">rdmk</a><br />
<a href="#fn:rdname">rdname</a><br />
<a href="#fn:rdof">rdof</a><br />
<a href="#fn:rdsetfmt">rdsetfmt</a><br />
<a href="#fn:rdgettab">rdsettab</a><br />
<a href="#fn:read">read</a><br />
<a href="#fn:resettop">resettop</a><br />
<a href="#fn:rettype">rettype</a><br />
<a href="#fn:reverse">reverse</a><br />
<a href="#fn:seek">seek</a><br />
<a href="#fn:select">select</a><br />
<a href="#fn:setcar">setcar</a><br />
<a href="#fn:setcdr">setcdr</a><br />
<a href="#fn:setenv">setenv</a><br />
<a href="#fn:setloadpath">setloadpath</a><br />
<a href="#fn:setname">setname</a><br />
<a href="#fn:settypedeftype">settypedeftype</a><br />
<a href="#fn:sha1">sha1</a><br />
<a href="#fn:slice">slice</a><br />
<a href="#fn:sockpair">sockpair</a><br />
<a href="#fn:sort">sort</a><br />
<a href="#fn:split">split</a><br />
<a href="#fn:sprintfa">sprintfa</a><br />
<a href="#fn:statistics">statistics</a><br />
<a href="#fn:stringof">stringof</a><br />
<a href="#fn:strcmp">strcmp</a><br />
<a href="#fn:strlen">strlen</a><br />
<a href="#fn:strput">strput</a><br />
<a href="#fn:strref">strref</a><br />
<a href="#fn:strstr">strstr</a><br />
<a href="#fn:strton">strton</a><br />
<a href="#fn:suattr">suattr</a><br />
<a href="#fn:substr">substr</a><br />
<a href="#fn:subtype">subtype</a><br />
<a href="#fn:suekind">suekind</a><br />
<a href="#fn:suetag">suetag</a><br />
<a href="#fn:susize">susize</a><br />
<a href="#fn:symattr">symattr</a><br />
<a href="#fn:symid">symid</a><br />
<a href="#fn:symoff">symoff</a><br />
<a href="#fn:symtype">symtype</a><br />
<a href="#fn:tabdelete">tabdelete</a><br />
<a href="#fn:tabenum">tabenum</a><br />
<a href="#fn:tabinsert">tabinsert</a><br />
<a href="#fn:tabkeys">tabkeys</a><br />
<a href="#fn:tablook">tablook</a><br />
<a href="#fn:tabvals">tabvals</a><br />
<a href="#fn:tail">tail</a><br />
<a href="#fn:tcpaccept">tcpaccept</a><br />
<a href="#fn:tcplisten">tcplisten</a><br />
<a href="#fn:tcpopen">tcpopen</a><br />
<a href="#fn:tolower">tolower</a><br />
<a href="#fn:toupper">toupper</a><br />
<a href="#fn:typedefid">typedefid</a><br />
<a href="#fn:typedeftype">typedeftype</a><br />
<a href="#fn:typename">typename</a><br />
<a href="#fn:uname">uname</a><br />
<a href="#fn:unlink">unlink</a><br />
<a href="#fn:vecref">vecref</a><br />
<a href="#fn:vecset">vecset</a><br />
<a href="#fn:vector">vector</a><br />
<a href="#fn:waitpid">waitpid</a><br />
<a href="#fn:weakcons">weakcons</a><br />
<a href="#fn:write">write</a><br />
</div>
</div>
</div>

</div>
</body>
</html>
