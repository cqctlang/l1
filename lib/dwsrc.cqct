@global dwaddr2src,
	dwsrc2addr
	;

{

@define dwaddr2src(addr, nsmap)
{
	@local ns;
	ns = nsmap.byaddr(addr);
	if(ns == nil)
		error("no name space for pc %p", addr);
	return ns.looksrc(addr);
}

@define dwsrc2addr(spec, ns)
{
	@local ss, file, line, pc;

	ss = split(spec, ":");
	if(length(ss) != 2)
		error("invalid source line specification: %a", spec);
	file = ss[0];
	line = strton(ss[1]);
	pc = ns.lookline(file, line);
	return pc;
}

}
