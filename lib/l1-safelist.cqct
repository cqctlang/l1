@include <chronicle.cqct>
@include <l1-debug.cqct>
@include <l1-mem.cqct>

@define safelist(db, l)
{
}

@define listallocs(db)
{
	@local dom, lists;

	dom = db.exedom;
	lists = returns(db, db.interval(), &dom`_mklist);
	printf("%d calls to _mklist\n", length(lists));
	printf("return values are:\n");
	foreach(@lambda(it){
			@local vl;
			vl = vallife(db, it.val, it.t);
			printf("\t%a (%t): %a\n", it, it.val, vl);
			foreach(@lambda(it){
					dumpstack(db, it.t);
				}, vl);
		}, lists);
}
