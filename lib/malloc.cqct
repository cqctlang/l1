@define malloc(len)
{
	@local p, as, dom;
	p = _malloc(len);
	if(p == 0)
		return p;
	as = mkmas(p, len);
	finalize(as, @lambda(as) { _free(p); });
	dom = mkdom(myrootns(), as);
	return {dom}(char*)p;
}
