@define defaulterror(msg)
{
     printf("boot error: %s\n", msg);
     exit(1);
}

@include <callcc.cqct>
@include <dynamicwind.cqct>

/* once we have callcc, we can get a backtrace
   on boot-time errors. */

callcc(@lambda(done){

@define defaulterror(msg)
{
     callcc(@lambda(errk){
	       printf("boot error: %s\n", msg);
	       kbacktrace(continuationfr(errk));
	       done(nil);
	  });
}
	  
@include "bootmain.cqct"

});
